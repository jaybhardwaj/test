<html>

<head>
    <% include ../partials/head %>
        <% include expHeader.ejs %>
            <% include ../partials/adminheader %>
            <script type="text/javascript" src="https://parall.ax/parallax/js/jspdf.js"></script>

            <script type="text/javascript" src="/js/html2canvas.min.js"></script>
                <style>
                    .dataTables_filter,
                    .dataTables_length {
                        display: none;
                        margin-right: 40px;
                    }
                    .se-pre-con {
                        background-color: transparent !important;
                    }
                </style>
                </header>
                <script type="text/javascript">
                 var arrmonth=["sas","January","February","March","April","May","Jun","July","August","September","October","November","December"];
                    var array = [];
                    /*document id for data table and datepicher*/
                    var str1 = '';
                    $(document).ready(function() {
                        $(".se-pre-con").fadeOut("slow");
                        $('.exphome-img').addClass('active');
                        toCheckExpenseSubmitOrNot();
                        hidethebuttons();
                        role();
                        newExpense();
                        tootherfunction();  
                        $('#changeUser').click(function() {
                            getBillableUsers();
                        });
                        $("#data_table").dataTable();
                       //  $("#homeTable").dataTable();
                        $("#searchbox").keyup(function() {
                            $("#data_table").dataTable().fnFilter(this.value);
                        });
                         $("#printtable").dataTable();
                        $("#bugtable1").dataTable();
                        $("#searchbox11").keyup(function() {
                            $("#bugtable1").dataTable().fnFilter(this.value);
                        });

                        $('#datebutton').datepicker({
                            onSelect: function(dateText, inst) {
                                datepicher2();
                                document.getElementById("datebutton").disabled = true;
                            }
                        });

                        $('#datebuttonuser').datepicker({
                            onSelect: function(dateText, inst) {
                                datepicherforUser();
                                document.getElementById("datebuttonuser").disabled = true;
                            }
                        });

                         $('#datebuttonuserapp').datepicker({
                            onSelect: function(dateText, inst) {
                                datepicherforUserapp();
                                document.getElementById("datebuttonuserapp").disabled = true;
                            }
                        });

                        jQuery('.dateRangePicker').datetimepicker({
                            i18n: {
                                de: {
                                    months: [
                                        'Januar', 'Februar', 'März', 'April',
                                        'Mai', 'Juni', 'Juli', 'August',
                                        'September', 'Oktober', 'November', 'Dezember',
                                    ],
                                    dayOfWeek: [
                                        "So.", "Mo", "Di", "Mi",
                                        "Do", "Fr", "Sa.",
                                    ]
                                }
                            },
                            timepicker: false,
                            format: 'Y.m.d'
                        });
                        //.datepicker
                        // ({ dateFormat: "yy-mm-dd" }).val();  
                        /* code for datepicher*/
                       /* jQuery('.datepicker').datetimepicker({ 
                            i18n: {
                                de: {
                                    months: [
                                        'Januar', 'Februar', 'März', 'April',
                                        'Mai', 'Juni', 'Juli', 'August',
                                        'September', 'Oktober', 'November', 'Dezember',
                                    ],
                                   dayOfWeek: [ "So.", "Mo", "Di", "Mi","Do", "Fr", "Sa.",],
                                },
                            },
                            timepicker: false,
                            format: 'd-m-Y'
                           
                        });*/
                      
                            
                             //return shortDate;
                       
                        ///****new ///
                        var a=DisableMonday();
                        ab=new Date(a);
                        $('.datepicker').datetimepicker({
                           timepicker: false,
                            format: 'd-m-Y',
                             minDate: ab
                          // minDate:'2016-06-07'
                            });
                            
                          /*  $( ".datepicker" ).datepicker({
                               beforeShowDay: DisableSpecificDates
                             });*/
                                
                        ///88bds//

                        /*for DataTable*/
                        $('#cli').addClass('hide');
                        $('.users8').addClass('activetab');
                        var oTable = $("#bugtable").dataTable({
                            "bLengthChange": false,
                            "paging": false,
                            "binfo": false,
                            "bDestroy": true,

                            "aoColumnDefs": [{
                                "bSortable": false,
                                "aTargets": [-1]
                            }],
                            "autoWidth": false,
                            "columns": [{
                                "width": "10%"
                            }, {
                                "width": "10%"
                            }, {
                                "width": "10%"
                            }, {
                                "width": "10%"
                            }, {
                                "width": "10%"
                            }, {
                                "width": "10%"
                            }]
                        });
                         var oTable = $("#homeTable").dataTable({
                            "bLengthChange": false,
                            "paging": false,
                            "binfo": false,
                            "bDestroy": true,

                            "aoColumnDefs": [{
                                "bSortable": false,
                                "aTargets": [-1]
                            }],
                            "autoWidth": false,
                            "columns": [{
                                "width": "10%"
                            }, {
                                "width": "10%"
                            }, {
                                "width": "10%"
                            },  {
                                "width": "10%"
                            }]
                        });
                        $("#searchbox").keyup(function() {
                            $("#data_table").dataTable().fnFilter(this.value);
                        });

                    });
                    /*date function*/
                     function DisableMonday() {
                         var date= new Date();
                           return  date.setDate(date.getDate()-47);
                       }



                    var ab = $(function() {
                        var formatted_date = function(date) {
                            var m = ("0" + (date.getMonth() + 1)).slice(-2); 
                            var d = ("0" + date.getDate()).slice(-2); 
                            var y = date.getFullYear();
                            return y + '-' + m + '-' + d;
                        }
                        var curr_date = new Date();
                        var day = curr_date.getDay();
                        var diff = curr_date.getDate(); 
                        var lastday = new Date(curr_date.getFullYear(), curr_date.getMonth() + 1 , 0).getDate();
                        if (diff < 16) {
                            var week_start_tstmp = curr_date.setDate(15);
                        } else {
                            week_start_tstmp = curr_date.setDate(lastday);
                        }
                        var week_start = new Date(week_start_tstmp);
                        var week_start_date = formatted_date(week_start);
                        var week_end = new Date(week_start_tstmp); 
                        week_end = new Date(week_end.setDate(week_end.getDate() + 6));
                        var stardate = ("0" + week_start.getDate()).slice(-2) + '-' + arrmonth[parseInt(week_start.getMonth() + 1)]+ '-' + week_start.getFullYear();       
                        var week_end_date = formatted_date(week_end);
                        date = week_start_date + ' to ' + week_end_date; 
                        $('#datebutton').val(stardate);
                        $('#datebuttonuser').val(stardate);
                        $('#datebuttonuserapp').val(stardate);
                        $('#hiddendatebuttonuser').val(week_start_date);
                        $('#hiddendatebuttonuserapp').val(week_start_date);
                        $('#hiddendatebutton').val(week_start_date);
                        getBillableUsers();
                    });
                
                    /*end*/
                    /*end datepicher code*/

                    function hideLineDetails() {
                        $("#d11").addClass('hide');
                        $("#hotel").addClass('hide');
                        $("#footer").addClass('hide');
                        $("#travel").addClass('hide');
                        $("#phone").addClass('hide');
                        $("#rfd").addClass('hide');
                        $("#food").addClass('hide');
                        $("#diem").addClass('hide');
                        $("#other").addClass('hide');

                    }

                    function tootherfunction() {
                        if (<%=flag%> == 1) {
                            otherExpense();
                        }
                    }

                    /*function for hide the*/

                    function showexpensType() {
                        $("#d11").removeClass('hide');
                        validation();
                    }

                    /*end*/
                    /*function for open the form for edit the expense*/

                    function getFormattedDate(date) {
                        var year = date.getFullYear();
                        var month = (1 + date.getMonth()).toString();
                        month = month.length > 1 ? month : '0' + month;
                        var day = date.getDate().toString();
                        day = day.length > 1 ? day : '0' + day;
                        return year + '/' + month + '/' + day;
                    }

                    function showexpensDetailsforedit(id) {
                        $('.inrs').removeClass('hide');
                        var expenseType = id;
                        if (expenseType == 1) {
                            
                            $("#myModal1").modal('show');
                        }
                        if (expenseType == 2) {
                            $("#myModal2").modal('show');
                        }
                        if (expenseType == 4) {
                            $("#myModal3").modal('show');
                        }
                        if (expenseType == 5) {
                            $("#myModal4").modal('show');
                             if($("#rfdtypeof").val()==2){
                          $("#deasign").addClass('hide');
                          $("#totalkm").html(''); 
                          $("#totalkm").append("Parking Fee");
                        }
                          if($("#rfdtypeof").val()==1){
                          $("#deasign").removeClass('hide');
                          $("#totalkm").html(''); 
                          $("#totalkm").append("Total km Travel");
                        }
                        }
                        if (expenseType == 3) {
                            $("#myModal6").modal('show');
                        }
                        if (expenseType == 6) {
                            $("#myModal5").modal('show');
                        }
                        if (expenseType > 6) {
                            $("#myModal7").modal('show');
                        }
                    }

                 function  beforeShowDay(date) {
                      var dd = date.getDate();
                      var mm = date.getMonth()+1; //January is 0!
                      var yyyy = date.getFullYear();
                      var shortDate = mm+'/'+dd+'/'+yyyy;
                      var test = "2016/06/20";
                      if (shortDate < test) { 
                       return [false, "" ];

                      } else {
                    return [true, "" ];
                    }
                   };

                    /*end*/
                    function datepicker1() {

                        document.getElementById("datebutton").disabled = false;
                        $('#datebutton').focus();
                        // datepicher(); 
                        // datepicher2();
                        // document.getElementById("datebutton").disabled=true;
                        //document.getElementById("datebutton").focus();

                    }

                 //jai bhai

                 function printDiv(divName) {
                var printContents = document.getElementById(divName).innerHTML;
                var originalContents = document.body.innerHTML;

                  document.body.innerHTML = printContents;

                window.print();

               document.body.innerHTML = originalContents;
              }
                 


                    function datepickerforotherUser() {
                        document.getElementById("datebuttonuser").disabled = false;
                        document.getElementById("datebuttonuser").focus();

                    }

                      function datepickerforotherUserapp() {
                        document.getElementById("datebuttonuserapp").disabled = false;
                        document.getElementById("datebuttonuserapp").focus();

                    }
                    /*function for open attachment form*/

                    function showAttechmentmodel(id) {
                        // alert("submit attechment");
                        $('#attachment').trigger("reset");
                        $('#claimeid').val(id);
                        $("#myModal10").modal('show');
                    }
                    /*end*/
                    /*date function in javascript*/
                    function datepicherforUser() {

                        var date = $('#datebuttonuser').val();
                        var newdate = new Date(date);
                        if (newdate.getDate() < 16) {
                            var dd = ('15');
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        } else {
                               if((newdate.getMonth() + 1)==2){
                            var dd = ('28').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                      
                            if(((newdate.getMonth() + 1)%2==0)&&((newdate.getMonth() + 1)<7)&&((newdate.getMonth() + 1)!=2)){
                            var dd = ('30').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                            if(((newdate.getMonth() + 1)%2!=0)&&((newdate.getMonth() + 1)<=7)&&((newdate.getMonth() + 1)!=2)){
                            var dd = ('31').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                            if(((newdate.getMonth() + 1)%2==0)&&((newdate.getMonth() + 1)>=7)){
                            var dd = ('31').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                            if(((newdate.getMonth() + 1)%2!=0)&&((newdate.getMonth() + 1)>7)){
                            var dd = ('30').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                        }
                        var someFormattedDate = dd + '-' + arrmonth[parseInt(mm)]  + '-' + y;
                        var someFormattedDate1 = y + '-' + mm + '-' + dd;
                        document.getElementById('datebuttonuser').value = someFormattedDate.toString();
                        document.getElementById('hiddendatebuttonuser').value = someFormattedDate1.toString();
                        showexpensDetailsofuser();
                        getBillableUsers();

                    }

                    function fordatepichurselect(){
                          var d = new Date();
                        var m = ("0" + (d.getMonth() + 1)).slice(-2); 
                        var dd = ("0" + d.getDate()).slice(-2); 
                        var y = d.getFullYear();
                        var currentdate = y + '-' + m + '-' + dd;
                        var dateforbfirst = new Date($('#hiddendatebutton').val());
                       // dateforbfirst.setDate(dateforbfirst.getDate()+ 15 );

                        var enddatefor = new Date($('#hiddendatebutton').val());
                        enddatefor.setDate(enddatefor.getDate() - 15);

                        if ((new Date(currentdate) >= enddatefor) && (new Date(currentdate) <= dateforbfirst)) {

                            $('#submitbut').addClass('hide');
                            $('#submitbutton').removeClass('hide');
                            $('#explabel').removeClass('hide');
                            $('#typeEx').removeClass('hide');
                        } else if (new Date(currentdate) <= dateforbfirst) {
                            $('#submitbut').addClass('hide');
                            $('#explabel').removeClass('hide');
                            $('#typeEx').removeClass('hide');
                            $('#submitbutton').addClass('hide');  
                        } else {
                            $('#submitbut').addClass('hide');
                            $('#explabel').addClass('hide');
                            $('#typeEx').addClass('hide');
                            $('#submitbutton').addClass('hide');


                        }

                    }

                    function datepicher2() {
                        // toChekRasieExpenseOrNotforNext();
                        var date = $('#datebutton').val();
                        var newdate = new Date(date);

                        if (newdate.getDate() < 16) {
                            var dd = ("0" + 15).slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        } else {
                            if((newdate.getMonth() + 1)==2){
                            var dd = ('28').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                      
                            if(((newdate.getMonth() + 1)%2==0)&&((newdate.getMonth() + 1)<7)&&((newdate.getMonth() + 1)!=2)){
                            var dd = ('30').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                            if(((newdate.getMonth() + 1)%2!=0)&&((newdate.getMonth() + 1)<=7)&&((newdate.getMonth() + 1)!=2)){
                            var dd = ('31').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                            if(((newdate.getMonth() + 1)%2==0)&&((newdate.getMonth() + 1)>=7)){
                            var dd = ('31').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                            if(((newdate.getMonth() + 1)%2!=0)&&((newdate.getMonth() + 1)>7)){
                            var dd = ('30').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }

                          /*  var dd = ("0" + 31).slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();*/
                        }
                        var someFormattedDate = y + '-' + mm + '-' + dd;
                        var someFormattedDate1 = dd + '-' + arrmonth[parseInt(mm)] + '-' + y;
                        document.getElementById('datebutton').value = someFormattedDate1.toString();
                        $('#hiddendatebutton').val(someFormattedDate.toString());
                        fordatepichurselect()
                        selecthotelExpenseforweek();
                    }

                    function getdate() {
                        toChekRasieExpenseOrNotforNext();
                        var tt = $('#hiddendatebutton').val();
                        var date = new Date(tt);
                        var newdate = new Date(date);
                         if ((newdate.getDate() > 15) && (("0" + (newdate.getMonth() + 1)).slice(-2) != 13)) {
                         var dd = ('15').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 2)).slice(-2);
                            var y = newdate.getFullYear();
                        }

                        if ((newdate.getDate() <= 15) && (("0" + (newdate.getMonth() + 1)).slice(-2) != 13)) {
                                 if((newdate.getMonth() + 1)==2){
                            var dd = ('28').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                      
                            if(((newdate.getMonth() + 1)%2==0)&&((newdate.getMonth() + 1)<7)&&((newdate.getMonth() + 1)!=2)){
                            var dd = ('30').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                            if(((newdate.getMonth() + 1)%2!=0)&&((newdate.getMonth() + 1)<=7)&&((newdate.getMonth() + 1)!=2)){
                            var dd = ('31').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                            if(((newdate.getMonth() + 1)%2==0)&&((newdate.getMonth() + 1)>=7)){
                            var dd = ('31').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                            if(((newdate.getMonth() + 1)%2!=0)&&((newdate.getMonth() + 1)>7)){
                            var dd = ('30').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                        }

                        if ((newdate.getDate() <= 16) && (("0" + (newdate.getMonth() + 1)).slice(-2) == 12)) {
                            var dd = ("0" + 15).slice(-2);
                            var mm = ("0" + 1).slice(-2);
                            var y = newdate.getFullYear() + 1;
                        }



                        var someFormattedDate = dd + '-' + arrmonth[parseInt(mm)] + '-' + y;
                        var someFormattedDate1 = y + '-' + mm + '-' + dd;
                        document.getElementById('datebutton').value = someFormattedDate.toString();
                        $('#hiddendatebutton').val(someFormattedDate1.toString());
                        
                        selecthotelExpenseforweek();
                    }

                    function getdateprev() {
                        toChekRasieExpenseOrNotforPrev();
                        var tt = $('#hiddendatebutton').val();

                        var date = new Date(tt);
                        var newdate = new Date(date);
                        if (newdate.getDate() < 16) {
                            if (("0" + (newdate.getMonth())).slice(-2) != 00) {
                                /*var dd = ("0" + 16).slice(-2);
                                var mm = ("0" + (newdate.getMonth())).slice(-2);
                                var y = newdate.getFullYear();*/
                            if((newdate.getMonth())==2){
                            var dd = ('28').slice(-2);
                            var mm = ("0" + (newdate.getMonth())).slice(-2);
                            var y = newdate.getFullYear();
                        }
                      
                            if(((newdate.getMonth())%2==0)&&((newdate.getMonth())<=6)&&((newdate.getMonth())!=2)){
                            var dd = ('30').slice(-2);
                            var mm = ("0" + (newdate.getMonth())).slice(-2);
                            var y = newdate.getFullYear();
                        }
                            if(((newdate.getMonth())%2!=0)&&((newdate.getMonth())<=7)&&((newdate.getMonth())!=2)){
                            var dd = ('31').slice(-2);
                            var mm = ("0" + (newdate.getMonth())).slice(-2);
                            var y = newdate.getFullYear();
                        }
                            if(((newdate.getMonth())%2==0)&&((newdate.getMonth() )>7)&&((newdate.getMonth())!=2)){
                            var dd = ('31').slice(-2);
                            var mm = ("0" + (newdate.getMonth())).slice(-2);
                            var y = newdate.getFullYear();
                        }
                            if(((newdate.getMonth())%2!=0)&&((newdate.getMonth())>7)&&((newdate.getMonth())!=2)){
                            var dd = ('30').slice(-2);
                            var mm = ("0" + (newdate.getMonth())).slice(-2);
                            var y = newdate.getFullYear();
                        }

                            } else {
                                var dd = ("0" + 31).slice(-2);
                                var mm = ("0" + 12).slice(-2);
                                var y = newdate.getFullYear() - 1;

                            }
                        } 

                        if(newdate.getDate() > 16) {
                            var dd = ("0" + 15).slice(-2);
                            var mm = ("0" + (newdate.getMonth()+1)).slice(-2);
                            var y = newdate.getFullYear();
                        }

                        var someFormattedDate = dd + '-' + arrmonth[parseInt(mm)] + '-' + y;
                        var someFormattedDate1 = y + '-' + mm + '-' + dd;
                        document.getElementById('datebutton').value = someFormattedDate.toString();
                        $('#hiddendatebutton').val(someFormattedDate1.toString());
                        
                        selecthotelExpenseforweek();
                    }

                    function getdateuser() {
                        var tt = $('#hiddendatebuttonuser').val();

                        var date = new Date(tt);
                        var newdate = new Date(date);
                       if ((newdate.getDate() > 15) && (("0" + (newdate.getMonth() + 1)).slice(-2) != 13)) {
                         var dd = ('15').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 2)).slice(-2);
                            var y = newdate.getFullYear();
                        }

                        if ((newdate.getDate() <= 15) && (("0" + (newdate.getMonth() + 1)).slice(-2) != 13)) {
                                 if((newdate.getMonth() + 1)==2){
                            var dd = ('28').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                      
                            if(((newdate.getMonth() + 1)%2==0)&&((newdate.getMonth() + 1)<7)&&((newdate.getMonth() + 1)!=2)){
                            var dd = ('30').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                            if(((newdate.getMonth() + 1)%2!=0)&&((newdate.getMonth() + 1)<=7)&&((newdate.getMonth() + 1)!=2)){
                            var dd = ('31').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                            if(((newdate.getMonth() + 1)%2==0)&&((newdate.getMonth() + 1)>=7)){
                            var dd = ('31').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                            if(((newdate.getMonth() + 1)%2!=0)&&((newdate.getMonth() + 1)>7)){
                            var dd = ('30').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                        }

                        if ((newdate.getDate() >15) && (("0" + (newdate.getMonth() + 1)).slice(-2) == 12)) {
                            var dd = ("0" + 15).slice(-2);
                            var mm = ("0" + 1).slice(-2);
                            var y = newdate.getFullYear() + 1;
                        }



                        var someFormattedDate1 = dd + '-' + arrmonth[parseInt(mm)] + '-' + y;
                        var someFormattedDate = y + '-' + mm + '-' + dd;
                        document.getElementById('datebuttonuser').value = someFormattedDate1.toString();
                        $('#hiddendatebuttonuser').val(someFormattedDate.toString());
                        showexpensDetailsofuser();
                        getBillableUsers();
                    }

                    /**for approver*/
                          function datepickerforotherUser() {
                        document.getElementById("datebuttonuser").disabled = false;
                        document.getElementById("datebuttonuser").focus();

                    }
                    /*function for open attachment form*/

                    function showAttechmentmodel(id) {
                        // alert("submit attechment");
                        $('#attachment').trigger("reset");
                        $('#claimeid').val(id);
                        $("#myModal10").modal('show');
                    }
                    /*end*/
                    /*date function in javascript*/
                    function datepicherforUserapp() {

                        var date = $('#datebuttonuserapp').val();
                        var newdate = new Date(date);
                        if (newdate.getDate() < 16) {
                            var dd = ('15');
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        } else {
                               if((newdate.getMonth() + 1)==2){
                            var dd = ('28').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                      
                            if(((newdate.getMonth() + 1)%2==0)&&((newdate.getMonth() + 1)<7)&&((newdate.getMonth() + 1)!=2)){
                            var dd = ('30').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                            if(((newdate.getMonth() + 1)%2!=0)&&((newdate.getMonth() + 1)<=7)&&((newdate.getMonth() + 1)!=2)){
                            var dd = ('31').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                            if(((newdate.getMonth() + 1)%2==0)&&((newdate.getMonth() + 1)>=7)){
                            var dd = ('31').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                            if(((newdate.getMonth() + 1)%2!=0)&&((newdate.getMonth() + 1)>7)){
                            var dd = ('30').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                        }
                        var someFormattedDate = dd + '-' + arrmonth[parseInt(mm)]  + '-' + y;
                        var someFormattedDate1 = y + '-' + mm + '-' + dd;
                        document.getElementById('datebuttonuser').value = someFormattedDate.toString();
                        document.getElementById('hiddendatebuttonuser').value = someFormattedDate1.toString();
                        document.getElementById('datebuttonuserapp').value = someFormattedDate.toString();
                        document.getElementById('hiddendatebuttonuserapp').value = someFormattedDate1.toString();
                        //showexpensDetailsofuser();
                        approverHome();
                        getBillableUsers();

                    }

                        function getdateuserapp() {
                        var tt = $('#hiddendatebuttonuser').val();

                        var date = new Date(tt);
                        var newdate = new Date(date);
                       if ((newdate.getDate() > 15) && (("0" + (newdate.getMonth() + 1)).slice(-2) != 13)) {
                         var dd = ('15').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 2)).slice(-2);
                            var y = newdate.getFullYear();
                        }

                        if ((newdate.getDate() <= 15) && (("0" + (newdate.getMonth() + 1)).slice(-2) != 13)) {
                                 if((newdate.getMonth() + 1)==2){
                            var dd = ('28').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                      
                            if(((newdate.getMonth() + 1)%2==0)&&((newdate.getMonth() + 1)<7)&&((newdate.getMonth() + 1)!=2)){
                            var dd = ('30').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                            if(((newdate.getMonth() + 1)%2!=0)&&((newdate.getMonth() + 1)<=7)&&((newdate.getMonth() + 1)!=2)){
                            var dd = ('31').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                            if(((newdate.getMonth() + 1)%2==0)&&((newdate.getMonth() + 1)>=7)){
                            var dd = ('31').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                            if(((newdate.getMonth() + 1)%2!=0)&&((newdate.getMonth() + 1)>7)){
                            var dd = ('30').slice(-2);
                            var mm = ("0" + (newdate.getMonth() + 1)).slice(-2);
                            var y = newdate.getFullYear();
                        }
                        }

                        if ((newdate.getDate() >15) && (("0" + (newdate.getMonth() + 1)).slice(-2) == 12)) {
                            var dd = ("0" + 15).slice(-2);
                            var mm = ("0" + 1).slice(-2);
                            var y = newdate.getFullYear() + 1;
                        }



                        var someFormattedDate1 = dd + '-' + arrmonth[parseInt(mm)] + '-' + y;
                        var someFormattedDate = y + '-' + mm + '-' + dd;
                        document.getElementById('datebuttonuser').value = someFormattedDate1.toString();
                        $('#hiddendatebuttonuser').val(someFormattedDate.toString());
                          document.getElementById('datebuttonuserapp').value = someFormattedDate1.toString();
                        $('#hiddendatebuttonuserapp').val(someFormattedDate.toString());
                       // showexpensDetailsofuser();
                       approverHome();
                        getBillableUsers();
                    }

                      function getdateprevuserapp() {
                        var tt = $('#hiddendatebuttonuserapp').val();

                        var date = new Date(tt);
                        var newdate = new Date(date);
                        if (newdate.getDate() < 16) {
                            if (("0" + (newdate.getMonth())).slice(-2) != 00) {
                                /*var dd = ("0" + 16).slice(-2);
                                var mm = ("0" + (newdate.getMonth())).slice(-2);
                                var y = newdate.getFullYear();*/
                            if((newdate.getMonth())==2){
                            var dd = ('28').slice(-2);
                            var mm = ("0" + (newdate.getMonth())).slice(-2);
                            var y = newdate.getFullYear();
                        }
                      
                            if(((newdate.getMonth())%2==0)&&((newdate.getMonth())<=6)&&((newdate.getMonth())!=2)){
                            var dd = ('30').slice(-2);
                            var mm = ("0" + (newdate.getMonth())).slice(-2);
                            var y = newdate.getFullYear();
                        }
                            if(((newdate.getMonth())%2!=0)&&((newdate.getMonth())<=7)&&((newdate.getMonth())!=2)){
                            var dd = ('31').slice(-2);
                            var mm = ("0" + (newdate.getMonth())).slice(-2);
                            var y = newdate.getFullYear();
                        }
                            if(((newdate.getMonth())%2==0)&&((newdate.getMonth() )>7)&&((newdate.getMonth())!=2)){
                            var dd = ('31').slice(-2);
                            var mm = ("0" + (newdate.getMonth())).slice(-2);
                            var y = newdate.getFullYear();
                        }
                            if(((newdate.getMonth())%2!=0)&&((newdate.getMonth())>7)&&((newdate.getMonth())!=2)){
                            var dd = ('30').slice(-2);
                            var mm = ("0" + (newdate.getMonth())).slice(-2);
                            var y = newdate.getFullYear();
                        }

                            } else {
                                var dd = ("0" + 31).slice(-2);
                                var mm = ("0" + 12).slice(-2);
                                var y = newdate.getFullYear() - 1;

                            }
                        } 

                        if(newdate.getDate() > 16) {
                            var dd = ("0" + 15).slice(-2);
                            var mm = ("0" + (newdate.getMonth()+1)).slice(-2);
                            var y = newdate.getFullYear();
                        }

                        var someFormattedDate1 = dd + '-' + arrmonth[parseInt(mm)] + '-' + y;
                        var someFormattedDate = y + '-' + mm + '-' + dd;
                        document.getElementById('datebuttonuser').value = someFormattedDate1.toString();
                        $('#hiddendatebuttonuser').val(someFormattedDate.toString());
                         document.getElementById('datebuttonuserapp').value = someFormattedDate1.toString();
                        $('#hiddendatebuttonuserapp').val(someFormattedDate.toString());
                        //showexpensDetailsofuser();
                        approverHome();
                        getBillableUsers();
                    }
                    /***end of approver**/

                    function getdateprevuser() {
                        var tt = $('#hiddendatebuttonuser').val();

                        var date = new Date(tt);
                        var newdate = new Date(date);
                        if (newdate.getDate() < 16) {
                            if (("0" + (newdate.getMonth())).slice(-2) != 00) {
                                /*var dd = ("0" + 16).slice(-2);
                                var mm = ("0" + (newdate.getMonth())).slice(-2);
                                var y = newdate.getFullYear();*/
                            if((newdate.getMonth())==2){
                            var dd = ('28').slice(-2);
                            var mm = ("0" + (newdate.getMonth())).slice(-2);
                            var y = newdate.getFullYear();
                        }
                      
                            if(((newdate.getMonth())%2==0)&&((newdate.getMonth())<=6)&&((newdate.getMonth())!=2)){
                            var dd = ('30').slice(-2);
                            var mm = ("0" + (newdate.getMonth())).slice(-2);
                            var y = newdate.getFullYear();
                        }
                            if(((newdate.getMonth())%2!=0)&&((newdate.getMonth())<=7)&&((newdate.getMonth())!=2)){
                            var dd = ('31').slice(-2);
                            var mm = ("0" + (newdate.getMonth())).slice(-2);
                            var y = newdate.getFullYear();
                        }
                            if(((newdate.getMonth())%2==0)&&((newdate.getMonth() )>7)&&((newdate.getMonth())!=2)){
                            var dd = ('31').slice(-2);
                            var mm = ("0" + (newdate.getMonth())).slice(-2);
                            var y = newdate.getFullYear();
                        }
                            if(((newdate.getMonth())%2!=0)&&((newdate.getMonth())>7)&&((newdate.getMonth())!=2)){
                            var dd = ('30').slice(-2);
                            var mm = ("0" + (newdate.getMonth())).slice(-2);
                            var y = newdate.getFullYear();
                        }

                            } else {
                                var dd = ("0" + 31).slice(-2);
                                var mm = ("0" + 12).slice(-2);
                                var y = newdate.getFullYear() - 1;

                            }
                        } 

                        if(newdate.getDate() > 16) {
                            var dd = ("0" + 15).slice(-2);
                            var mm = ("0" + (newdate.getMonth()+1)).slice(-2);
                            var y = newdate.getFullYear();
                        }

                        var someFormattedDate1 = dd + '-' + arrmonth[parseInt(mm)] + '-' + y;
                        var someFormattedDate = y + '-' + mm + '-' + dd;
                        document.getElementById('datebuttonuser').value = someFormattedDate1.toString();
                        $('#hiddendatebuttonuser').val(someFormattedDate.toString());
                        showexpensDetailsofuser();
                        getBillableUsers();
                    }
                    /*end*/
                    /*function for show expense form according expense type*/

                    function showexpensDetails() {
                        $('.inrs').addClass('hide');
                        var expenseType = $('#typeEx').val();
                        if (expenseType == 1) {
                            $('#hotel').trigger("reset");
                            $("#myModal1").modal('show');
                            $("#hfornightDate").val($("#hiddendatebutton").val());
                            $("#exthotel").val(0);
                            $("#flaghotel").val(0);
                            $("#typeEx").val(0);
                        }
                        if (expenseType == 2) {
                            $('#travelf').trigger("reset");
                            $("#myModal2").modal('show');
                            $("#tfornightDate").val($("#hiddendatebutton").val());
                            $("#exttravel").val(0);
                            $("#flagtravel").val(0);
                            $("#typeEx").val(0);
                        }
                        if (expenseType == 4) {
                            $('#phonef').trigger("reset");
                            $("#myModal3").modal('show');
                            $("#phfornightDate").val($("#hiddendatebutton").val());
                            $("#extphone").val(0);
                            $("#exthotel").val(0)
                             $("#flagphone").val(0);;
                            $("#typeEx").val(0);
                        }
                        if (expenseType == 5) {
                            $('#rsdf').trigger("reset");
                            $("#myModal4").modal('show');
                            $("#rsfornightDate").val($("#hiddendatebutton").val());
                            $("#extrsd").val(0);
                            $("#flagrsd").val(0);
                            $("#typeEx").val(0);
                        }
                        if (expenseType == 3) {
                            $('#foodf').trigger("reset");
                            $("#myModal6").modal('show');
                            $("#ffornightDate").val($("#hiddendatebutton").val());
                            $("#extfood").val(0);
                            $("#flagfood").val(0);
                            $("#typeEx").val(0);
                        }
                        if (expenseType == 6) {
                            $('#deamf').trigger("reset");
                            $("#myModal5").modal('show');
                            $("#defornightDate").val($("#hiddendatebutton").val());
                            $("#extperdiem").val(0);
                             $("#flagperdiem").val(0);
                        }
                        if (expenseType > 6) {
                            $('#otherf').trigger("reset");
                            $('#otherlavel').html('');
                              
                            $("#myModal7").modal('show');
                            $('#otherlavel').append($("#typeEx option:selected").text());
                            $('#anyotherex').val($('#typeEx').val());
                            $("#ofornightDate").val($("#hiddendatebutton").val());
                            $("#typeEx").val(0);
                            $("#flagother").val(0);
                        }
                    }

                    /*end*/
                    /*fuction to caculate total hotel expense*/

                    function totalhotalExpence() {
                        var a = $('#hrate').val();
                        var b = $('#htotalday').val();
                        $('#htex').val(a * b);
                    }

                    /*end*/
                    /*fuction to caculate total travel expense*/

                    function totaltravelExpense() {
                        var c = $('#travelrate').val();
                        var d = $('#traveltday').val();
                        $("#travelex").val(c * d);
                    }

                    /*end*/
                    /*fuction to caculate total per diem expense*/

                    function totalperDiemExpense() {
                        var e = $('#diemrate1').val();
                        var f = $('#diemday1').val();
                        $("#diemtotal1").val(e * f);
                    }

                    /*end*/
                    /*fuction to caculate total rfd expense*/

                    function totalrfdExpense() {
                        var g = $('#rfdper').val();
                        var h = $('#rfdtotalkm').val();
                        $("#rfdext").val(g * h);
                    }

                    /* function for delete expense */
                    function DeleteExpense(typeid, id, expclid) {
                        var typeId = typeid;
                        var Id = id;
                        var expclid = expclid;
                        var a = confirm("Are you sure to Delete your Expense?");
                        if (a == true) {
                            DeleteExpense1(typeId, Id, expclid);
                        }
                    }

                    function DeleteExpense1(typeid, id, expclid) {

                        var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/deleteExpense';
                        $.ajax({
                            url: url1,
                            method: 'POST',
                            data: {
                                id: id,
                                typeid: typeid,
                                expclid: expclid
                            },
                            success: function(data) {
                                selecthotelExpenseforweek();
                            },
                            dataType: 'JSON',
                        });

                    }
                    /**/
                    function selecthotelExpenseforweek() {

                        date = $('#hiddendatebutton').val();
                        //actualDateforflag2();

                        var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/ShowExpenseWeekBy';
                        $.ajax({
                            url: url1,
                            method: 'POST',
                            'async':false,
                            data: {
                                date: date,
                                
                            },
                            dataType: 'json',
                            success: function(users1) {
                                //alert(users1);
                                 $('#rasebutton').addClass('hide');
                                var users = users1[0];
                                var ref = $('#data_table').DataTable();
                                $("#searchbox").keyup(function() {
                                    $("#data_table").dataTable().fnFilter(this.value);
                                });

                                var log = '';
                                log = "<thead><tr style='font-size:12px' >" + "<th>Expense Type</th>" + "<th>Trip/Assignment</th>" + "<th>From Date</th>" + "<th>To Date</th>" + "<th>Total Amount</th><th >Action</th><th>Status</th></tr></thead><tbody id='tablebody2' >";
                                for (var i = 0; i < users.length; i++) {
                                    if (users[i].flag != 1) {
                                        log = log + "<tr style='height:20px;color:grey;font-size:12px;'  id=" + users[i].id + "><input type='hidden' value='" + users[i].description + "' id='l" + users[i].description + "'>" + "<td >" + users[i].description + "</td>" + "<td >" + users[i].tripAssignment + "</td>" + "<td >" + users[i].fromdate + "</td>" + "<td >" + users[i].toDate + "</td><td>" + users[i].totalExpense + "</td><td >";
                                        if (((users[i].ClaimedStatus > 0) || (users[i].ClaimedStatus == 0) || (users[i].ClaimedStatus == 101)) && ((users[i].Submitted == 0) || (users[i].flag == 2))) {
                                           actualDate();
                                          actualDateforflag2();
                                            log = log + "<a  style='padding-left:6px' ></a><input type='hidden' value=" + users[i].id + " id='a" + users[i].id + "'><span id='a1'  class='glyphicon glyphicon-trash' style='color:red;height:10px' onclick='DeleteExpense(" + users[i].expenseType + ',' + users[i].expId + ',' + users[i].expenseclaimId + ");' data-target='#myModal1' title ='Delete Expense' ></span><a style='padding-left:6px' ></a><input type='hidden' value=" + users[i].id + " id='a" + users[i].id + "'><span id='a2'  class='glyphicon glyphicon-pencil' style='color:red;height:10px' onclick='selecthotelExpense(" + users[i].expenseType + ',' + users[i].expId + ',' + users[i].expenseclaimId + ");' title ='Edit Expense' ></span><a style='padding-left:6px' ></a><input type='hidden' value=" + users[i].id + " id='a" + users[i].id + "'><span id='a3'  class='glyphicon glyphicon-file' style='color:red;height:10px'  onclick='showAttechmentmodel(" + users[i].id + ");' title ='Attach Bill' ></span><a style='padding-left:6px' ></a><input type='hidden' value=" + users[i].id + " id='a" + users[i].id + "'><span id='a5' class='glyphicon glyphicon-copy' style='color:red;height:10px' onclick='selecthotelExpenseforCopy(" + users[i].expenseType + ',' + users[i].expId + ',' + users[i].expenseclaimId + ");' title ='Copy Expense' ></span><input type='hidden' value=" + users[i].expenseclaimId + " name='claimidforuser' id='ipn'>";
                                            if (users[i].anyFile != undefined) {
                                                log = log + "<a href='/attach/" + users[i].anyFile + "'Download style='padding-left:6px' ><input type='hidden' value=" + +" id='a" + users[i].userId + "'> <span '  data-toggle='modal' data-target='#myModal'  class='glyphicon glyphicon-download-alt' style='color:red;height:10px'   title ='download Bill' ></span></a>";
                                            }
                                            log = log + "</td>";
                                        }
                                        if (users[i].anyFile != undefined) {
                                            log = log + "<a href='/attach/" + users[i].anyFile + "'Download style='padding-left:6px' ><input type='hidden' value=" + +" id='a" + users[i].userId + "'> <span '  data-toggle='modal' data-target='#myModal'  class='glyphicon glyphicon-download-alt' style='color:red;height:10px'   title ='download Bill' ></span></a>";
                                        }
                                        if (users[i].Submitted == 1) {
                                            log = log + "<a  style='padding-left:6px' ><input type='hidden' value=" + +" id='a" + users[i].userId + "'> <span '  data-toggle='modal' data-target='#myModal'  class='glyphicon glyphicon-comment' style='color:#23527c;height:15px' onclick='showCommentandRemark(" + users[i].expenseclaimId + ")'   title ='Comment' ></span></a><input type='hidden' value=" + users[i].expenseclaimId + " name='claimidforuser' id='ipn'>";
                                        }
                                        if ((users[i].ClaimedStatus == 0) && (users[i].Submitted == 1)) {
                                           
                                        }
                                        log = log + "</td><td>";
                                        if ((users[i].ClaimedStatus == 0) && (users[i].Submitted == 1) && (users[i].flag != 2)) {
                                            hidesubmitshowedit();
                                        }
                                        if ((users[i].ClaimedStatus == 0) && (users[i].Submitted == 1) && (users[i].f1 != 0)) {
                                            log = log + "<input type='hidden' id='resubmitExpenseid' value='" + users[i].expenseclaimId + "'>Pending on Mr. <i style='color:#23527c'>" + users1[2][0].firstName + "</i></td>";

                                            $('#resubmitExpenseid').val(users[i].expenseclaimId);
                                        }
                                        if ((users[i].ClaimedStatus == 111) && (users[i].Submitted == 1)) {
                                            log = log + "Approved by supervisor</td>";
                                        }
                                        if ((users[i].ClaimedStatus < 100) && (users[i].ClaimedStatus > 0) && (users[i].Submitted == 1) && (users[i].f1 != 0)) {
                                            showtotalExpense1();

                                            log = log + "Pending on Mr. <i style='color:#23527c'> " + users1[2][0].firstName + "</i><span class='numberCircle' style='padding-left:6px;padding-right:6px;height:15px;width:10px; border: 2px solid;border-radius: 100%;color:green;font-size:10px;' title='Level " + users[i].ClaimedStatus + "  Approved By Mr. " + users1[3][0].firstName + "'>" + users[i].ClaimedStatus + "</span></td>";
                                        }
                                        if ((users[i].ClaimedStatus == 100) && (users[i].Submitted == 1) && (users[i].f1 != 0)) {
                                            showtotalExpense1();
                                            printOption();
                                            log = log + "Approved by finance<span class='glyphicon glyphicon-ok' style='padding-left:20px;height:20px;color:green;font-size:10px;' title='Final Approved'></span><input type='hidden' id='expjs' value="+users[i].expenseclaimId+"></td>";
                                        }
                                        if (((users[i].ClaimedStatus == 10) || (users[i].ClaimedStatus == 101))) {
                                           showtotalExpense();
                                            log = log + "Rejected By Mr. <i style='color:#23527c'> " + users1[4][0].firstName + "</i></td>";
                                        }
                                        if (((users[i].ClaimedStatus == 0) || (users[i].ClaimedStatus != 0)) && ((users[i].Submitted == 0) || (users[i].f1 == 0))) {
                                            log = log + "Draft</td>";
                                        }


                                        log = log + "</tr>";
                                    }
                                }
                                log = log + "</tbody>";


                                $("#data_table").dataTable().fnDestroy();
                                $("#data_table").html('');

                                $("#data_table").html(log);
                                $("#data_table").dataTable({
                                    "bLengthChange": true,
                                    "paging": true,
                                    "binfo": false,
                                    "bDestroy": true,

                                    "aoColumnDefs": [{
                                        "bSortable": false,
                                        "aTargets": [-1]
                                    }],
                                    "autoWidth": false,
                                    "columns": [{
                                        "width": "10%"
                                    }, {
                                        "width": "10%"
                                    }, {
                                        "width": "10%"
                                    }, {
                                        "width": "10%"
                                    }, {
                                        "width": "10%"
                                    }, {
                                        "width": "10%"
                                    }, {
                                        "width": "10%"
                                    }]
                                });

                                $("#searchbox").keyup(function() {
                                    $("#data_table").dataTable().fnFilter(this.value);
                                });

                            }


                        });

                    }
                    /**/
                    /*end DeleteExpense function*/
                    /*function for select the expense data by id for copy expense */


                    function selecthotelExpenseforCopy(typeid, id, expensecid) {
                        var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/selectExpense';
                        $.ajax({
                            url: url1,
                            method: 'POST',
                            data: {
                                id: id,
                                typeid: typeid,
                                expensecid: expensecid
                            },

                            success: function(data) {
                                da = data[1][0];
                                data = data[0][0];
                                if (typeid == 1) {
                                    $("#hfornightDate").val($("#hiddendatebutton").val());
                                    $('#blabelhotel').val(da.minimumBillableMandetory);
                                    $('#Maxhotel').val(da.maximumBillableMandetory);
                                    $('#trip1').val(data.tripassignment);
                                    $('#from').val(data.fromdate);
                                    $('#to').val(data.toDate);
                                    $('#hotelname').val(data.hotelName);
                                    $('#hreason').val(data.reason);
                                    $('#hrate').val(data.ratePerDay);
                                    $('#hifno').val(data.ifNotThenOther);
                                    $('#htotalday').val(data.totalDay);
                                    $('#hotelcu').val(data.currencyId);
                                    $('#htex').val(data.totalExpense);
                                    $("#flaghotel").val(0);
                                    showexpensDetailsforedit(typeid);
                                }
                                if (typeid == 2) {
                                    $("#tfornightDate").val($("#hiddendatebutton").val());
                                    $('#blabelTravel').val(da.minimumBillableMandetory);
                                    $('#MaxTravel').val(da.maximumBillableMandetory);
                                    $('#traveltrip').val(data.tripassignment);
                                    $('#fromdatefortravel').val(data.fromdate);
                                    $('#tofortravel').val(data.toDate);
                                    $('#traveltype').val(data.travelType);
                                    $('#travelre').val(data.reason);
                                    $('#travelrate').val(data.ratePerDay);
                                    $('#travelif').val(data.ifNotThenOther);
                                    $('#traveltday').val(data.totalDay);
                                    $('#travelc').val(data.currencyId);
                                    $('#travelex').val(data.totalExpense);
                                    $("#flagtravel").val(0);
                                    showexpensDetailsforedit(typeid);
                                }
                                if (typeid == 3) {
                                    $("#ffornightDate").val($("#hiddendatebutton").val());
                                    $('#blabelfood').val(da.minimumBillableMandetory);
                                    $('#Maxfood').val(da.maximumBillableMandetory);
                                    $('#foodtrip').val(data.tripassignment);
                                    $('#fromfood').val(data.fromdate);
                                    $('#tofood').val(data.toDate);
                                    $('#foodre').val(data.reason);
                                    $('#foodcu1').val(data.currencyId);
                                    $('#foodex1').val(data.totalExpense);
                                    $("#flagfood").val(0);
                                    showexpensDetailsforedit(typeid);
                                }
                                if (typeid > 6) {
                                    $("#ofornightDate").val($("#hiddendatebutton").val());
                                    $('#otherlavel').html('');
                                    $('#otherlavel').append(da.description);
                                    $('#blabelother').val(da.minimumBillableMandetory);
                                    $('#Maxother').val(da.maximumBillableMandetory);
                                    $('#othertrip').val(data.tripAssignment);
                                    $('#fromother').val(data.fromdate);
                                    $('#otherToDate').val(data.toDate);
                                    $('#otherreason').val(data.reason);
                                    $('#othercu1').val(data.currencyId);
                                    $('#otherex1').val(data.totalExpense);
                                    $('#anyotherex').val(typeid);
                                    $("#flagother").val(0);
                                    showexpensDetailsforedit(typeid);
                                }
                                if (typeid == 4) {
                                    $("#phfornightDate").val($("#hiddendatebutton").val());
                                    $('#blabelPhone').val(da.minimumBillableMandetory);
                                    $('#MaxPhone').val(da.maximumBillableMandetory);
                                    $('#phonetrip').val(data.tripassignment);
                                    $('#fromdateforphone').val(data.fromdate);
                                    $('#todateforphone').val(data.toDate);
                                    $('#callingreason').val(data.reason);
                                    $('#callingc').val(data.currencyId);
                                    $('#callingex').val(data.totalExpense);
                                    $("#flagphone").val(0);
                                    showexpensDetailsforedit(typeid);
                                }
                                if (typeid == 5) {
                                    $("#rsfornightDate").val($("#hiddendatebutton").val());
                                    $('#blabelrsd').val(da.minimumBillableMandetory);
                                    $('#Maxrsd').val(da.maximumBillableMandetory);
                                    $('#rsdtrip').val(data.tripassignment);
                                    $('#fromdateforrfd').val(data.fromdate);
                                    $('#todateforrfd').val(data.toDate);
                                    $('#rfdtypeof').val(data.typeOfVehicle);
                                    $('#rfdreason').val(data.reason);
                                    $('#rfdper').val(data.perkmRate);
                                    $('#rfdifnot').val(data.ifNotThenOther);
                                    $('#rfdtotalkm').val(data.totalkmTravel);
                                    $('#rfdcu').val(data.currencyId);
                                    $('#rfdext').val(data.totalExpense);
                                    $('#rateval').val(data.designationId);
                                    $("#flagrsd").val(0);
                                    showexpensDetailsforedit(typeid);
                                }

                                if (typeid == 6) {
                                    $("#defornightDate").val($("#hiddendatebutton").val());
                                    $('#blabeldiem').val(da.minimumBillableMandetory);
                                    $('#Maxdiem').val(da.maximumBillableMandetory);
                                    $('#pertrip').val(data.tripassignment);
                                    $('#fromdateperdiem').val(data.fromdate);
                                    $('#todateperdiem').val(data.toDate);
                                    $('#diemhotelname').val(data.hotalName);
                                    $('#diemreasonstay').val(data.reason);
                                    $('#diemrate1').val(data.perDiemRate);
                                    $('#diemif1').val(data.ifNotThenOther);
                                    $('#diemday1').val(data.totalDays);
                                    $('#diemcu').val(data.currencyId);
                                    $('#diemtotal1').val(data.totalExpense);
                                    $("#flagperdiem").val(0);
                                    showexpensDetailsforedit(typeid);
                                }
                            },
                            dataType: 'JSON',
                        });
                    }

                    /*end selecthotelExpenseforCopy function*/
                    /* function for Select The Expense Data for Edit the Expense Details*/

                    function selecthotelExpense(typeid, id, expensecid) {

                        var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/selectExpense';
                        $.ajax({
                            url: url1,
                            method: 'POST',
                            data: {
                                id: id,
                                typeid: typeid,
                                expensecid: expensecid
                            },
                            success: function(data) {
                                da = data[1][0];
                                data = data[0][0];
                                if (typeid == 1) {
                                    $('#blabelhotel').val(da.minimumBillableMandetory);
                                    $('#Maxhotel').val(da.maximumBillableMandetory);
                                    $('#trip1').val(data.tripassignment);
                                    $('#from').val(data.fromdate);
                                    $('#to').val(data.toDate);
                                    $('#hotelname').val(data.hotelName);
                                    $('#hreason').val(data.reason);
                                    $('#hrate').val(data.ratePerDay);
                                    $('#hifno').val(data.ifNotThenOther);
                                    $('#htotalday').val(data.totalDay);
                                    $('#hotelcu').val(data.currencyId);
                                    $('#htex').val(data.totalExpense);
                                    $("#exthotel").val(data.expId);
                                    $('#extclaimhotel').val(data.expenseclaimId);
                                    $("#flaghotel").val(1);
                                    showexpensDetailsforedit(typeid);
                                }
                                if (typeid == 2) {
                                    $('#blabelTravel').val(da.minimumBillableMandetory);
                                    $('#MaxTravel').val(da.maximumBillableMandetory);
                                    $('#traveltrip').val(data.tripassignment);
                                    $('#fromdatefortravel').val(data.fromdate);
                                    $('#tofortravel').val(data.toDate);
                                    $('#traveltype').val(data.travelType);
                                    $('#travelre').val(data.reason);
                                    $('#travelrate').val(data.ratePerDay);
                                    $('#travelif').val(data.ifNotThenOther);
                                    $('#traveltday').val(data.totalDay);
                                    $('#travelc').val(data.currencyId);
                                    $('#travelex').val(data.totalExpense);
                                    $("#exttravel").val(data.expId);
                                    $('#extclaimtravel').val(data.expenseclaimId);
                                    $("#flagtravel").val(1);
                                    showexpensDetailsforedit(typeid);
                                }
                                if (typeid == 3) {
                                    $('#blabelfood').val(da.minimumBillableMandetory);
                                    $('#Maxfood').val(da.maximumBillableMandetory);
                                    $('#foodtrip').val(data.tripassignment);
                                    $('#fromfood').val(data.fromdate);
                                    $('#tofood').val(data.toDate);
                                    $('#foodre').val(data.reason);
                                    $('#foodcu1').val(data.currencyId);
                                    $('#foodex1').val(data.totalExpense);
                                    $("#extfood").val(data.expId);
                                    $('#extclaimfood').val(data.expenseclaimId);
                                    $("#flagfood").val(1);
                                    showexpensDetailsforedit(typeid);
                                }
                                if (typeid > 6) {
                                    $('#otherlavel').html('');
                                    $('#otherlavel').append(da.description);
                                    $('#blabelother').val(da.minimumBillableMandetory);
                                    $('#Maxother').val(da.maximumBillableMandetory);
                                    $('#othertrip').val(data.tripAssignment);
                                    $('#fromother').val(data.fromdate);
                                    $('#otherToDate').val(data.toDate);
                                    $('#otherreason').val(data.reason);
                                    $('#othercu1').val(data.currencyId);
                                    $('#otherex1').val(data.totalExpense);
                                    $("#extother").val(data.expId);
                                    $('#extclaimother').val(data.expenseclaimId);
                                    $('#anyotherex').val(typeid);
                                    $("#flagother").val(1);
                                    showexpensDetailsforedit(typeid);
                                }
                                if (typeid == 4) {
                                    $('#blabelPhone').val(da.minimumBillableMandetory);
                                    $('#MaxPhone').val(da.maximumBillableMandetory);
                                    $('#phonetrip').val(data.tripassignment);
                                    $('#fromdateforphone').val(data.fromdate);
                                    $('#todateforphone').val(data.toDate);
                                    $('#callingreason').val(data.reason);
                                    $('#callingc').val(data.currencyId);
                                    $('#callingex').val(data.totalExpense);
                                    $("#extphone").val(data.expId);
                                    $('#extclaimphone').val(data.expenseclaimId);
                                    $("#flagphone").val(1);
                                    showexpensDetailsforedit(typeid);
                                }
                                if (typeid == 5) {
                                    $('#blabelrsd').val(da.minimumBillableMandetory);
                                    $('#Maxrsd').val(da.maximumBillableMandetory);
                                    $('#rsdtrip').val(data.tripassignment);
                                    $('#fromdateforrfd').val(data.fromdate);
                                    $('#todateforrfd').val(data.toDate);
                                    $('#rfdtypeof').val(data.typeOfVehicle);
                                    $('#rfdreason').val(data.reason);
                                    $('#rfdper').val(data.perkmRate);
                                    $('#rfdifnot').val(data.ifNotThenOther);
                                    $('#rfdtotalkm').val(data.totalkmTravel);
                                    $('#rfdcu').val(data.currencyId);
                                    $('#rfdext').val(data.totalExpense);
                                    $("#extrsd").val(data.expId);
                                    $('#rateval').val(data.designationId);
                                    $('#extclaimrsd').val(data.expenseclaimId);
                                    $("#flagrsd").val(1);
                                    showexpensDetailsforedit(typeid);
                                }

                                if (typeid == 6) {
                                    $('#blabeldiem').val(da.minimumBillableMandetory);
                                    $('#Maxdiem').val(da.maximumBillableMandetory);
                                    $('#pertrip').val(data.tripassignment);
                                    $('#fromdateperdiem').val(data.fromdate);
                                    $('#todateperdiem').val(data.toDate);
                                    $('#diemhotelname').val(data.hotalName);
                                    $('#diemreasonstay').val(data.reason);
                                    $('#diemrate1').val(data.perDiemRate);
                                    $('#diemif1').val(data.ifNotThenOther);
                                    $('#diemday1').val(data.totalDays);
                                    $('#diemcu').val(data.currencyId);
                                    $('#diemtotal1').val(data.totalExpense);
                                    $("#extperdiem").val(data.expId);
                                    $('#extclaimperdiem').val(data.expenseclaimId);
                                    $("#flagperdiem").val(1);
                                    showexpensDetailsforedit(typeid);
                                }
                            },
                            dataType: 'JSON',
                        });
                    }

                    function hidetheButton(hidebuttonid) {

                        $('#a'.concat(hidebuttonid)).addClass('hide');
                        $('#b'.concat(hidebuttonid)).addClass('hide');

                    }

                    function newExpense() {

                        if (<%=Ex%> == 0) {
                            $(".otherexp-img").removeClass("active");
                            $(".exphome-img").removeClass("active");
                            $(".raiseexp-img").addClass("active");
                            $("#rasebutton").addClass('hide');
                            //$('#dateTablebutton').addClass('hide');
                            // submitbuttonDisable();

                            $('#submitbutton').removeClass('hide');
                        } else {

                        }
                    }



                    function otherExpense() {
                        //showexpensDetailsofuser();
                         $('#aprovediv').addClass('hide');
                          $('#aprovedivapp').removeClass('hide');

                        setTimeout(function(){  approverHome(); }, 100);
                       

                        $(".otherexp-img").addClass("active");
                        $(".exphome-img").removeClass("active");
                        $(".raiseexp-img").removeClass("active");
                        $('#accordionsdata').addClass('hide');
                        $('#totalandaddEX1').removeClass('hide');
                        $('#submitbutton').addClass('hide');
                       
                        $('#submitdiv').addClass('hide');
                        $('#datetablediv').removeClass('hide');
                        $('#accordions').addClass('hide');

                    }

                    function showtotalExpense() {
                        $('#totalandaddEX').removeClass('hide');
                        $('#explabel').removeClass('hide');
                        $('#typeEx').removeClass('hide');
                        $('#submitbutton').removeClass('hide');
                        $('#totalandaddEX1').addClass('hide');
                        $('#submitbut').addClass('hide');
                        

                    }

                    function actualDateforflag2() {
                     var d = new Date(); 
                     var fir=new Date($('#hiddendatebutton').val());
                     var dateforblast=fir;
                      var first = new Date($('#hiddendatebutton').val());
                        first.setDate(first.getDate() - 15);
                      
                        if((d>=first)){ //&&(d<=dateforblast)
                           showtotalExpense();
                          // $('#submitbutton').addClass('hide');
                        }
                    }
                    
                    function actualDate() {
                     var d = new Date(); 
                     var fir=new Date($('#hiddendatebutton').val());
                     var dateforblast=fir;
                      var first = new Date($('#hiddendatebutton').val());
                        first.setDate(first.getDate() - 15); 
                        if((d>=first)&&(d<=dateforblast)){
                           showtotalExpense();
                        }
                    }

                    function showtotalExpense1() {
                         $('#rasebutton').addClass('hide');
                        $('#explabel').addClass('hide');
                        $('#typeEx').addClass('hide');
                        $('#submitbutton').addClass('hide');
                        $('#totalandaddEX1').addClass('hide');

                    }

                    function showstatus() {
                        <%if(!expenseDetails.length){%>

                        $('#statusbutton').html('');
                        <%}else{
      
                       if(expenseDetails[0].ClaimedStatus==''){%>
                        $('#statusbutton').html('');
                        <% }%>
                        <%if(expenseDetails[0].ClaimedStatus==1){%>
                        $('#statusbutton').html('');
                        $('#statusbutton').html('Approved by Supervisor');
                        <% }%>
                        <% if(expenseDetails[0].ClaimedStatus==2){%>
                        $('#statusbutton').html('');
                        $('#statusbutton').html('Approved by Manager');
                        <%}%>
                        <% if(expenseDetails[0].ClaimedStatus==3){%>
                        $('#statusbutton').html('');
                        $('#statusbutton').html('Approved by finance');

                        <%}}%>
                    }

                    function expensedescription(expclaimId) {
                        $('#myModalexp').modal('show');
                        var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/ShowExpenseByapprover';
                        $.ajax({
                            url: url1,
                            method: 'POST',
                            data: {
                                expclaimId: expclaimId,

                            },
                            dataType: 'json',
                            success: function(users1) {
                                var users = users1[0];
                                var user = users1[1][0].sum;
                                $('#totalExpenseforuser').val(user);
                                if (users.length == 0) {
                                    $("tbody").empty();
                                    $('tbody').append('<tr class="odd"><td valign="top" colspan="6" class="dataTables_empty">No data available in table</td></tr>');
                                }
                                if (users.length > 0) {
                                    log = '';
                                    console.log('bshdhggdvhewdvhgjogi', users1[0].length);
                                    var log = "<thead><tr style='font-size:10px' >" + "<th>Expense Type</th>" + "<th>Trip/Assignment</th>" + "<th>From Date</th>" + "<th>To Date</th>" + "<th>Total Amount</th><th>Action</th></tr></thead><tbody id='tablebody' >";
                                    for (var i = 0; i < users.length; i++) {
                                        log = log + "<tr style='height:10px;color:grey;font-size:10px;'  id='" + users[i].id + "><input type='hidden' value='" + users[i].description + "' id='l" + users[i].description + "'>" + "<td >" + users[i].description + "</td>" + "<td >" + users[i].WBSName + "</td>" + "<td >" + users[i].fromdate + "</td>" + "<td >" + users[i].toDate + "</td><td>" + users[i].totalExpense + "</td><td >";
                                        if (users[i].anyFile != undefined) {
                                            log = log + "<a href='/attach/" + users[i].anyFile + "'Download style='padding-left:6px' ><input type='hidden' value=" + +" id='a" + users[i].userId + "'> <span '  data-toggle='modal' data-target='#myModal'  class='glyphicon glyphicon-download-alt' style='color:red;height:10px'   title ='download Bill' ></span></a></td>";
                                        }

                                        log = log + "</tr>";
                                    }
                                    log = log + "</tbody>";


                                    $("#bugtable1").dataTable().fnDestroy();
                                    $("#bugtable1").html('');

                                    $("#bugtable1").html(log);
                                    $("#bugtable1").dataTable({
                                        "bLengthChange": true,
                                        "paging": true,
                                        "binfo": false,
                                        "bDestroy": true,

                                        "aoColumnDefs": [{
                                            "bSortable": false,
                                            "aTargets": [-1]
                                        }],
                                        "autoWidth": false,
                                        "columns": [{
                                            "width": "10%"
                                        }, {
                                            "width": "10%"
                                        }, {
                                            "width": "10%"
                                        }, {
                                            "width": "10%"
                                        }, {
                                            "width": "10%"
                                        }, {
                                            "width": "10%"
                                        }]
                                    });
                                    $("#searchbox11").keyup(function() {
                                        $("#bugtable1").dataTable().fnFilter(this.value);
                                    });

                                }

                            }
                        });

                    }



                    function showexpensDetailsofuser() {

                        claimid = "";
                       $('#aprovediv').removeClass('hide');
                          $('#aprovedivapp').addClass('hide');
                        $('#datetablediv').removeClass('hide');
                        $('#accordions').removeClass('hide');
                        $('#accordionsdata').addClass('hide');
                        $('#totalandaddEX').addClass('hide');
                        $('#explabel').addClass('hide');
                        $('#typeEx').addClass('hide');
                        $('#submitbut').addClass('hide');
                        $('#submitbutton').addClass('hide');
                        $('#backbuton').removeClass('hide');
                        var userId = $('#typeExp').val();
                        var date1 = $('#hiddendatebuttonuser').val();
                        var flag = 1;
                        if (flag == 1) {
                            return ($.ajax({
                                url: '/expenseUser',
                                type: 'post',
                                data: {
                                    userId: userId,
                                    date1: date1
                                },
                                dataType: 'json',

                                success: function(users1) {
                                    var users = users1[0];


                                    var log = '';

                                    log = "<thead><tr style='font-size:12px' >" + "<th>User Name</th>" + "<th>From Date</th>" + "<th>To Date</th>" + "<th>Total Amount</th><th>Action</th><th>Status</th></tr></thead><tbody id='tablebody' >";

                                    for (var i = 0; i < users.length; i++) {
                                        claimid = claimid + users[i].expenseclaimedId + ",";

                                        log = log + "<tr style='height:20px;color:grey;font-size:12px;'  id='" + users[i].id + "><input type='hidden' value='" + users[i].firstName + "' id='l" + users[i].firstName + "'>" + "<td >" + users[i].firstName + "</td>" + "<td >" + users[i].fromdate + "</td>" + "<td >" + users[i].todate + "</td><td>" + users[i].totalExpense + "</td><td >";

                                        log = log + "<a  style='padding-left:6px' ><input type='hidden' value=" + +" id='a" + users[i].userId + "'> <span '  data-toggle='modal' data-target='#myModal'  class='glyphicon glyphicon-list-alt' style='color:black;height:10px' onclick='expensedescription(" + users[i].expenseclaimId + ")'   title ='description' ></span></a>";
                                        log = log + "<a  style='padding-left:6px' ><input type='hidden' value=" + +" id='a" + users[i].userId + "'> <span '  data-toggle='modal' data-target='#myModal'  class='glyphicon glyphicon-comment' style='color:#23527c;height:15px' onclick='showCommentandRemark(" + users[i].expenseclaimId + ")'   title =' Comment' ></span></a>";
                                         if ((users[i].Status == 1) && (users[i].ClaimedStatus ==100)&&(<%=roleid%>==5))        
                                        {       
                                        log=log+'<input type="hidden" value='+users[i].sanctionedExpense+' id="sen'+users[i].expenseclaimId+'"><input type="hidden" value='+users[i].sanctionedDate+' id="sendate'+users[i].expenseclaimId+'"><span id="senmanu'+users[i].expenseclaimId+'" class="glyphicon glyphicon-folder-close" style="padding-left:10px;color:red" onclick="insertSancationedExpense('+users[i].expenseclaimId+')">';        
                                        }

                                        if ((users[i].Status == 0) && ((users[i].ClaimedStatus != 101) || (users[i].ClaimedStatus != 10))) {
                                            log += "<a  style='padding-left:6px' ><input type='hidden' value=" + +" id='a" + users[i].userId + "'> <span id='a" + users[i].expenseclaimId + "'  data-toggle='modal' data-target='#myModal'  class='glyphicon glyphicon-ok-circle' style='color:green;height:10px' onclick=\"(approveExpense(" + users[i].expenseclaimId + ",'" + users[i].userEmail + "','" + users[i].ClaimedStatus + "','" + users[i].totalExpense + "','" + users[i].id + "',1))\"   title ='Click to Approve Expense' ></span></a>" +
                                                "<a  style='padding-left:6px' ><input type='hidden' value=" + +" id='a" + users[i].userId + "'> <span id='b" + users[i].expenseclaimId + "'  data-toggle='modal' data-target='#myModal'  class='glyphicon glyphicon-remove-circle' style='color:red;height:10px' onclick=\"(rejectReason(" + users[i].expenseclaimId + ",'" + users[i].userEmail + "','" + users[i].ClaimedStatus + "','" + users[i].totalExpense + "','" + users[i].id + "',0))\"   title ='Click to  Reject Expense' ></span></a>";
                                        }
                                        log += "</td><td>";
                                        if ((users[i].ClaimedStatus == 0) && (users[i].Status == 0) && (users[i].Submitted == 1)) {
                                            log = log + "<span id='c" + users[i].id + "' style='height:20px;font-size:10px;'>Pending..</span></td>";
                                        }
                                        if ((users[i].ClaimedStatus > 0) && (users[i].ClaimedStatus < 100) && (users[i].Status == 0) && (users[i].Submitted == 1)) {

                                            log = log + "<span id='c" + users[i].id + "' style='height:20px;font-size:10px;'>Pending..</span><span class='numberCircle' style='padding-left:6px;padding-right:6px;height:15px;width:30px; border: 2px solid;border-radius: 100%;color:green;font-size:10px;' title='Approved on " + users[i].ClaimedStatus + " Level '>" + users[i].ClaimedStatus + "</span></td>";
                                        }

                                        if ((users[i].ClaimedStatus > 0) && (users[i].ClaimedStatus < 10) && (users[i].Submitted == 1) && (users[i].Status == 1)) {
                                            var tempname = '';
                                            if (users[i].ClaimedStatus == 1) {
                                                tempname = parseInt(users[i].ClaimedStatus) + 1;
                                                tempname += 'nd';
                                            }
                                            if (users[i].ClaimedStatus == 2) {
                                                tempname = parseInt(users[i].ClaimedStatus) + 1;
                                                tempname += 'rd';
                                            } else if (users[i].ClaimedStatus > 2) {
                                                tempname = parseInt(users[i].ClaimedStatus) + 1;
                                                tempname += 'th';
                                            }
                                            log = log + "<span id='c" + users[i].id + "' style='height:20px;font-size:10px;'>Pending on Mr. <i style='color:#23527c'> " + users1[2][0].firstName + "</i></span></td>";
                                        }
                                        if ((users[i].ClaimedStatus > 1) && (users[i].ClaimedStatus < 10) && (users[i].Submitted == 1)) {
                                            var tempname;
                                            if (users[i].ClaimedStatus == 1) {
                                                tempname = parseInt(users[i].ClaimedStatus) + 1;
                                                tempname += 'nd';
                                            }
                                            if (users[i].ClaimedStatus == 2) {
                                                tempname = parseInt(users[i].ClaimedStatus) + 1;
                                                tempname += 'rd';
                                            } else if (users[i].ClaimedStatus > 2) {
                                                tempname = parseInt(users[i].ClaimedStatus) + 1;
                                                tempname += 'th';
                                            }
                                            log = log + "<span id='c" + users[i].id + "' style='height:20px;font-size:10px;'>Pending on Mr. " + users1[2][0].firstName + "</span></td>";
                                        }
                                        if ((users[i].ClaimedStatus == 100) && (users[i].Submitted == 1)) {
                                            log = log + "<span id='c" + users[i].id + "' style='height:20px;font-size:10px;'>Approved by finance</span><span class='glyphicon glyphicon-ok' style='padding-left:20px;height:20px;color:green;font-size:10px;' title='Final Approved'></span></td>";
                                        }
                                        if ((users[i].ClaimedStatus == 10) || (users[i].ClaimedStatus == 101)) {
                                            log = log + "<span style='height:20px;font-size:10px;'>Rejected By Mr. <i style='color:#23527c'>" + users1[1][0].firstName + "</i></span></td>";
                                        }
                                              

                                        if (users[i].Status == 100) {
                                            log = log + "<span id='c" + users[i].id + "' style='height:20px;font-size:10px;'>Rejected By Mr. <i style='color:#23527c'>" + users1[1][0].firstName + "</i></span><span class='glyphicon glyphicon-off' style='padding-left:20px;height:20px;color:red;font-size:10px;'></span></td>";
                                        }

                                        log = log + "</tr>";
                                    }
                                    log = log + "</tbody>";

                                    $("#bugtable").dataTable().fnDestroy();
                                    $("#bugtable").html('');

                                    $("#bugtable").html(log);
                                    $("#bugtable").dataTable({
                                        "bLengthChange": true,
                                        "paging": true,
                                        "binfo": false,
                                        "bDestroy": true,

                                        "aoColumnDefs": [{
                                            "bSortable": false,
                                            "aTargets": [-1]
                                        }],
                                        "autoWidth": false,
                                        "columns": [{
                                            "width": "10%"
                                        }, {
                                            "width": "10%"
                                        }, {
                                            "width": "10%"
                                        }, {
                                            "width": "10%"
                                        }, {
                                            "width": "10%"
                                        }, {
                                            "width": "15%"
                                        }]
                                    });
                                    $("#searchbox1").keyup(function() {
                                        $("#bugtable").dataTable().fnFilter(this.value);
                                    });

                                }

                            }));
                        }

                    }

                    function back(){
                        $('#aprovediv').addClass('hide');
                          $('#aprovedivapp').removeClass('hide');
                        $('#accordions').addClass('hide');
                        $('#accordionshome').addClass('hide');
                     approverHome()     
                    }

                    /*method for approver home*/
                     function showExpenseforapprover(){
                         $('#aprovediv').removeClass('hide');
                          $('#aprovedivapp').addClass('hide');
                        $('#accordions').removeClass('hide');
                        $('#accordionshome').addClass('hide');
                      $('#typeExp').val($('#typeExpapp').val());  
                     showexpensDetailsofuser()   
                     }

                    function approverHome() {
                        
                        claimid = "";
                        $('#backbuton').addClass('hide');
                        $('#datetablediv').removeClass('hide');
                        $('#accordionshome').removeClass('hide');
                        $('#accordionsdata').addClass('hide');
                        $('#totalandaddEX').addClass('hide');
                        $('#explabel').addClass('hide');
                        $('#typeEx').addClass('hide');
                        $('#submitbut').addClass('hide');
                        $('#submitbutton').addClass('hide');
                        var userId = $('#typeExp').val();
                        var date1 = $('#hiddendatebuttonuser').val();
                       
                        var flag = 1;
                        if (flag == 1) {
                            return ($.ajax({
                                url: '/approverHome',
                                type: 'post',
                                data: {
                                    userId: userId,
                                    date1: date1
                                },
                                dataType: 'json',

                                success: function(users1) {
                                    var users = users1[0];
                             

                                    var log = '';

                                    log = "<thead><tr style='font-size:12px' >" + "<th>Employee Name</th>" + "<th>Employee Code</th>" + "<th>Status</th>" + "<th>View Expense</th></tr></thead><tbody id='tablebody' >";

                                    for (var i = 0; i < users.length; i++) {
                                        claimid = claimid + users[i].expenseclaimedId + ",";
                                      
                                        log = log + "<tr style='height:20px;color:grey;font-size:12px;'  id='" + users[i].id + "><input type='hidden' value='" + users[i].firstName + "' id='l" + users[i].firstName + "'>" + "<td >" + users[i].firstName + "</td>" + "<td >" + users[i].ecode + "</td>" + "<td >";
                                        if(users[i].Status==1){
                                        log = log + "Approved </td>";
                                       }
                                         else if(users[i].Status==0){
                                         log = log + "Pending</td>";
                                       }
                                        else{
                                         log = log + "Rejected</td>";
                                       }
                                          log = log + " <td><span title='Expence Details' class='glyphicon glyphicon-eye-open' onclick='showtheexpenseData("+users[i].id+")' style='font-size:15px;color:black;'></td>";

                                        log = log + "</tr>";
                                    }
                                    log = log + "</tbody>";

                                    $("#homeTable").dataTable().fnDestroy();
                                    $("#homeTable").html('');

                                    $("#homeTable").html(log);
                                    $("#homeTable").dataTable({
                                        "bLengthChange": true,
                                        "paging": true,
                                        "binfo": false,
                                        "bDestroy": true,

                                        "aoColumnDefs": [{
                                            "bSortable": false,
                                            "aTargets": [-1]
                                        }],
                                        "autoWidth": false,
                                        "columns": [{
                                            "width": "10%"
                                        }, {
                                            "width": "10%"
                                        }, {
                                            "width": "10%"
                                        }, {
                                            "width": "10%"
                                        }]
                                    });
                                    $("#searchboxhome").keyup(function() {
                                        $("#homeTable").dataTable().fnFilter(this.value);
                                    });

                                }

                            }));
                        }

                    }
                    /*end home approver*/

                    function array() {
                        str1 = "";
                        for (var i = claimid.length - 1; i >= 0; i--) {
                            str1 = str1 + claimid[i];
                        };
                    }

                    function role() {
                        if (<%=roleid%> == 2) {
                            $("#aprovediv").addClass('hide');

                        }
                    }

                    function showtheexpenseData(id){
                        $('#accordionshome').addClass('hide');
                         $('#aprovediv').removeClass('hide');
                          $('#aprovedivapp').addClass('hide');
                        $('#typeExp').val(id);
                        showexpensDetailsofuser();
                    }

                    function hidethebuttons() {
                        if (($('#i').val() == 0) && ($('#k').val() == 101)) {
                            $('#submitbuttonresub').addClass('hide');
                            $('#submitbuttonforresubmit').removeClass('hide');

                        } else if ($('#k').val() == 101) {
                            $('#submitbuttonresub').removeClass('hide');
                            $('#submitbuttonforresubmit').addClass('hide');
                        } else if ($('#j').val() > 0) {
                            $('#submitbuttonresub').addClass('hide');
                            $('#submitbuttonforresubmit').addClass('hide');
                        } else if ($('#i').val() == 0) {
                            $('#submitbuttonresub').addClass('hide');
                            $('#submitbuttonforresubmit').removeClass('hide');
                        }

                    }

                    function rejectReason(claimarray, useremail, cstatus, totalAmount, transId, status1) {
                        $('#comment').val('');
                        $('#myModalcomment').modal('show');
                        $('#comentexpid').val(claimarray);
                        $('#expemail').val(useremail);
                        $('#expemail1').val(transId);

                    }

                    function approveExpense(claimarray, toemail, cstatus, totalAmount, transId) {
                        $('#remark').val('');
                        $('#myModalremark').modal('show');
                        $('#comentexpid1').val(claimarray);
                        $('#expemail2').val(toemail);
                        $('#expemail11').val(transId);
                        $('#statusr').val(cstatus);

                    }

                    function rejecttheExpense(status1) {
                        var claimarray = $('#comentexpid').val();
                        var expemail = $('#expemail').val();
                        remark = $('#comment').val();
                        transId = $('#expemail1').val();
                        var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/expenseApprove';
                        $.ajax({
                            url: url1,
                            method: 'POST',
                            data: {
                                claimarray: claimarray,
                                status1: status1,
                                expemail: expemail,
                                remark: remark,
                                transId: transId
                            },
                            success: function(data) {
                                $('#appbutton').val('Submitted');
                                document.getElementById("appbutton").disabled = true;
                                alert("Expense has been rejected successfully.");
                                $('#a'.concat(claimarray)).addClass('hide');
                                $('#b'.concat(claimarray)).addClass('hide');
                                $('#c'.concat(transId)).html('');
                                $('#c'.concat(transId)).append('Rejected');
                                $("#typeExp option:selected").text($("#typeExp option:selected").text().replace("Pending", "Rejected"));
                                $('.dismiss1').click();
                                resubmittheExpenseforCopy(claimarray);

                                // $('#totalandaddEX').addClass('hide');
                        $('#explabel').addClass('hide');
                        $('#typeEx').addClass('hide');
                        $('#submitbutton').addClass('hide');
                        $('#totalandaddEX1').addClass('hide');
                        $('#submitbut').addClass('hide');
                         
                            }
                        });
                    }

                    function checkExpense(Id) {
                        var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/expenseblableornot';
                        $.ajax({
                            url: url1,
                            method: 'POST',
                            data: {
                                Id: Id,

                            },
                            success: function(data) {
                                if (data.length != undefined) {
                                    for (var i = 0; i < data.length - 1; i++) {
                                        $('#'.concat(data[i][0].flagbill)).addClass('active-row');
                                    }
                                    alert("Bill Attachment mandatory for highlighted expense");
                                } else {
                                    $('#usercomment').val('');
                                    $('#myModalsubmit').modal('show');
                                }

                            }
                        });
                    }


                    function checkFinancemanager() {
                        var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/checkFinancemanager';
                        $.ajax({
                            url: url1,
                            method: 'POST',

                            success: function(data) {
                                if (data[0].flag1 == 0) {
                                    alert('Finance Manager missing,Please contact admin.');
                                    return false;
                                } else {

                                    checkExpense($('#ipn').val());
                                    return true;
                                }

                            }
                        });
                    }


                    function toChekRasieExpenseOrNotforNext() {
                        var d = new Date();
                        var m = ("0" + (d.getMonth() + 1)).slice(-2); 
                        var dd = ("0" + d.getDate()).slice(-2); 
                        var y = d.getFullYear();
                        var currentdate = y + '-' + m + '-' + dd;
                        var dateforbfirst = new Date($('#hiddendatebutton').val());
                       // dateforbfirst.setDate(dateforbfirst.getDate()+ 15 );

                        var enddatefor = new Date($('#hiddendatebutton').val());
                        enddatefor.setDate(enddatefor.getDate() + 15);

                        if ((new Date(currentdate) >= dateforbfirst) && (new Date(currentdate) <= enddatefor)) {

                            $('#submitbut').addClass('hide');
                            $('#submitbutton').removeClass('hide');
                            $('#explabel').removeClass('hide');
                            $('#typeEx').removeClass('hide');
                        } else if (new Date(currentdate) <= enddatefor) {
                            $('#submitbut').addClass('hide');
                            $('#explabel').removeClass('hide');
                            $('#typeEx').removeClass('hide');
                            $('#submitbutton').addClass('hide');  
                        } else {
                            $('#submitbut').addClass('hide');
                            $('#explabel').addClass('hide');
                            $('#typeEx').addClass('hide');
                            $('#submitbutton').addClass('hide');


                        }
                    }

                    function toChekRasieExpenseOrNotforPrev() {
                        var d = new Date();
                        var m = ("0" + (d.getMonth() + 1)).slice(-2); 
                        var dd = ("0" + d.getDate()).slice(-2);  
                        var y = d.getFullYear();
                        var currentdate = y + '-' + m + '-' + dd;
                        
                        var dateforbfirst = new Date($('#hiddendatebutton').val());
                        dateforbfirst.setDate(dateforbfirst.getDate() - 30);
                        var enddatefor = new Date($('#hiddendatebutton').val());
                        enddatefor.setDate(enddatefor.getDate() - 15);
                      
                        if ((new Date(currentdate) >= dateforbfirst) && (new Date(currentdate) <= enddatefor)) {
                           
                            $('#submitbutton').removeClass('hide');
                            $('#submitbut').addClass('hide');
                        }
                        else if (new Date(currentdate) <= enddatefor) {
                           
                            $('#submitbut').addClass('hide');
                            $('#raiseexp').removeClass('hide');
                            $('#notvalid').addClass('hide');
                            $('#explabel').removeClass('hide');
                            $('#typeEx').removeClass('hide');
                            $('#submitbutton').addClass('hide');

                        } else {
                            $('#submitbut').addClass('hide');
                            $('#explabel').addClass('hide');
                            $('#typeEx').addClass('hide');
                            $('#submitbutton').addClass('hide');
                            $('#raiseexp').addClass('hide');
                            $('#notvalid').removeClass('hide');
                        }
                    }

                    function thisAlert() {
                        alert('you can not raise expense for this fortnight');
                    }

                    function hidesubmitshowedit() {
                        $('#explabel').addClass('hide');
                        $('#typeEx').addClass('hide');
                        $('#submitbutton').addClass('hide');
                        $('#submitbut').removeClass('hide');
                    }

                    function toCheckExpenseSubmitOrNot() {

                        var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/checkExpenseSubmitOrNot';
                        $.ajax({
                            url: url1,
                            method: 'POST',

                            success: function(data) {
                                //alert(data[0].status1);
                               
                                if (data[0].f11 == 2) {
                                    
                                    $('#rasebutton').addClass('hide');
                                    $('#submitbut').addClass('hide');
                                    $('#explabel').removeClass('hide');
                                    $('#typeEx').removeClass('hide');
                                    $('#submitbutton').removeClass('hide');
                                } else if ((data[0].flag == 1) && (data[0].status1 > 0) && (data[0].status1 != 101)) {
                                    
                                    $('#rasebutton').addClass('hide');
                                    $('#explabel').addClass('hide');
                                    $('#typeEx').addClass('hide');
                                    $('#submitbutton').addClass('hide');
                                    $('#submitbut').addClass('hide');

                                    if ((data[0].submit == 1) && (data[0].f11 != 2)) {
                                       
                                        $('#rasebutton').addClass('hide');
                                        $('#submitbut').addClass('hide');
                                        $('#explabel').addClass('hide');
                                        $('#typeEx').addClass('hide');
                                        $('#submitbutton').addClass('hide');
                                    }

                                     else {
                                        $('#submitbut').addClass('hide');
                                        $('#rasebutton').addClass('hide');
                                    }
                                     if(data[0].status1 == 100){
                                        
                                    $('#explabel').addClass('hide');
                                    $('#typeEx').addClass('hide');
                                    $('#submitbutton').addClass('hide');
                                    $('#submitbut').addClass('hide');
                                    $('#rasebutton').removeClass('hide');   
                                }

                                } else {
                                   
                                    $('#rasebutton').addClass('hide');
                                    $('#explabel').removeClass('hide');
                                    $('#typeEx').removeClass('hide');
                                    $('#submitbutton').removeClass('hide');
                                    $('#submitbut').addClass('hide');
                                    if ((data[0].submit == 1) && (data[0].status1 != 101)) {
                                        
                                        $('#rasebutton').addClass('hide');
                                        $('#explabel').addClass('hide');
                                        $('#typeEx').addClass('hide');
                                        $('#submitbutton').addClass('hide');
                                        $('#submitbut').removeClass('hide');
                                    } else {
                                        $('#rasebutton').addClass('hide');
                                        $('#submitbut').addClass('hide');
                                    }
                                }
                            }
                        });
                    }
                    
                    function printOption(){
                        $('#rasebutton').removeClass('hide');
                                        $('#explabel').addClass('hide');
                                        $('#typeEx').addClass('hide');
                                        $('#submitbutton').addClass('hide');
                                       // $('#submitbut').removeClass('hide'); 
                    }

                    function toChecktheDate() {
                        var wbsId = $('#trip1').val();
                        var startDate = $('#from').val();
                        var endDate = $('#to').val();

                        var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/checkWbsDate';
                        $.ajax({
                            url: url1,
                            method: 'POST',
                            data: {
                                wbsId: wbsId,
                                startDate: startDate,
                                endDate: endDate,

                            },
                            success: function(data) {
                                if (data[0].flag == 1) {
                                    att = 'true';
                                } else {
                                    alert('WBS date does not match Please select the currect WBS on Trip/Assignment button');
                                    att = 'false';
                                }
                            }
                        });
                        return att;
                    }

                    function toChecktheDateTravel() {
                        var wbsId = $('#traveltrip').val();
                        var startDate = $('#fromdatefortravel').val();
                        var endDate = $('#tofortravel').val();
                        var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/checkWbsDate';
                        $.ajax({
                            url: url1,
                            method: 'POST',
                            data: {
                                wbsId: wbsId,
                                startDate: startDate,
                                endDate: endDate,

                            },
                            success: function(data) {
                                if (data[0].flag == 1) {

                                    return true;
                                } else {
                                    alert('WBS date does not match Please select the currect WBS on Trip/Assignment button');
                                    document.getElementById("trip1").focus;
                                    return false;
                                }
                            }
                        });

                    }

                    function toChecktheDateFood() {
                        var wbsId = $('#foodtrip').val();
                        var startDate = $('#fromfood').val();
                        var endDate = $('#tofood').val();
                        var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/checkWbsDate';
                        $.ajax({
                            url: url1,
                            method: 'POST',
                            data: {
                                wbsId: wbsId,
                                startDate: startDate,
                                endDate: endDate,

                            },
                            success: function(data) {
                                if (data[0].flag == 1) {

                                    return true;
                                } else {
                                    alert('WBS date does not match Please select the currect WBS on Trip/Assignment button');
                                    document.getElementById("trip1").focus;
                                    return false;
                                }
                            }
                        });

                    }

                    function toChecktheDatePhone() {
                        var wbsId = $('#phonetrip').val();
                        var startDate = $('#fromdateforphone').val();
                        var endDate = $('#todateforphone').val();
                        var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/checkWbsDate';
                        $.ajax({
                            url: url1,
                            method: 'POST',
                            data: {
                                wbsId: wbsId,
                                startDate: startDate,
                                endDate: endDate,

                            },
                            success: function(data) {
                                if (data[0].flag == 1) {

                                    return true;
                                } else {
                                    alert('WBS date does not match Please select the currect WBS on Trip/Assignment button');
                                    document.getElementById("trip1").focus;
                                    return false;
                                }
                            }
                        });

                    }

                    function tocheckAttachment() {

                        var arrExt = ["pdf", "doc", "docx", "xlsx", "xls", "gif", "jpeg", "png", "csv"]
                        var filename = $('#attachfile').val();

                        var fileExt = filename.split('.');
                        fileExt = fileExt[fileExt.length - 1];

                        if (arrExt.indexOf(fileExt) == -1) {
                            alert("uploaded file format is invalid! \n valid formats: pdf,doc,docx.xls,xlsx,jpeg,png,csv");
                            return false;
                        } else
                            UploadSheet();
                    }

                    function toChecktheDatersd() {

                        var wbsId = $('#rsdtrip').val();
                        var startDate = $('#fromdateforrfd').val();
                        var endDate = $('#todateforrfd').val();

                        var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/checkWbsDate';
                        $.ajax({
                            url: url1,
                            method: 'POST',
                            data: {
                                wbsId: wbsId,
                                startDate: startDate,
                                endDate: endDate,

                            },
                            success: function(data) {
                                if (data[0].flag == 1) {

                                    return true;
                                } else {
                                    alert('WBS date does not match Please select the currect WBS on Trip/Assignment button');
                                    document.getElementById("trip1").focus;
                                    return false;
                                }
                            }
                        });

                    }

                    function toChecktheDateBilldiem() {

                        var wbsId = $('#pertrip').val();
                        var startDate = $('#fromdateperdiem').val();
                        var endDate = $('#todateperdiem').val();

                        var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/checkWbsDate';
                        $.ajax({
                            url: url1,
                            method: 'POST',
                            data: {
                                wbsId: wbsId,
                                startDate: startDate,
                                endDate: endDate,

                            },
                            success: function(data) {
                                if (data[0].flag == 1) {

                                    return true;
                                } else {
                                    alert('WBS date does not match Please select the currect WBS on Trip/Assignment button');
                                    document.getElementById("trip1").focus;
                                    return false;
                                }
                            }
                        });


                    }

                    function toChecktheDateOther() {

                        var wbsId = $('#othertrip').val();
                        var startDate = $('#fromother').val();
                        var endDate = $('#otherToDate').val();

                        var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/checkWbsDate';
                        $.ajax({
                            url: url1,
                            method: 'POST',
                            data: {
                                wbsId: wbsId,
                                startDate: startDate,
                                endDate: endDate,

                            },
                            success: function(data) {
                                if (data[0].flag == 1) {

                                    return true;
                                } else {
                                    alert('WBS date does not match Please select the currect WBS on Trip/Assignment button');
                                    document.getElementById("trip1").focus;
                                    return false;
                                }
                            }
                        });
                    }

                    function toCheckthelength() {

                        if ($('#usercomment').val().length < 500) {
                            submittheExpense();
                            return true;
                        } else {
                            alert('Please write only 500 letters in the comment box');
                            $('#usercomment').val('');
                            return false;
                        }
                    }

                    function toCheckthelengthforRemark() {

                        if ($('#remark').val().length < 500) {
                            approvetheExpense(1);
                            return true;
                        } else {
                            alert('Please write only 500 letters in the comment box');
                            $('#remark').val('');
                            return false;
                        }
                    }

                    function toCheckthelengthforReason() {


                        if ($('#comment').val() == '') {
                            alert('Please fill the reason for reject the Expense');
                            return false;
                        } else if ($('#comment').val().length < 500) {
                            rejecttheExpense(0);
                            return true;
                        } else {
                            alert('Please write only 500 letters in the reason box');
                            $('#comment').val('');
                            return false;
                        }
                    }

                    function approvetheExpense(status1) {
                        document.getElementById("expenseappbutton").disabled = true;
                        var claimarray = $('#comentexpid1').val();
                        var toemail = $('#expemail2').val();
                        remark = $('#remark').val();
                        transId = $('#expemail11').val();

                        var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/expenseApprove';
                        $.ajax({
                            url: url1,
                            method: 'POST',
                            data: {
                                claimarray: claimarray,
                                status1: status1,
                                toemail: toemail,
                                transId: transId,
                                remark: remark
                            },
                            success: function(data) {
                               $('.dismisthis').click();
                                $('#appbutton').val('Submitted');
                                document.getElementById("appbutton").disabled = true;
                                alert("Expense approved successfully.");
                                $('#a'.concat(claimarray)).addClass('hide');
                                $('#b'.concat(claimarray)).addClass('hide');
                                $('#senmanu'.concat(claimarray)).removeClass('hide'); 
                                $('#c'.concat(transId)).html('');
                                $('#c'.concat(transId)).append('Approved');
                                $("#typeExp option:selected").text($("#typeExp option:selected").text().replace("Pending", "Approved"));
                                 document.getElementById("expenseappbutton").disabled = false;
                            
                            }
                        });

                    }

                    function submitExpense() {
                        if ($('#ipn').val() == undefined) {
                            alert('please add the expense');
                        } else {

                            checkFinancemanager();

                        }
                    }

                    function showCommentandRemark(ids) {


                        var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/showremarkandcomment';
                        $.ajax({
                            url: url1,
                            method: 'POST',
                            data: {
                                ids: ids,

                            },
                            success: function(data) {
                                $('#showcomment').html('');
                                $('#myModalshowcomment').modal('show');
                                if (data[0][0].anyFile == '') {
                                    $('#showcomment').append("<div style='font-size:12px;margin-top:5px;'>" + 'No comment' + "</div>" + "<div style='font-size:10px;color:#23527c;'>By &nbsp Mr. " + data[0][0].firstName + "</div>" + "<div style='border-bottom-style: outset;border-color:grey; border-width: 1px;'></div>");
                                } else {
                                    $('#showcomment').append("<div style='font-size:12px;margin-top:5px;'>" + data[0][0].anyFile + "</div>" + "<div style='font-size:10px;color:#23527c;'>By &nbsp Mr. " + data[0][0].firstName + "</div>" + "<div style='border-bottom-style: outset;border-color:grey; border-width: 1px;'></div>");
                                }
                                if (data[1].length > 0) {
                                    for (var i = 0; i < data[1].length; i++) {
                                        if (data[1][i].remark == '') {
                                            $('#showcomment').append("<div style='font-size:12px;margin-top:5px;'>" + 'No comment' + "</div>" + "<div style='font-size:10px;color:#23527c;'>By &nbsp Mr. " + data[1][i].firstName + "</div>" + "<div style='border-bottom-style: outset;border-color:grey; border-width: 1px;'></div>");
                                        } else {
                                            $('#showcomment').append("<div style='font-size:12px;margin-top:5px;'>" + data[1][i].remark + "</div>" + "<div style='font-size:10px;color:#23527c;'>By &nbsp Mr. " + data[1][i].firstName + "</div>" + "<div style='border-bottom-style: outset;border-color:grey; border-width: 1px;'></div>");
                                        }
                                    }
                                }
                            }
                        });

                    }

                    function submittheExpense() {
                        var expClaim = $('#ipn').val();
                        var comments = $('#usercomment').val();
                        if ($('#ipn').val() == undefined) {
                            alert('please add the expense');
                        } else {
                            var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/expenseSubmit';
                            $.ajax({
                                url: url1,
                                method: 'POST',
                                data: {
                                    expClaim: expClaim,
                                    comments: comments
                                },
                                success: function(data) {
                                    if (data[0].ng == 0) {
                                        alert('Data can not be submitted because Expense already approved, your added Expenses will be moved to next fortnight');
                                        selecthotelExpenseforweek();
                                        $('.dismiss').click();
                                    } else {
                                        alert("Expense submitted successfully.");
                                        selecthotelExpenseforweek();
                                        $('.dismiss').click();
                                    }
                                }
                            });
                        }
                    }

                    function resubmittheExpenseforCopy(expclaimId) {

                        var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/reSubmitforcopy';
                        $.ajax({
                            url: url1,
                            method: 'POST',
                            'async':false,
                            data: {
                                expclaimId: expclaimId
                            },
                            success: function(data) {

                                selecthotelExpenseforweek();
                                
                            }
                        });

                    }

                    function resubmittheExpense() {
                        var expclaimId = $('#resubmitExpenseid').val();
                        var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/reSubmit';
                        $.ajax({
                            url: url1,
                            method: 'POST',
                            data: {
                                expclaimId: expclaimId
                            },
                            success: function(data) {
                                if (data == 0) {

                                    alert("Expense can not be edited because expense already approved");
                                }
                                $('#submitbut').addClass('hide');
                                selecthotelExpenseforweek();
                            }
                        });

                    }

                    function getBillableUsers() {
                        var fortnightDate = $('#hiddendatebuttonuser').val();
                        var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/getBillableUsers';
                        $.ajax({
                                url: url1,
                                method: 'POST',
                                data: {
                                    fortnightDate: fortnightDate
                                },
                                success: function(data) {
                                    $('#typeExp').html(" ");
                                    $('#typeExpapp').html(" ");
                                    var row = '';
                                    row = row + '<option value="0">-select-</option>';
                                    var j = 0;                                
                                    var k = 0;                                  
                                    for (var i = data.length-1; i >= 0; i--) {

                                        if (data[i].Status == 0) {
                                            j = data[i].id;
                                            row = row + '<option value=' + data[i].id + '>' + data[i].firstName + '(Pending)</option>';
                                        } else if (data[i].Status == 1) {
                                            if (data[i].id != j) {
                                                        k = data[i].id;
                                                        row = row + '<option value=' + data[i].id + '>' + data[i].firstName + '(Approved)</option>';
                                                    }
                                                }
                                          
                                         else {
                                           
                                                    if (data[i].id != j) {
                                                        if (data[i].id != k) {                                                                     row = row + '<option value=' + data[i].id + '>' + data[i].firstName + '(Rejected)</option>';
                                                                }
                                                              
                                                            }

                                                    }
                                       
                                    }
                                
                                $('#typeExp').append(row);
                                $('#typeExpapp').append(row);

                            }
                        });

                    }

                    function submitbuttonDisable() {
                        $('#submitedbutton').val('Submitted');
                        document.getElementById("submitedbutton").disabled = true;
                        $('#submitedbutton').removeClass('hide');

                    }

                    /*end function*/
                    function getdate1() {
                        var d = new Date();
                    }
                    /*function to varify the date*/
                    function dateVarifyofHotel() {
                        var from = $('#from').val().split("-");
                        var f = new Date(from[2], from[1] - 1, from[0]);
                        var to = $('#to').val().split("-");
                        var t = new Date(to[2], to[1] - 1, to[0]);
                        if (new Date(f) <= new Date(t)) {
                            var diffDays = Math.round(Math.abs(new Date(f).getTime() - new Date(t).getTime()));
                            var days = diffDays / 86400000;
                            $('#htotalday').val(days + 1);
                            changeCurrency();
                            return true;;
                        } else {
                            if (($('#from').val() != '') && ($('#to').val() != '')) {
                                alert('Start date is greater than end date');
                            }
                            return false;
                        }
                    }

                    function dateVarifyofTravel() {
                        var from = $('#fromdatefortravel').val().split("-");
                        var f = new Date(from[2], from[1] - 1, from[0]);
                        var to = $('#tofortravel').val().split("-");
                        var t = new Date(to[2], to[1] - 1, to[0]);
                        if (new Date(f) <= new Date(t)) {
                            var diffDays = Math.round(Math.abs(new Date(f).getTime() - new Date(t).getTime()));
                            var days = diffDays / 86400000;
                            $('#traveltday').val(days + 1);
                            changeCurrencyforTravel();
                            return true;;
                        } else {
                            if (($('#fromdatefortravel').val() != '') && ($('#tofortravel').val() != '')) {
                                alert('Start date is greater than end date');
                            }
                            return false;
                        }
                    }

                    function dateVarifyofFood() {
                        var from = $('#fromfood').val().split("-");
                        var f = new Date(from[2], from[1] - 1, from[0]);
                        var to = $('#tofood').val().split("-");
                        var t = new Date(to[2], to[1] - 1, to[0]);
                        if (new Date(f) <= new Date(t)) {
                            return true;;
                        } else {
                            if (($('#fromfood').val() != '') && ($('#tofood').val() != '')) {
                                alert('Start date is greater than end date');
                            }
                            return false;
                        }
                    }

                    function dateVarifyofPhone() {
                        var from = $('#fromdateforphone').val().split("-");
                        var f = new Date(from[2], from[1] - 1, from[0]);
                        var to = $('#todateforphone').val().split("-");
                        var t = new Date(to[2], to[1] - 1, to[0]);
                        if (new Date(f) <= new Date(t)) {
                            return true;;
                        } else {

                            if (($('#fromdateforphone').val() != '') && ($('#todateforphone').val() != '')) {
                                alert('Start date is greater than end date');
                            }
                            return false;
                        }
                    }

                    function dateVarifyofRsd() {
                        var from = $('#fromdateforrfd').val().split("-");
                        var f = new Date(from[2], from[1] - 1, from[0]);
                        var to = $('#todateforrfd').val().split("-");
                        var t = new Date(to[2], to[1] - 1, to[0]);
                        if (new Date(f) <= new Date(t)) {

                            return true;;
                        } else {
                            if (($('#fromdateforrfd').val() != '') && ($('#todateforrfd').val() != '')) {
                                alert('Start date is greater than end date');
                            }
                            return false;
                        }
                    }

                    function dateVarifyofPerdiem() {
                        var from = $('#fromdateperdiem').val().split("-");
                        var f = new Date(from[2], from[1] - 1, from[0]);
                        var to = $('#todateperdiem').val().split("-");
                        var t = new Date(to[2], to[1] - 1, to[0]);
                        if (new Date(f) <= new Date(t)) {
                            var diffDays = Math.round(Math.abs(new Date(f).getTime() - new Date(t).getTime()));
                            var days = diffDays / 86400000;
                            $('#diemday1').val(days + 1);
                            changeCurrencyforDiem();
                            return true;;
                        } else {
                            if (($('#fromdateperdiem').val() != '') && ($('#todateperdiem').val() != '')) {
                                alert('Start date is greater than end date');
                            }
                            return false;
                        }
                    }

                    function dateVarifyofOther() {
                        var from = $('#fromother').val().split("-");
                        var f = new Date(from[2], from[1] - 1, from[0]);
                        var to = $('#otherToDate').val().split("-");
                        var t = new Date(to[2], to[1] - 1, to[0]);
                        if (new Date(f) <= new Date(t)) {
                            return true;;
                        } else {
                            if (($('#otherToDate').val() != '') && ($('#fromother').val() != '')) {
                                alert('Start date is greater than end date');
                            }
                            return false;
                        }
                    }

                    function changefirstdatehotel() {
                        document.getElementById("to").focus();
                    }

                    function changefirstdatetravel() {
                        document.getElementById("tofortravel").focus();
                    }

                    function changefirstdatefood() {
                        document.getElementById("tofood").focus();
                    }

                    function changefirstdatephone() {
                        document.getElementById("todateforphone").focus();
                    }

                    function changefirstdatersd() {
                        document.getElementById("todateforrfd").focus();
                    }

                    function changefirstdatedeam() {
                        document.getElementById("todateperdiem").focus();
                    }

                    function changefirstdateother() {
                        document.getElementById("otherToDate").focus();
                    }


                    function UploadSheet() {
                        var data1 = new FormData($('#attachment')[0]);
                        var files = $("#attachfile").val();
                        var id1 = $("#claimeid").val();
                        data1.append('id', id1);

                        $.ajax({
                            url: '/fileAttechment',
                            method: 'POST',
                            data: data1,
                            contentType: false,
                            processData: false,
                            success: function(data) {
                                alert("File uploaded successfully!");
                                $('.dismiss').click();
                                selecthotelExpenseforweek();
                            },
                            dataType: 'JSON',
                        });
                    }

                    function validateforhotel() {
                        if ($('#trip1').val().length < 1 || $.trim($("#trip1").val()) == "") {
                            alert("Trip/Assignment is Missing!");
                            return false;
                        } else if ($('#from').val().length < 1 || $.trim($("#from").val()) == "") {
                            alert("From Date Missing!");
                            return false;
                        } else if ($('#to').val().length < 1 || $.trim($("#to").val()) == "") {
                            alert("To date Missing!");
                            return false;
                        } else if ($('#hotelname').val().length < 1 || $.trim($("#hotelname").val()) == "") {
                            alert("Hotel Name Missing!");
                            return false;
                        } else if ($('#hreason').val().length < 1 || $.trim($("#hreason").val()) == "") {
                            alert("Hotel reason Missing!");
                            return false;
                        } else if ($("#hrate").val() == "") {
                            alert("Rate per day Missing!");
                            return false;
                        } else if ($('#hrate').val() < 1) {
                            alert("Please Enter Positive Value in  Rate per day ");
                            return false;
                        } else if ($('#htotalday').val() < 1 && $.trim($("#htotalday").val()) == "") {
                            alert("Total Days Missing!");
                            return false;
                        } else if ($('#hotelcu').val().length < 1 || $.trim($("#hotelcu").val()) == "") {
                            alert("Currency Missing!");
                            return false;
                        } else if ($('#htex').val().length < 1 || $.trim($("#htex").val()) == "") {
                            alert("Total Expense Missing!");
                            return false;
                        } else {
                            if (dateVarifyofHotel() == true) {
                                adddatahotel();
                                return true;

                            }
                        }
                    }

                    function validatefortravel() {
                        if ($('#traveltrip').val().length < 1 || $.trim($("#traveltrip").val()) == "") {
                            alert("Trip/Assignment is Missing!");
                            return false;
                        } else if ($('#fromdatefortravel').val().length < 1 || $.trim($("#fromdatefortravel").val()) == "") {
                            alert("From Date Missing!");
                            return false;
                        } else if ($('#tofortravel').val().length < 1 || $.trim($("#tofortravel").val()) == "") {
                            alert("To date Missing!");
                            return false;
                        } else if ($('#traveltype').val().length < 1 || $.trim($("#traveltype").val()) == "") {
                            alert("Travel Type Missing!");
                            return false;
                        } else if ($('#travelre').val().length < 1 || $.trim($("#travelre").val()) == "") {
                            alert("Travel reason Missing!");
                            return false;
                        }
                        else if ($('#travelc').val().length < 1 || $.trim($("#travelc").val()) == "") {
                            alert("Currency Missing!");
                            return false;
                        } else if ($('#travelex').val().length < 1 || $.trim($("#travelex").val()) == "") {
                            alert("Total Expense Missing!");
                            return false;
                        } else {
                            if (dateVarifyofTravel() == true) {
                                adddatatravel();
                                return true;
                            }
                        }
                    }

                    function validateforrsd() {
                        if ($('#rsdtrip').val().length < 1 || $.trim($("#rsdtrip").val()) == "") {
                            alert("Trip/Assignment is Missing!");
                            return false;
                        } else if ($('#fromdateforrfd').val().length < 1 || $.trim($("#fromdateforrfd").val()) == "") {
                            alert("From Date Missing!");
                            return false;
                        } else if ($('#todateforrfd').val().length < 1 || $.trim($("#todateforrfd").val()) == "") {
                            alert("To date Missing!");
                            return false;
                        } else if ($('#rfdtypeof').val().length < 1 || $.trim($("#rfdtypeof").val()) == "") {
                            alert("Type of vehicle Missing!");
                            return false;
                        } else if ($('#rfdreason').val().length < 1 || $.trim($("#rfdreason").val()) == "") {
                            alert("Reason for Travel Missing!");
                            return false;
                        }
                          else if(($("#rfdper").val() == "")&&($("#rfdtypeof").val()==1)){
                            alert("equired!");
                            return false;
                        } else if(($('#rfdper').val() < 1)&&($("#rfdtypeof").val()==1)){
                            alert("Please Enter Positive Value in Per Km Rate!");
                            return false;
                        }
                         else if ($("#rfdtotalkm").val() == "") {
                            alert("Required Field Missing!");
                            return false;
                        } else if ($('#rfdtotalkm').val() < 1) {
                            alert("Please Enter Positive Value in Total km Travel!");
                            return false;
                        } else if ($('#rfdcu').val().length < 1 || $.trim($("#rfdcu").val()) == "") {
                            alert("Currency Missing!");
                            return false;
                        } else if ($('#rfdext').val().length < 1 || $.trim($("#rfdext").val()) == "") {
                            alert("Total Expense Missing!");
                            return false;
                        } else {
                            if (dateVarifyofRsd() == true) {
                                adddatarsd();
                                return true;

                            }
                        }
                    }

                    function validatefordeim() {
                        if ($('#pertrip').val().length < 1 || $.trim($("#pertrip").val()) == "") {
                            alert("Trip/Assignment is Missing!");
                            return false;
                        } else if ($('#fromdateperdiem').val().length < 1 || $.trim($("#fromdateperdiem").val()) == "") {
                            alert("From Date Missing!");
                            return false;
                        } else if ($('#todateperdiem').val().length < 1 || $.trim($("#todateperdiem").val()) == "") {
                            alert("To date Missing!");
                            return false;
                        } else if ($('#diemhotelname').val().length < 1 || $.trim($("#diemhotelname").val()) == "") {
                            alert("Hotel Name Missing!");
                            return false;
                        } else if ($('#diemreasonstay').val().length < 1 || $.trim($("#diemreasonstay").val()) == "") {
                            alert("Reason for Stay Missing!");
                            return false;
                        } else if ($("#diemrate1").val() == "") {
                            alert("Per Diem Rate Missing!");
                            return false;
                        } else if ($('#diemrate1').val() < 1) {
                            alert("Please Enter Positive Value in Per Diem Rate!");
                            return false;
                        } else if ($('#diemday1').val() < 1 && $.trim($("#diemday1").val()) == "") {
                            alert("Total Days Missing!");
                            return false;
                        } else if ($('#diemcu').val().length < 1 || $.trim($("#diemcu").val()) == "") {
                            alert("Currency Missing!");
                            return false;
                        } else if ($('#diemtotal1').val().length < 1 || $.trim($("#diemtotal1").val()) == "") {
                            alert("Total Expense Missing!");
                            return false;
                        } else {
                            if (dateVarifyofPerdiem() == true) {
                                adddataperdiem();
                                return true;
                            }
                        }

                    }

                    function validateforfood() {
                        if ($('#foodtrip').val().length < 1 || $.trim($("#foodtrip").val()) == "") {
                            alert("Trip/Assignment is Missing!");
                            return false;
                        } else if ($('#fromfood').val().length < 1 || $.trim($("#fromfood").val()) == "") {
                            alert("From Date Missing!");
                            return false;
                        } else if ($('#tofood').val().length < 1 || $.trim($("#tofood").val()) == "") {
                            alert("To date Missing!");
                            return false;
                        } else if ($('#foodre').val().length < 1 || $.trim($("#foodre").val()) == "") {
                            alert("Reason for Fooding/entertainment Missing!");
                            return false;
                        } else if ($('#foodcu1').val().length < 1 || $.trim($("#foodcu1").val()) == "") {
                            alert("Currency Missing!");
                            return false;
                        } else if ($("#foodex1").val() == "") {
                            alert("Total Expense Missing!");
                            return false;
                        } else if ($('#foodex1').val() < 1) {
                            alert("Please Enter Positive Value in Total Expense!");
                            return false;
                        } else {
                            if (dateVarifyofFood() == true) {
                                adddatafood();
                                return true;
                            }
                        }

                    }

                    function validateforphone() {
                        if ($('#phonetrip').val().length < 1 || $.trim($("#phonetrip").val()) == "") {
                            alert("Trip/Assignment is Missing!");
                            return false;
                        } else if ($('#fromdateforphone').val().length < 1 || $.trim($("#fromdateforphone").val()) == "") {
                            alert("From Date Missing!");
                            return false;
                        } else if ($('#todateforphone').val().length < 1 || $.trim($("#todateforphone").val()) == "") {
                            alert("To date Missing!");
                            return false;
                        } else if ($('#callingreason').val().length < 1 || $.trim($("#callingreason").val()) == "") {
                            alert("Reason for Calling Missing!");
                            return false;
                        } else if ($('#callingc').val().length < 1 || $.trim($("#callingc").val()) == "") {
                            alert("Currency Missing!");
                            return false;
                        } else if ($("#callingex").val() == "") {
                            alert("Total Expense Missing!");
                            return false;
                        } else if ($('#callingex').val() < 1) {
                            alert("Please Enter Positive Value in Total Expense!");
                            return false;
                        } else {
                            if (dateVarifyofPhone() == true) {
                                adddataphone();
                                return true;
                            }
                        }

                    }


                    function validateforother() {
                        if ($('#othertrip').val().length < 1 || $.trim($("#othertrip").val()) == "") {
                            alert("Trip/Assignment is Missing!");
                            return false;
                        } else if ($('#fromother').val().length < 1 || $.trim($("#fromother").val()) == "") {
                            alert("From Date Missing!");
                            return false;
                        } else if ($('#otherToDate').val().length < 1 || $.trim($("#otherToDate").val()) == "") {
                            alert("To date Missing!");
                            return false;
                        } else if ($('#otherreason').val().length < 1 || $.trim($("#otherreason").val()) == "") {
                            alert("Expense Reason Missing!");
                            return false;
                        } else if ($('#othercu1').val().length < 1 || $.trim($("#othercu1").val()) == "") {
                            alert("Currency Missing!");
                            return false;
                        } else if ($("#otherex1").val() == "") {
                            alert("Total Expense Missing!");
                            return false;
                        } else if ($('#otherex1').val() < 1) {
                            alert("Please Enter Positive Value in Total Expense!");
                            return false;
                        } else {
                            if (dateVarifyofOther() == true) {
                                adddataother();
                                return true;
                            }
                        }

                    }

                    function tochangeTravelType(){
                        if($("#rfdtypeof").val()==2){
                          $("#deasign").addClass('hide');
                          $("#totalkm").html(''); 
                          $("#totalkm").append("Parking Fee:<span Style='font-size:10px;margin-bottom:10px; color:red'>*</span>");
                        }
                          if($("#rfdtypeof").val()==1){
                          $("#deasign").removeClass('hide');
                          $("#totalkm").html(''); 
                          $("#totalkm").append("Total km Travel:<span Style='font-size:10px;margin-bottom:10px; color:red'>*</span>");
                        }
                    }


                    function adddatahotel() {
                        $(".sub").prop('disabled', true);
                        var data = $("#hotel").serializeArray();
                        var data1 = {};
                        for (s in data) {
                            data1[data[s]['name']] = data[s]['value'];
                        }
                        var data2 = JSON.stringify(data1);

                        var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/insertExpense?expid=1';
                        $.ajax({
                            url: url1,
                            method: 'POST',
                            data: {
                                data: data2
                            },
                            success: function(data) {
                                $(".sub").prop('disabled', false);
                                $('.dismiss').click();
                                selecthotelExpenseforweek();

                            }
                        });
                    }

                    function adddatatravel() {
                        $(".sub").prop('disabled', true);
                        var data = $("#travelf").serializeArray();
                        var data1 = {};
                        for (s in data) {
                            data1[data[s]['name']] = data[s]['value'];
                        }
                        var data2 = JSON.stringify(data1);

                        var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/insertExpense?expid=2';
                        $.ajax({
                            url: url1,
                            method: 'POST',
                            data: {
                                data: data2
                            },
                            success: function(data) {
                                $(".sub").prop('disabled', false);
                                $('.dismiss').click();
                                selecthotelExpenseforweek();
                            }
                        });
                    }

                    function adddatafood() {
                        $(".sub").prop('disabled', true);
                        var data = $("#foodf").serializeArray();
                        var data1 = {};
                        for (s in data) {
                            data1[data[s]['name']] = data[s]['value'];
                        }
                        var data2 = JSON.stringify(data1);

                        var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/insertExpense?expid=3';
                        $.ajax({
                            url: url1,
                            method: 'POST',
                            data: {
                                data: data2
                            },
                            success: function(data) {
                                $(".sub").prop('disabled', false);
                                $('.dismiss').click();
                                selecthotelExpenseforweek();
                            }
                        });
                    }



                    function adddataphone() {
                        $(".sub").prop('disabled', true);
                        var data = $("#phonef").serializeArray();
                        var data1 = {};
                        for (s in data) {
                            data1[data[s]['name']] = data[s]['value'];
                        }
                        var data2 = JSON.stringify(data1);

                        var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/insertExpense?expid=4';
                        $.ajax({
                            url: url1,
                            method: 'POST',
                            data: {
                                data: data2
                            },
                            success: function(data) {
                                $(".sub").prop('disabled', false);
                                $('.dismiss').click();
                                selecthotelExpenseforweek();
                            }
                        });
                    }

                    function adddatarsd() {
                        $(".sub").prop('disabled', true);
                        var data = $("#rsdf").serializeArray();
                        var data1 = {};
                        for (s in data) {
                            data1[data[s]['name']] = data[s]['value'];
                        }
                        var data2 = JSON.stringify(data1);

                        var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/insertExpense?expid=5';
                        $.ajax({
                            url: url1,
                            method: 'POST',
                            data: {
                                data: data2
                            },
                            success: function(data) {
                               $(".sub").prop('disabled', false);
                                $('.dismiss').click();
                                selecthotelExpenseforweek();
                            }
                        });
                    }

                    function adddataperdiem() {
                        $(".sub").prop('disabled', true);
                        var data = $("#deamf").serializeArray();
                        var data1 = {};
                        for (s in data) {
                            data1[data[s]['name']] = data[s]['value'];
                        }
                        var data2 = JSON.stringify(data1);

                        var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/insertExpense?expid=6';
                        $.ajax({
                            url: url1,
                            method: 'POST',
                            data: {
                                data: data2
                            },
                            success: function(data) {
                               $(".sub").prop('disabled', false);
                                $('.dismiss').click();
                                selecthotelExpenseforweek();
                            }
                        });
                    }

                    function adddataother() {
                        $(".sub").prop('disabled', true);
                        var data = $("#otherf").serializeArray();
                        var data1 = {};
                        for (s in data) {
                            data1[data[s]['name']] = data[s]['value'];
                        }
                        var data2 = JSON.stringify(data1);

                        var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/insertExpense?expid=7';
                        $.ajax({
                            url: url1,
                            method: 'POST',
                            data: {
                                data: data2
                            },
                            success: function(data) {
                               $(".sub").prop('disabled', false);
                                $('.dismiss').click();
                                selecthotelExpenseforweek();
                            }
                        });
                    }

                    function changeCurrency() {
                        if ($("#hotelcu option:selected").attr('acualvalue') != 0) {
                            var a = $('#hrate').val();
                            var b = $('#htotalday').val();
                            var totalbill = $("#hotelcu option:selected").attr('acualvalue') * a * b;
                            $('#htex').val(totalbill);
                            $('.inrs').removeClass('hide');
                        } else {
                            var a = $('#hrate').val();
                            var b = $('#htotalday').val();
                            var totalbill = 1 * a * b;
                            $('#htex').val(totalbill);
                            $('.inrs').removeClass('hide');
                        }
                    }

                    function changeCurrencyforTravel() {
                        if ($("#travelc option:selected").attr('acualvalue') != 0) {
                            var c = $('#travelrate').val();
                            var d = $('#traveltday').val();
                            var totalbill = $("#travelc option:selected").attr('acualvalue') * 1 * $('#travelex').val();
                            $('#travelex').val(totalbill);
                            $('.inrs').removeClass('hide');
                        } else {
                            var c = $('#travelrate').val();
                            var d = $('#traveltday').val();
                            var totalbill = 1 * c * d;
                            $('#travelex').val(totalbill);
                            $('.inrs').removeClass('hide');
                        }
                    }

                    function changeCurrencyforDiem() {
                        if ($("#diemcu option:selected").attr('acualvalue') != 0) {
                            var e = $('#diemrate1').val();
                            var f = $('#diemday1').val();
                            var totalbill = $("#diemcu option:selected").attr('acualvalue') * e * f;
                            $('#diemtotal1').val(totalbill);
                            $('.inrs').removeClass('hide');
                        } else {
                            var e = $('#diemrate1').val();
                            var f = $('#diemday1').val();
                            var totalbill = 1 * e * f;
                            $('#diemtotal1').val(totalbill);
                            $('.inrs').removeClass('hide');
                        }
                    }

                    function changeCurrencyforrsd() {
                        if ($("#rfdcu option:selected").attr('acualvalue') != 0) {
                            if($("#rfdtypeof").val()==1){
                            var g = $('#rfdper').val();
                            var h = $('#rfdtotalkm').val();
                            var totalbill = $("#rfdcu option:selected").attr('acualvalue') * g * h;
                            $('#rfdext').val(totalbill);
                            $('.inrs').removeClass('hide');}
                            if($("#rfdtypeof").val()==2){
                                // var g = $('#rfdper').val();
                            var h = $('#rfdtotalkm').val();
                            var totalbill = $("#rfdcu option:selected").attr('acualvalue') * h;
                            $('#rfdext').val(totalbill);
                            $('.inrs').removeClass('hide');}
                        } else {
                            var g = $('#rfdper').val();
                            var h = $('#rfdtotalkm').val();
                            var totalbill = 1 * g * h;
                            $('#rfdext').val(totalbill);
                            $('.inrs').removeClass('hide');
                        }
                    }

                    function changeCurrencyforphone() {
                        var h = $('#callingex').val();
                        var totalbill = $("#callingc option:selected").attr('acualvalue') * h;
                        $('#callingex').val(totalbill);
                        $('.inrs').removeClass('hide');
                    }

                    function changeCurrencyforfood() {
                        var h = $('#foodex1').val();
                        var totalbill = $("#foodcu1 option:selected").attr('acualvalue') * h;
                        $('#foodex1').val(totalbill);
                        $('.inrs').removeClass('hide');
                    }

                    function changeCurrencyforOther() {
                        var h = $('#otherex1').val();
                        var totalbill = $("#othercu1 option:selected").attr('acualvalue') * h;
                        $('#otherex1').val(totalbill);
                        $('.inrs').removeClass('hide');
                    }

                    function changephonecurrency() {
                        $('#callingex').val('0');
                        $('.inrs').addClass('hide');
                    }

                    function changetravelcurrency() {
                        $('#travelex').val('0');
                        $('.inrs').addClass('hide');
                    }

                    function changefoodcurrency() {
                        $('#foodex1').val('0');
                        $('.inrs').addClass('hide');
                    }

                    function changeothercurrency() {
                        $('#otherex1').val('0');
                        $('.inrs').addClass('hide');
                    }

                    //jai
                 function insertSancationedExpense(idk)
                    {
                         $("#sanctionedmodel").modal('show');
                         $("#hideensession").val(idk);
                         
                         if($('#sendate'.concat(idk)).val()!=null){
                           $('#sanamount').val($('#sen'.concat(idk)).val()); 
                            $('#sandate').val($('#sendate'.concat(idk)).val()); 
                         }
                         else{
                           $('#sanamount').val('');
                           $('#sandate').val(''); 
                         }
                    }
                    //jai

                    function printtheExpense(){ 

                         var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/printexpense';
                        $.ajax({
                            url: url1,
                            method: 'POST',
                            data: {
                                data:$("#expjs").val()
                            },
                            success: function(data1) {
                                $('#printmodel').modal('show');
                                $('#empname').html('');
                                $('#empcode').html('');
                                $('#empapp').html('');
                                $('#empsuper').html('');
                                $('#empfrom').html('');
                                $('#empto').html('');
                                $('#emptotal').html('');
                                 var from = data1[0][0].todate.split("-");
                                   var f = from[2]+'-'+from[1]+'-'+from[0];
                                $('#empname').append(data1[0][0].name);
                                $('#empcode').append(data1[0][0].ecode);
                                $('#empapp').append(data1[1][0].name);
                                if(data1[2].length!=0){ 
                                 $('#empsuper').append(data1[2][0].name);
                                }
                                 $('#empfrom').append(data1[0][0].fromdate);
                                  $('#empto').append(f);
                                  $('#emptotal').append(data1[0][0].totalExpense);
                                  var log='';
                                for (var i = 0; i < data1[3].length; i++) {
                                        log = log + "<tr style='height:20px;color:black;font-size:14px;'  id='" + data1[3][i].id + "><input type='hidden' value='" + data1[3][i].description + "' id='l" + data1[3][i].description + "'>" + "<td style='font-size:14px;' align='center'>" + data1[3][i].description + "</td>" + "<td style='font-size:14px;' align='center'>" + data1[3][i].WBSName + "</td>" + "<td style='font-size:14px;' align='center'>" + data1[3][i].fromdate + "</td>" + "<td style='font-size:14px;' align='center'>" + data1[3][i].toDate + "</td><td style='font-size:12px;' align='center'>" + data1[3][i].totalExpense + "</td>";   
                             }
                             $('#bodyi').html(log);

                            }
                        });
                    }
  function changevaluedes(){
   $('#rfdper').val($("#rateval option:selected").attr('ratevalue'));
  }


   function PrintElem(elem) {
    Popup($('#'.concat(elem)).html());
}

function Popup(data) {
    var mywindow = window.open('', 'new div', 'height=1000,width=1300');
    mywindow.document.write('<html><head><title></title>');
   // mywindow.document.write('<link rel="stylesheet" href="css/midday_receipt.css" type="text/css" />');
    mywindow.document.write( "<link rel=\"stylesheet\" href=\"style.css\" type=\"text/css\" media=\"print\"/>" );

    mywindow.document.write('</head><body ><div class="row"><center>Expense Details<hr></center></div>');
    mywindow.document.write(data);
    mywindow.document.write('</body></html>');

    mywindow.print();
    mywindow.close();

    return true;
}
 function validatethesensen()       
                    {  
                    var idesk=$("#hideensession").val();     
                       if($("#sanamount").val()==''){       
                        alert("field required");        
                       }        
                      else if($("#sandate").val()==''){     
                        alert("field required");        
                       }        
                       else{        
                           var url1 = window.location.origin.split("/")[3] ? window.location.origin : window.location.origin + '/updatesencationAmount';        
                        $.ajax({        
                            url: url1,      
                            method: 'POST',     
                            data: {     
                                samount:$("#sanamount").val(),      
                                sdate:$("#sandate").val(),      
                                clid:$("#hideensession").val()
                                             },     
                            success: function(data) {       
                                alert("submit successfully");       
                                $('.dismiss').click();  
                                $('#senmanu'.concat(idesk)).addClass('hide');    
                               // selecthotelExpenseforweek();      
                            }       
                        });     
                       }        
                    }


                </script>
                <style>

                </style>
</head>

<body>

    <div id="submitdiv" class="col-md-12 a" style="background-color:rgba(51, 60, 125, 0.62); ">

        <div class="col-md-2"> <label id="statuslabel" style="font-size:12px; margin-top:10px;color:white;padding-left50px;" class="">User : <%=user%></label>
        </div>
        <div class="col-md-1"> <label id="statusbutton" style="margin-top:10px;color:white" class="" value='panding'>
        
       </label>
        </div>
        <div class='col-md-1'></div>
        <div class="col-md-4" id='dateTablebutton' style="height:29px;width:270px;background-color:white;margin-top:2px;margin-bottom:2px;border-radius: 25px;">
            <!-- <div class="" style="height:40px;width:50px">-->
            <img src="../img/bug/left.jpg" class="shadow" style="" height="15px" width="15px" title=" Expense" onclick='getdateprev()'>
            <input type="hidden" id="hiddendatebutton"><input disabled type='text' id="datebutton" style="margin-top:3px;text-align: center;font-size:12px" class="shadow" value='' onchange="selecthotelExpenseforweek()" disable />
            <img src="../img/bug/Right.jpg" class="shadow" style="" height="15px" width="15px" title=" Expense" onclick='getdate()'>
            <span class="glyphicon glyphicon-calendar" id='datepicherbutton' height="28px" width="22px" title=" Expense" onclick='datepicker1()'></span>
        </div>
        <div class='col-md-3'></div>
        <div class="col-md-1 hide " id='rasebutton' style="float:right;">
         <button type='button' id="print" class="form-control" style="margin-top:2px;margin-bottom:2px;height:29px; background-color:#23527c;color:white; font-size:10px;float:right" onclick="printtheExpense()" value='Print'>Preview</button>   
        </div>
    </div>

    <!--DataTable Code for display the expense Details-->
    <div id="aprovediv" class="col-md-12 a hide" style="background-color:rgba(51, 60, 125, 0.62);margin-top:0%;">
        <div class="col-md-2" style=" padding-left: 0px;">
            <label style="line-height:20px !important;color:white;margin-left:20px;margin-top: 10px;font-size: 12px">Select User :</label>
        </div>
        <div class="col-md-2" style="padding-right: 142px">
            <select class="form-text-box" id='typeExp' name="client" style="width: 175px;margin-top:5px;margin-bottom:5px;float:right;" onchange="showexpensDetailsofuser()">
                      <option value=0>--Select--</option>                              
                       <%for(var i=bilableusers.length-1;i>=0;i--)
                        {   var y,w;
                          if(bilableusers[i].Status==0){
                         
                           y= bilableusers[i].id; %> 
                      <option value="<%=bilableusers[i].id%>">
                        <%=bilableusers[i].firstName%> (Pending)
 
                      </option>
                        <%} if(bilableusers[i].Status==1)  { 
                    
                        if(y != bilableusers[i].id) {  w= bilableusers[i].id; %> 
                        <option value="<%=bilableusers[i].id%>">
                        <%=bilableusers[i].firstName%> (Approved)
                      </option>
                      <%} }if(bilableusers[i].Status==100){ 
                        if((y != bilableusers[i].id)&&(w != bilableusers[i].id)) { %> 
                        <option value="<%=bilableusers[i].id%>">
 
                        <%=bilableusers[i].firstName%> (Rejected)
                      </option>
                      <%}}}%>                                
               </select>
        </div>
        <div class='col-md-1'></div>
        <div class="col-md-4 hide" id="datetablediv" style="height:29px;width:270px;background-color:white;margin-top:3px;border-radius: 25px;">
            <!-- <div class="" style="height:40px;width:50px">-->
            <img src="../img/bug/left.jpg" class="shadow" style="" height="15px" width="15px" title=" Expense" onclick='getdateprevuser()'>
            <input type="hidden" id="hiddendatebuttonuser"><input disabled="disable" type='text' id="datebuttonuser" style="margin-top:3px;text-align: center;font-size:12px" class="shadow " value='' / onchange=" showexpensDetailsofuser()">

            <img src="../img/bug/Right.jpg" class="shadow" style="" height="15px" width="15px" title=" Expense" onclick='getdateuser()'>
            <span class="glyphicon glyphicon-calendar" style="" height="15px" width="15px" title="choose date" onclick='datepickerforotherUser()'></span>
        </div>
        <div class="col-md-1 hide" id='backbuton' style="float:right;">
         <button type='button' id="back" class="form-control" style="margin-top:2px;margin-bottom:2px;height:29px; background-color:#23527c;color:white; font-size:10px;float:right" onclick="back()" value='back'>Back</button>   
        </div>
    </div>
    <div class="col-md-2"> <button id="appbutton" style="margin-top:5px;" class="form-control hide" onclick="approvetheExpense(claimid,1)">Approve</button>
    </div>
    <div class="col-md-2"><button class="form-control hide" style="margin-top:5px;" onclick="back()">Back</button>
    </div>

    </div>

    <div id="showMessage" class="hide" style="height:px;width:200px;"><label id="showm" style="color:green;font-size:15px"></label></div>

    <div class="secondry-color" id="accordionsdata">
    <div class="se-pre-con"></div>
        <div style="margin-top: 10px;margin-left: 10px;margin-right: 10px">
            <input class="form-text-box" type="text" placeholder="search in this table" id="searchbox" style="float:right;width: 13%;margin-top: 10px;margin-bottom: 10px">
            <table style="margin-top: 10px" id="data_table" class="table table-hover table-striped table-bordered rceDataTable" cellspacing="0" width="100%">
                <!-- <thead>
                         <th>Expense Type</th>
                         <th>Trip/Assignment</th>
                         <th>From</th>
                         <th>To</th>
                         <th>Amount(INR)</th>
                         <th>Action</th>
                         <th>Status</th>
              </thead> -->
                <thead>


                    <tr style='font-size:12px'>

                        <th style="width:145px;">Expense Type</th>
                        <th style="width:150px;">Trip/Assignment</th>
                        <th>From Date</th>
                        <th>To Date</th>
                        <th>Total Amount</th>
                        <th>Action</th>
                        <th>Status</th>

                    </tr>

                </thead>
                <tbody id="orderbody">
                    <%strforclaimid="";%>
                        <%if(expenseDetails!=undefined){%>
                            <% for(var i=0;i<expenseDetails.length;i++) { if(expenseDetails[i].flag!= 1) {%>
                                <% strforclaimid=strforclaimid+ expenseDetails[i].expenseclaimedId+",";

                             %>
                                    <tr class="" id="<%=expenseDetails[i].id%>" style='height:20px;color:grey;font-size:12px;'>
                                        <td>
                                            <%=expenseDetails[i].description%>
                                        </td>
                                        <td>
                                            <%=expenseDetails[i].tripAssignment%>
                                        </td>
                                        <td>
                                            <%=(expenseDetails[i].fromdate)%>
                                        </td>
                                        <td>
                                            <%=(expenseDetails[i].toDate)%>
                                        </td>
                                        <td>
                                            <%=expenseDetails[i].totalExpense%>
                                        </td>
                                        <td>
                                            <%if((expenseDetails[i].ClaimedStatus==0)&&(expenseDetails[i].Submitted==1)){%>

                                                <input type='hidden' id='i' value='<%=expenseDetails[i].ClaimedStatus%>'>
                                                <%}%>
                                                    <%if((expenseDetails[i].ClaimedStatus!=0)&&(expenseDetails[i].Submitted==1)){%>

                                                        <input type='hidden' id='j' value='<%=expenseDetails[i].ClaimedStatus%>'>
                                                        <%}%>
                                                            <%if((expenseDetails[i].ClaimedStatus==101)&&(expenseDetails[i].Submitted==1)){%>

                                                                <input type='hidden' id='k' value='<%=expenseDetails[i].ClaimedStatus%>'>
                                                                <%}%>
                                                                    <%if((expenseDetails[i].ClaimedStatus==0)&&(expenseDetails[i].Submitted==1)){%>
                                                                        <input type='hidden' id='resubmitExpenseid' value='<%=expenseDetails[i].expenseclaimId%>'>
                                                                        <%}%>
                                                                            <%if((expenseDetails[i].Submitted!=1)||(expenseDetails[i].flag==2)){%>
                                                                                <a style='padding-left:6px'></a><input type='hidden' value="+expenseDetails[i].id+" id='a"+expenseDetails[i].id+"'><span id='a1' class='glyphicon glyphicon-trash' style='color:red;height:10px' onclick='DeleteExpense(<%=expenseDetails[i].expenseType%>,<%=expenseDetails[i].expId%>,<%=expenseDetails[i].expenseclaimId%>);' data-target='#myModal1' title='Delete Expense'></span>
                                                                                <a style='padding-left:6px'></a><input type='hidden' value="+expenseDetails[i].id+" id='a"+expenseDetails[i].id+"'><span id='a2' class='glyphicon glyphicon-pencil' style='color:red;height:10px' onclick='selecthotelExpense(<%=expenseDetails[i].expenseType%>,<%=expenseDetails[i].expId%>,<%=expenseDetails[i].expenseclaimId%>);' title='Edit Expense'></span>
                                                                                <a style='padding-left:6px'></a><input type='hidden' value="+expenseDetails[i].id+" id='a"+expenseDetails[i].id+"'><span id='a3' class='glyphicon glyphicon-file' style='color:red;height:10px' onclick='showAttechmentmodel(<%=expenseDetails[i].id%>);' title='Attach Bill'></span>

                                                                                <a style='padding-left:6px'></a><input type='hidden' value="+expenseDetails[i].id+" id='a"+expenseDetails[i].id+"'><span id='a5' class='glyphicon glyphicon-copy' style='color:red;height:10px' onclick='selecthotelExpenseforCopy(<%=expenseDetails[i].expenseType%>,<%=expenseDetails[i].expId%>,<%=expenseDetails[i].expenseclaimId%>);' title='Copy Expense'></span>
                                                                                <input type="hidden" value="<%=expenseDetails[i].expenseclaimId%>" name="claimidforuser" id="ipn">
                                                                                <% }%>
                                                                                    <%if(expenseDetails[i].anyFile!=undefined){%>
                                                                                        <a style='padding-left:6px' href='/attach/<%=expenseDetails[i].anyFile%>' Download><input type='hidden' value="+expenseDetails[i].id+" id='a"+expenseDetails[i].id+"'><span id='a4' class='glyphicon glyphicon-download-alt' style='color:red;height:10px' title='Download Bill'></span></a>
                                                                                        <%}if((expenseDetails[i].Submitted==1)&&(expenseDetails[i].f1!=0)){%>
                                                                                            <a style='padding-left:6px'></a><input type='hidden' value="+expenseDetails[i].id+" id='a"+expenseDetails[i].id+"'><span id='a5' class='glyphicon glyphicon-comment' style='color:#23527c;height:10px' onclick='showCommentandRemark(<%=expenseDetails[i].expenseclaimId%>);' title=' Comment'></span>
                                                                                            <% }%>
                                        </td>
                                        <td>
                                            <!---->
                                            <% if((expenseDetails[i].ClaimedStatus==0)&&(expenseDetails[i].Submitted==1)&&(expenseDetails[i].f1!=0)){%>
                                                Pending on Mr. <i style='color:#23527c'><%=penddinguser[0].firstName%></i></td>
                                        <% }%>
                                            <% if(((expenseDetails[i].Submitted==0)||(expenseDetails[i].f1==0))&&(expenseDetails[i].ClaimedStatus!=101)){%>
                                                Draft</td>
                                                <% }%>
                                                    <%if((expenseDetails[i].ClaimedStatus<100)&&(expenseDetails[i].ClaimedStatus>0)&&(expenseDetails[i].Submitted==1)&&(expenseDetails[i].f1!=0)){%>
                                                        Pending on Mr.<i style='color:#23527c'>
                                                        <%=penddinguser[0].firstName%></i> <span class='numberCircle' style='padding-left:6px;padding-right:6px;height:15px;width:10px; border: 2px solid;border-radius: 100%;color:green;font-size:10px;' title='Approved on  <%=expenseDetails[i].ClaimedStatus%> Level approved by Mr. <%=approveBy[0].firstName%>'><%=expenseDetails[i].ClaimedStatus%></span></td>
                                                            <% }%>
                                                                <% if((expenseDetails[i].ClaimedStatus==11)&&(expenseDetails[i].Submitted==1)&&(expenseDetails[i].f1!=0)){%>
                                                                    Approved by manager</td>
                                                                    <% }%>
                                                                        <%  if((expenseDetails[i].ClaimedStatus==100)&&(expenseDetails[i].Submitted==1)&&(expenseDetails[i].f1!=0)){%>
                                                                         <input type='hidden' id='expjs' value='<%=expenseDetails[i].expenseclaimId%>'>
                                                                            Approved by finance<span class='glyphicon glyphicon-ok' style='padding-left:20px;height:20px;color:green;font-size:10px;' title='Final Approved'></span></td>
                                                                            <% }%>
                                                                                <%if(((expenseDetails[i].ClaimedStatus==10)||(expenseDetails[i].ClaimedStatus==101))&&(expenseDetails[i].f1==0)){%>
                                                                                    Rejected By Mr. <i style='color:#23527c'> <%=rejectedBy[0].firstName%></i>
                                                                                     
                                                                                    </td>
                                                                                    <% }%>
                                                                                        </td>

                                    </tr>
                                    <% }}} %>

                </tbody>
            </table>
        </div>
    </div>


    <div class="secondry-color hide" id="accordions">
        <div style="margin-left: 10px;margin-right: 10px">
            <input class="form-text-box" type="text" placeholder="search in this table" id="searchbox1" style="float:right;width: 13%;margin-top: 10px;margin-bottom: 10px">
            <table class="table table-hover table-striped table-bordered rceDataTable" cellpadding="0" cellspacing="0" border="0" id="bugtable">

            </table>
        </div>
    </div>
    <!--header-->
    <div id="aprovedivapp" class="col-md-12 a hide" style="background-color:rgba(51, 60, 125, 0.62);margin-top:-.1%;">
        <div class="col-md-2" style=" padding-left: 0px;">
            <label style="line-height:20px !important;color:white;margin-left:20px;margin-top: 10px;font-size: 12px">Select User :</label>
        </div>
        <div class="col-md-2" style="padding-right: 142px">
            <select class="form-text-box" id='typeExpapp' name="client" style="width: 175px;margin-top:5px;margin-bottom:5px;float:right;" onchange="showExpenseforapprover()">
                      <option value=0>--Select--</option>                              
                       <%for(var i=bilableusers.length-1;i>=0;i--)
                        {   var y,w;
                          if(bilableusers[i].Status==0){
                         
                           y= bilableusers[i].id; %> 
                      <option value="<%=bilableusers[i].id%>">
                        <%=bilableusers[i].firstName%> (Pending)
 
                      </option>
                        <%} if(bilableusers[i].Status==1)  { 
                    
                        if(y != bilableusers[i].id) {  w= bilableusers[i].id; %> 
                        <option value="<%=bilableusers[i].id%>">
                        <%=bilableusers[i].firstName%> (Approved)
                      </option>
                      <%} }if(bilableusers[i].Status==100){ 
                        if((y != bilableusers[i].id)&&(w != bilableusers[i].id)) { %> 
                        <option value="<%=bilableusers[i].id%>">
 
                        <%=bilableusers[i].firstName%> (Rejected)
                      </option>
                      <%}}}%>                                
               </select>
        </div>
        <div class='col-md-1'></div>
        <div class="col-md-4" id="datetabledivapp" style="height:29px;width:270px;background-color:white;margin-top:3px;border-radius: 25px;">
            <!-- <div class="" style="height:40px;width:50px">-->
            <img src="../img/bug/left.jpg" class="shadow" style="" height="15px" width="15px" title=" Expense" onclick='getdateprevuserapp()'>
            <input type="hidden" id="hiddendatebuttonuserapp"><input disabled="disable" type='text' id="datebuttonuserapp" style="margin-top:3px;text-align: center;font-size:12px" class="shadow " value='' / onchange=" showexpensDetailsofuserapp()">

            <img src="../img/bug/Right.jpg" class="shadow" style="" height="15px" width="15px" title=" Expense" onclick='getdateuserapp()'>
            <span class="glyphicon glyphicon-calendar" style="" height="15px" width="15px" title="choose date" onclick='datepickerforotherUserapp()'></span>
        </div>
        <div class="col-md-1 hide" id='backbuton' style="float:right;">
         <button type='button' id="backapp" class="form-control" style="margin-top:2px;margin-bottom:2px;height:29px; background-color:#23527c;color:white; font-size:10px;float:right" onclick="back()" value='back'>Back</button>   
        </div>
    </div>
    <!--header end-->
    <!--home page-->
     <div class="secondry-color hide" id="accordionshome">
        <div style="margin-left: 10px;margin-right: 10px">
        <label style="width: 13%;margin-top: 10px;margin-bottom: 10px;color:#f04050;margin-left: 597px;">Expense Status</label>
            <input class="form-text-box" type="text" placeholder="search in this table" id="searchboxhome" style="float:right;width: 13%;margin-top: 10px;margin-bottom: 10px">
            <table class="table table-hover table-striped table-bordered rceDataTable" cellpadding="0" cellspacing="0" border="0" id="homeTable">

            </table>
        </div>
    </div>
    <!--end home page-->
    <div id="totalandaddEX1" class="hide col-md-12 a" style="background-color:rgba(51, 60, 125, 0.62);height:36px; 
    border-bottom:solid #f05f40;"></div>
    <div id="totalandaddEX" class="col-md-12 a" style="background-color:rgba(51, 60, 125, 0.62);height:36px; 
    border-bottom:solid #f05f40;">
        <div class="col-md-2">
            <label id='explabel' style="line-height:20px !important;color:white;margin-left:40px;margin-top: 8px;font-size: 12px">Select Expense Type:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
        </div>
        <div class="col-md-3">
            <select class="form-text-box" style="margin-top:4px;margin-bottom:3px;  float:left;width:200px;" id='typeEx' name="client" onchange="showexpensDetails()">
                      <option value='0'>------Select------</option>                              
                        <%for(var i=0;i<expenseType.length;i++)
                        {%>
                      <option  value="<%=expenseType[i].id%>">
                        <%=expenseType[i].description%>
                        </option>
                        <%}%>                               
               </select>
        </div>
        <div class="col-md-4">
        </div>
        <div class="col-md-2"> <label class='hide' style="line-height:42px !important;">Total Expense:<span Style="font-size:10px;margin-bottom:10px; color:red"></span></label>
        </div>
        <!--div class="col-md-2">
       <input type="text" id='totalExpenseforuser' class="form-control hide" style="margin-top:5px;" value=""> 
       </div-->
        <div id='submitbutton' class="col-md-1 hide" style="float:right;"><input type='button' id="submitedbutton" class="form-control" style="margin-top:3px;margin-bottom:5px;height:29px; background-color:#23527c;color:white; font-size:10px;float:right" onclick="submitExpense()" value='Submit'>
        </div>
        <div id='submitbuttonresub' class="col-md-1 hide" style="float:right;">
            <a href="/expensenew?expin=0"><input type='button' id="submit" class="form-control" style="margin-top:3px;margin-bottom:5px;height:29px; background-color:#23527c;color:white; font-size:10px;float:right" onclick="" value='Resubmit'></a>
        </div>
        <div id='submitbut' class="col-md-1 hide" style="float:right;"><button type='button' id="submit11" class="form-control" style="margin-top:3px;margin-bottom:5px;height:29px; background-color:#23527c;color:white; font-size:10px;float:right" onclick="resubmittheExpense()" value='Edit&Add'>Edit/Add</button>
        </div>
        <!--hr style="max-width:100%;margin-top:2.9%;border-color:##f05f40"-->
    </div>

    <!-- Form for Hotel Expense Jogendra Singhaction="/insertExpense123?expid=1"-->

    <form method="post" id='hotel'>
        <div class="modal fade" id="myModal1" role="dialog" style="margin-left:;">
            <div style="height:auto;width:800px;margin-left:250px;margin-top:30px;z-index:1;position:absolute" class="panel panel-default">
                <div class="panel-heading" id="panelHead1" role="button" style="background-color:#f05f40; color:white; height:40px;">
                    <center>
                        <label id="head4" class="modal-title" style="color:white;font-size:12px;"><b>Expense Details</b></label>
                        <span data-dismiss="modal" class="glyphicon glyphicon-remove" style='height=20px;float:right;color:black;'></span>
                    </center>
                    <input Type="hidden" id="hfornightDate" name="fortnightDate" value="0">
                    <input Type="hidden" id="flaghotel" name="edit" value="0">
                    <input type="hidden" id="exthotel" name="exthotel" value="0">
                    <input type="hidden" id="extclaimhotel" name="extclaimhotel" value="0">
                    <input type="hidden" id="Maxhotel" value="0">
                    <input type="hidden" id="blabelhotel" value="0">
                </div>

                <div class="col-md-12 a" style="margin-top:20px;margin-bottam:20px;">
                    <div class="col-md-3">
                        <label class="form-Label">Expense Type:-</label>
                    </div>
                    <div class="col-md-3">
                        <label class="form-Label" style="">Hotel</label>
                    </div>
                    <div class="col-md-2 fieldgroup">
                        <label class="form-Label">Trip/Assignment:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-4">
                        <select class="form-text-box" for="hoteltrip" id='trip1' name="hoteltrip" required/>
                        <option value="">
                            --Select--
                        </option>
                        <%for(var i=0;i<trip.length;i++)
                        {%>
                            <option value="<%=trip[i].WBSId%>">
                                <%=trip[i].WBSName%>
                            </option>
                            <%}%>
                                </select>
                    </div>
                </div>
                <div class="col-md-12 a" style="margin-top:20px;margin-bottam:20px;">
                    <div class="col-md-2">
                        <label class="form-Label">From Date:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-4">
                        <input type="text" maxlength="45" class="form-text-box datepicker" id="from" for="formDate" name="fromDate" onchange='changefirstdatehotel()' required/>
                    </div>
                    <div class="col-md-2">
                        <label class="form-Label">To Date:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-4">
                        <input type="text" maxlength="150" class="form-text-box datepicker" for="toDate" id="to" name="toDate" onblur="dateVarifyofHotel();" required/>
                    </div>
                </div>
                <div id="hotel" class="">

                    <div class="col-md-12 a" style="margin-top:20px;margin-bottam:20px;">
                        <div class="col-md-2">
                            <label class="form-Label">Hotel Name:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-4">
                            <select class="form-text-box" for="hotelName" id='hotelname' name="hotelName" required/>
                            <option value="">
                                --Select--
                            </option>
                            <%for(var i=0;i<hotelType.length;i++)
                        {%>
                                <option value="<%=hotelType[i].id%>">
                                    <%=hotelType[i].description%>
                                </option>
                                <%}%>


                                    </select>
                        </div>
                        <div class="col-md-2">
                            <label class="form-Label">Reason for Stay:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-4">
                            <input type="text" maxlength="150" class="form-text-box" id="hreason" for="hotelReason" name="hotelReason" required />
                        </div>
                    </div>
                    </br>
                    <div class="col-md-12 a" style="margin-top:20px;margin-bottam:20px;">
                        <div class="col-md-2">
                            <label class="form-Label">Rate Per Day:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-4">
                            <input type="number" min="1" maxlength="45" class="form-text-box" id="hrate" for="hotelperDayRate" name="hotelperDayRate" onblur="changeCurrency()" required />
                        </div>
                        <div class="col-md-3 hide">
                            <label class="form-Label">If Not Then Other:</label>
                        </div>
                        <div class="col-md-3 hide">
                            <input type="text" maxlength="45" class="form-control" id="hifno" for="hotelifOther" name="hotelifOther" />
                        </div>

                        <div class="col-md-2">
                            <label class="form-Label">Total Days:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-4">
                            <input type="number" min="1" maxlength="45" class="form-text-box" id="htotalday" for="hotelTotalDay" name="hotelTotalDay" onblur="changeCurrency()" readonly required/>
                        </div>
                    </div>
                </div>

                <div id="d1" class="col-md-12 a " style="margin-top:20px;margin-bottam:20px;">
                    <div class="col-md-2">
                        <label class="form-Label">Currency:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-4">
                        <select class="form-text-box" id='hotelcu' name="hotelCurrency" for="hotelCurrency1" onchange="changeCurrency()" required/>

                        <option value="" acualvalue='0'>--Select--</option>
                        <%for(var i=0;i<currency.length;i++){%>
                            <option value="<%=currency[i].id%>" acualvalue="<%=currency[i].currencyRate%>">
                                <%=currency[i].description1%>
                            </option>
                            <%}%>


                                </select>
                    </div>

                    <div class="col-md-2">
                        <label class="form-Label">Total Expense :<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        <input type="hidden" name="hotelexpensetypeid" value="1">
                    </div>
                    <div class="col-md-4">
                        <input type="number" min="1" step="any" maxlength="45" readonly class="form-text-box" id="htex" name="htex" required/>
                        <span class="inrs hide" style="padding-top:0px;width:30px;font-size: 10px;color:green">In INR</span>
                    </div>
                </div>


                <div id="footer" class="modal-footer" style="border-top:0px;">
                    <center>
                        <button id='cancel' type="reset" data-dismiss="modal" class="dismiss btn btn-default" style="background-color:#f05f40;color:black;padding-top: 4px; width:100px;height:30px;margin-top:10px;color:white">Cancel</button>
                        <button type="button" onclick="validateforhotel()" class="btn btn-default sub" style="margin-top:10px;background-color:#f05f40;color:black;padding-top: 4px; width:100px;height:30px;color:white">Add</button>
                    </center>
                </div>
            </div>
        </div>
        </div>
    </form>

    <!--end Hotel Expense Form-->
    <!--form for Travel Expense action="/insertExpense?expid=2"-->

    <form method="post" id='travelf'>
        <div class="modal fade" id="myModal2" role="dialog" style="margin-left:;">

            <div style="height:auto;width:800px;margin-left:250px;margin-top:30px;z-index:1;position:absolute" class="panel panel-default">
                <input type="hidden" name="travelexpensetypeid" value="2">
                <div class="panel-heading" id="panelHead1" role="button" style="background-color:#f05f40; color:white; height:40px;">
                    <center>
                        <label id="head4" class="modal-title" style="color:white;font-size:12px;"><b>Expense Details</b></label>
                        <span data-dismiss="modal" class="glyphicon glyphicon-remove" style='height=20px;float:right;color:black;'></span>
                    </center>
                    <input Type="hidden" id="tfornightDate" name="fortnightDate" value="0">
                    <input Type="hidden" id="flagtravel" name="edit" value="0">
                    <input type="hidden" id="exttravel" name="exthotel" value="0">
                    <input type="hidden" id="extclaimtravel" name="extclaimhotel" value="0">
                    <input type="hidden" id="MaxTravel" value="0">
                    <input type="hidden" id="blabelTravel" value="0">
                </div>

                <div class="col-md-12 a" style="margin-top:20px;margin-down:20px;">
                    <div class="col-md-2">
                        <label class="form-Label">Expense Type:-</label>
                    </div>
                    <div class="col-md-4">
                        <label class="form-Label" style="padding-top:5px;">Travel</label>
                    </div>
                    <div class="col-md-2">
                        <label class="form-Label">Trip/Assignment:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-4">
                        <select required class="form-text-box" id='traveltrip' name="traveltrip" />
                        <option value="">
                            --Select--
                        </option>

                        <%for(var i=0;i<trip.length;i++)
                        {%>
                            <option value="<%=trip[i].WBSId%>">
                                <%=trip[i].WBSName%>
                            </option>
                            <%}%>


                                </select>
                    </div>
                </div>

                <div class="col-md-12 a" style="margin-top:20px;margin-down:20px;">
                    <div class="col-md-2">
                        <label class="form-Label">From Date:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-4">
                        <input type="text" maxlength="45" class="form-text-box datepicker" id="fromdatefortravel" name="travelFromDate" onchange='changefirstdatetravel()' required />
                    </div>

                    <div class="col-md-2">
                        <label class="form-Label">To Date:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-4">
                        <input type="text" maxlength="150" class="form-text-box datepicker" id="tofortravel" name="travelToDate" onblur="dateVarifyofTravel()" required/>
                    </div>
                </div>

                <div id="travel" class="">

                    <div class="col-md-12 a" style="margin-top:20px;margin-down:20px;">
                        <div class="col-md-2">
                            <label class="form-Label">Travel Type:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-4">
                            <select class="form-text-box" id='traveltype' name="travelType" required/>
                            <option value="">
                                --Select--
                            </option>

                            <%for(var i=0;i<travelType.length;i++)
                        {%>
                                <option value="<%=travelType[i].id%>">
                                    <%=travelType[i].description%>
                                </option>
                                <%}%>


                                    </select>
                        </div>

                        <div class="col-md-2">
                            <label class="form-Label">Reason for Travel:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-4">
                            <input type="text" maxlength="45" class="form-text-box" id="travelre" name="travelReason" required />
                        </div>
                    </div>
                    <div class="col-md-12 a" style="margin-top:10px;">
                        <div class="col-md-2">
                            <label class="form-Label">Rate Per Day:<span Style="font-size:10px;margin-bottom:10px; color:red"></span></label>
                        </div>
                        <div class="col-md-4">
                            <input type="number" min="1" maxlength="45" class="form-text-box" id="travelrate" name="TravelRatePerDay" onblur="" required/>
                        </div>
                        <div class="col-md-3 hide">
                            <label class="form-Label">If Not Then Other:</label>
                        </div>
                        <div class="col-md-3 hide">
                            <input type="text" maxlength="45" class="form-text-box" id="travelif" name="travelIfNot" />
                        </div>
                        <!--/div-->
                        <!--/div>

               <div class="col-md-12 a"-->
                        <div class="col-md-2">
                            <label class="form-Label">Total Days:<span Style="font-size:10px;margin-bottom:10px; color:red"></span></label>
                        </div>
                        <div class="col-md-4">
                            <input type="number" min="1" maxlength="45" class="form-text-box" id="traveltday" name="travelTotalDay" onblur="" required/>
                        </div>
                    </div>



                    <div id="d1" class="col-md-12 a " style="margin-top:20px;margin-down:20px;">
                        <div class="col-md-2">
                            <label class="form-Label">Currency:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-4">
                            <select class="form-text-box" id='travelc' name="travelCurrency" onchange="changetravelcurrency()" required/>
                            <option value="" acualvalue='0'>
                                --Select--
                            </option>

                            <%for(var i=0;i<currency.length;i++){%>
                                <option value="<%=currency[i].id%>" acualvalue="<%=currency[i].currencyRate%>">
                                    <%=currency[i].description1%>
                                </option>
                                <%}%>


                                    </select>
                        </div>
                        <div class="col-md-2">
                            <label class="form-Label">Total Expense :<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-4">
                            <input type="number" min="1" step="any" maxlength="45" class="form-text-box" id="travelex" name="travelex" onchange="changeCurrencyforTravel()" required/>
                            <span class="inrs hide" style="padding-top:0px;width:30px;font-size: 10px;color:green">In INR</span>
                        </div>
                    </div>

                    <div id="footer" class="modal-footer" style="border-top:0px;">
                        <center>
                            <button id='cancel' type="reset" data-dismiss="modal" class="dismiss btn btn-default" style="background-color:#f05f40;color:black;padding-top: 4px; width:100px;height:30px;margin-top:10px;color:white">Cancel</button>
                            <button type="button" onclick="validatefortravel()" class="btn btn-default sub" style="margin-top:10px;background-color:#f05f40;color:black;padding-top: 4px; width:100px;height:30px;color:white">Add</button>
                        </center>
                    </div>
                </div>
            </div>
        </div>
    </form>

    <!--end Travel Expense Form-->
    <!--form for Phone Expense  action="/insertExpense?expid=4"-->

    <form method="post" id='phonef'>
        <div class="modal fade" id="myModal3" role="dialog" style="margin-left:;">
            <div style="height:auto;width:800px;margin-left:250px;margin-top:30px;z-index:1;position:absolute" class="panel panel-default">

                <div class="panel-heading" id="panelHead1" role="button" style="background-color:#f05f40; color:white; height:40px;">
                    <center>
                        <label id="head4" class="modal-title" style="color:white;font-size:12px;"><b>Expense Details</b></label>
                        <span data-dismiss="modal" class="glyphicon glyphicon-remove" style='height=20px;float:right;color:black;'></span>
                    </center>
                    <input Type="hidden" id="phfornightDate" name="fortnightDate" value="0">
                    <input Type="hidden" id="flagphone" name="edit" value="0">
                    <input type="hidden" id="extphone" name="exthotel" value="0">
                    <input type="hidden" id="extclaimphone" name="extclaimhotel" value="0">
                    <input type="hidden" id="MaxPhone" value="0">
                    <input type="hidden" id="blabelPhone" value="0">
                </div>

                <div class="col-md-12 a" style="margin-top:20px;margin-down:20px;">
                    <div class="col-md-2">
                        <label class="form-Label">Expense Type:-</label>
                    </div>
                    <div class="col-md-4">
                        <label class="form-Label" style="padding-top:5px;">Phone</label>
                    </div>
                    <input type="hidden" name="travelexpensetypeid" value="4">
                    <div class="col-md-2">
                        <label class="form-Label">Trip/Assignment:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-4">
                        <select class="form-text-box" id='phonetrip' name="phonetrip" required/>
                        <option value="">--Select--</option>

                        <%for(var i=0;i<trip.length;i++)
                        {%>
                            <option value="<%=trip[i].WBSId%>">
                                <%=trip[i].WBSName%>
                            </option>
                            <%}%>


                                </select>
                    </div>
                </div>

                <div class="col-md-12 a" style="margin-top:20px;margin-down:20px;">
                    <div class="col-md-2">
                        <label class="form-Label">From Date:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-4">
                        <input type="text" maxlength="45" class="form-text-box datepicker" id="fromdateforphone" name="phoneFromDate" onchange='changefirstdatephone()' required />
                    </div>

                    <div class="col-md-2">
                        <label class="form-Label">To Date:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-4">
                        <input type="text" maxlength="150" class="form-text-box datepicker" id="todateforphone" name="phoneToDate" onblur="dateVarifyofPhone()" required/>
                    </div>
                </div>

                <div id="d1" class="col-md-12 a " style="margin-top:20px;margin-down:20px;">
                    <div class="col-md-2">
                        <label class="form-Label">Currency:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-4">
                        <select class="form-text-box" id='callingc' name="phoneCurrency" onchange="changephonecurrency()" required/>
                        <option value="" acualvalue='0'>--Select--</option>

                        <%for(var i=0;i<currency.length;i++){%>
                            <option value="<%=currency[i].id%>" acualvalue="<%=currency[i].currencyRate%>">
                                <%=currency[i].description1%>
                            </option>
                            <%}%>


                                </select>
                    </div>
                    <div class="col-md-2">
                        <label class="form-Label">Total Expense :<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-4">
                        <!--<div class="col-md-2" style="width:150px"-->
                        <input type="number" min="1" maxlength="45" class="form-text-box" id="callingex" name="phoneExp" onblur="changeCurrencyforphone()" required/>
                        <!--div class="col-md-1" style="float:left;margin-top:10px; width:30px"-->
                        <span class="inrs hide" style="padding-top:0px;width:30px;font-size: 10px;color:green">In INR</span>
                    </div>
                </div>
                <div id="phone" class="">


                    <div class="col-md-12 a" style="margin-top:20px;margin-down:20px;">
                        <div class="col-md-2">
                            <label class="form-Label">Reason for Calling:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-4">
                            <input style="margin-top: 7px" type="text" maxlength="45" class="form-text-box" id="callingreason" name="phoneReason" required />
                        </div>


                    </div>
                </div>
                <div id="footer" class="modal-footer" style="border-top:0px;">
                    <center>
                        <button id='cancel' type="reset" data-dismiss="modal" class="dismiss btn btn-default" style="background-color:#f05f40;color:black;padding-top: 4px; width:100px;height:30px;margin-top:10px;color:white">Cancel</button>
                        <button type="button" onclick="validateforphone()" class="btn btn-default sub" style="margin-top:10px;background-color:#f05f40;color:black;padding-top: 4px; width:100px;height:30px;color:white">Add</button>
                    </center>
                </div>
            </div>
        </div>
        </div>
    </form>


    <!--end Phone Expense Form-->
    <!--form for Reimbursement for Self-driven Vehicle  Expense-->

    <form action="/insertExpense?expid=5" method="post" id='rsdf'>
        <div class="modal fade" id="myModal4" role="dialog" style="margin-left:;">
            <div style="height:auto;width:800px;margin-left:250px;margin-top:30px;z-index:1;position:absolute" class="panel panel-default">

                <div class="panel-heading" id="panelHead1" role="button" style="background-color:#f05f40; color:white; height:40px;">
                    <center>
                        <label id="head4" class="modal-title" style="color:white;font-size:12px;"><b>Expense Details</b></label>
                        <span data-dismiss="modal" class="glyphicon glyphicon-remove" style='height=20px;float:right;color:black;'></span>
                    </center>
                    <input Type="hidden" id="rsfornightDate" name="fortnightDate" value="0">
                    <input Type="hidden" id="flagrsd" name="edit" value="0">
                    <input type="hidden" id="extrsd" name="exthotel" value="0">
                    <input type="hidden" id="extclaimrsd" name="extclaimrsd" value="0">
                    <input type="hidden" name="travelexpensetypeid" value="5">
                    <input type="hidden" id="Maxrsd" value="0">
                    <input type="hidden" id="blabelrsd" value="0">
                </div>

                <div class="col-md-12 a" style="margin-top:20px;margin-down:20px;">
                    <div class="col-md-2">
                        <label class="form-Label">Expense Type:-</label>
                    </div>
                    <div class="col-md-4">
                        <label class="form-Label" style="padding-top:5px;">Reimbursement for Self-driven Vehicle</label>
                    </div>
                    <div class="col-md-2">
                        <label class="form-Label">Trip/Assignment:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-4">
                        <select class="form-text-box" id='rsdtrip' name="rsdtrip" required>
                                    <option value="">--Select--</option>
                               
                                              <%for(var i=0;i<trip.length;i++)
                        {%>
                      <option value="<%=trip[i].WBSId%>">
                        <%=trip[i].WBSName%>
                      </option>
                        <%}%> 
                                
                                
                            </select>
                    </div>
                </div>

                <div class="col-md-12 a" style="margin-top:20px;margin-down:20px;">
                    <div class="col-md-2">
                        <label class="form-Label">From Date:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-4">
                        <input type="text" maxlength="45" class="form-text-box datepicker" id="fromdateforrfd" name="rsdFromDate" onchange='changefirstdatersd()' required/>
                    </div>

                    <div class="col-md-2">
                        <label class="form-Label">To Date:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-4">
                        <input type="text" maxlength="150" class="form-text-box datepicker" id="todateforrfd" name="rsdToDate" onblur="dateVarifyofRsd()" required/>
                    </div>
                </div>

                <div id="rfd" class="">


                    <div class="col-md-12 a" style="margin-top:20px;margin-down:20px;">
                        <div class="col-md-2">
                            <label class="form-Label">Type:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-4">
                            <select class="form-text-box" id='rfdtypeof' onclick="tochangeTravelType()" name="rsdvehicle" required/>
                            <option value="">--Select--</option>
                            <option value="1">KM</option>
                            <option value="2">Parking</option>
                       


                                    </select>
                        </div>
                        <div class="col-md-2">
                            <label class="form-Label">Reason :<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-4">
                            <input type="text" maxlength="45" class="form-text-box" id="rfdreason" name="rsdReason" required />
                        </div>
                    </div>

                    <div class="col-md-12 a" style="margin-top:10px;margin-down:20px;" id="deasign">
                      <div class="col-md-2">
                            <label class="form-Label">Select Designation:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-4">
                            <select class="form-text-box" id='rateval' name="rsddes" onchange="changevaluedes()" required/>
                            <option value="">--Select--</option>

                            <%for(var i=0;i<designation.length;i++)
                        {%>
                                <option value="<%=designation[i].id%>" ratevalue="<%=designation[i].maximumBillableMandetory%>">
                                    <%=designation[i].description%>
                                </option>
                                <%}%>


                                    </select>
                        </div>
                        <div class="col-md-2">
                            <label class="form-Label">Per Km Rate :<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-4">
                            <input type="number" min="1" maxlength="45" class="form-text-box" id="rfdper" name="rsdKmRate" onblur="changeCurrencyforrsd()" readonly="readonly" required/>
                        </div>

                        <div class="col-md-3 hide">
                            <label class="form-Label">If Not Then Other:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-3 hide">
                            <input type="text" maxlength="45" class="form-text-box" id="rfdifnot" name="rsdifnot" />
                        </div>
                        <!--/div>

                    <div class="col-md-12 a"-->
                        
                    </div>



                    <div id="d1" class="col-md-12 a " style="margin-top:10px;margin-down:20px;">
                    <div class="col-md-2">
                            <label id="totalkm" class="form-Label">Total km Travel:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-4">
                            <input type="number" min="1" maxlength="45" class="form-text-box" id="rfdtotalkm" name="rsdtotal" onblur="changeCurrencyforrsd()" required/>
                        </div>
                        <div class="col-md-2">
                            <label class="form-Label">Currency:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-4">
                            <select class="form-text-box" id='rfdcu' name="rsdCurrency" onchange="changeCurrencyforrsd()" required>
                            <option value="" acualvalue='0'>--Select--</option>
                               
                                   <%for(var i=0;i<currency.length;i++){%>
                                    <option value="<%=currency[i].id%>" acualvalue="<%=currency[i].currencyRate%>">
                                        <%=currency[i].description1%>
                                    </option>
                                <%}%>
                                
                                
                            </select>
                        </div>
                    </div>
                    <div id="" class="col-md-12 a " style="margin-top:10px;margin-down:20px;">
                     <div class="col-md-2">
                            <label class="form-Label">Total Expense :<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-4">
                            <input type="number" min="1" step="any" maxlength="45" class="form-text-box" id="rfdext" name="rsdtex" required/>
                            <span class="inrs hide" style="padding-top:0px;width:30px;font-size: 10px;color:green">In INR</span>
                        </div>
                        </div>
                </div>

                <div id="footer" class="modal-footer" style="border-top:0px;">
                    <center>
                        <button id='cancel' type="reset" data-dismiss="modal" class="dismiss btn btn-default" style="background-color:#f05f40;color:black;padding-top: 4px; width:100px;height:30px;margin-top:10px;color:white">Cancel</button>
                        <button type="button" onclick="validateforrsd()" class="btn btn-default sub" style="margin-top:10px;background-color:#f05f40;color:black;padding-top: 4px; width:100px;height:30px;color:white">Add</button>
                    </center>
                </div>
            </div>
        </div>
        </div>
    </form>

    <!--end Reimbursement for Self-driven Vehicle Expense Form-->
    <!--form for Per Diem  Expense  action="/insertExpense?expid=6"-->

    <form method="post" id='deamf'>
        <div class="modal fade" id="myModal5" role="dialog" style="margin-left:;">

            <div style="height:auto;width:800px;margin-left:250px;margin-top:30px;z-index:1;position:absolute" class="panel panel-default">

                <div class="panel-heading" id="panelHead1" role="button" style="background-color:#f05f40; color:white; height:40px;">
                    <center>
                        <label id="head4" class="modal-title" style="color:white;font-size:12px;"><b>Expense Details</b></label>
                        <span data-dismiss="modal" class="glyphicon glyphicon-remove" style='height=20px;float:right;color:black;'></span>
                    </center>
                    <input Type="hidden" id="defornightDate" name="fortnightDate" value="0">
                    <input Type="hidden" id="flagperdiem" name="edit" value="0">
                    <input type="hidden" id="extperdiem" name="exthotel" value="0">
                    <input type="hidden" id="extclaimperdiem" name="extclaimhotel" value="0">
                    <input type="hidden" name="travelexpensetypeid" value="6">
                    <input type="hidden" id="Maxdiem" value="0">
                    <input type="hidden" id="blabeldiem" value="0">
                </div>

                <div class="col-md-12 a" style="margin-top:20px;margin-down:20px;">
                    <div class="col-md-2">
                        <label class="form-Label">Expense Type:-</label>
                    </div>
                    <div class="col-md-4">
                        <label class="form-Label" style="padding-top:5px;">Per Diem</label>
                    </div>
                    <div class="col-md-2">
                        <label class="form-Label">Trip/Assignment:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-4">
                        <select class="form-text-box" id='pertrip' name="perdiemtrip" required>
                                    <option value="">--Select--</option>
                               
                                              <%for(var i=0;i<trip.length;i++)
                        {%>
                      <option value="<%=trip[i].WBSId%>">
                        <%=trip[i].WBSName%>
                      </option>
                        <%}%> 
                                
                                
                            </select>
                    </div>
                </div>

                <div class="col-md-12 a" style="margin-top:20px;margin-down:20px;">
                    <div class="col-md-2">
                        <label class="form-Label">From Date:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-4">
                        <input type="text" maxlength="45" class="form-text-box datepicker" id="fromdateperdiem" name="perdiemFromDate" onchange='changefirstdatedeam()' required/>
                    </div>

                    <div class="col-md-2">
                        <label class="form-Label">To Date:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-4">
                        <input type="text" maxlength="150" class="form-text-box datepicker" id="todateperdiem" name="perdiemToDate" onblur="dateVarifyofPerdiem()" required/>
                    </div>
                </div>

                <div id="diem" class="">




                    <div class="col-md-12 a" style="margin-top:20px;margin-down:20px;">
                        <div class="col-md-2">
                            <label class="form-Label">Hotel Name:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-4">
                            <select class="form-text-box" id='diemhotelname' name="perdiemHotelName" required>
                                    <option value="">--Select--</option>
                               
                                                            <%for(var i=0;i<hotelType.length;i++)
                        {%>
                      <option value="<%=hotelType[i].id%>">
                        <%=hotelType[i].description%>
                      </option>
                        <%}%> 
                                
                                
                            </select>
                        </div>


                        <div class="col-md-2">
                            <label class="form-Label">Reason for Stay:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-4">
                            <input type="text" maxlength="190" class="form-text-box" id="diemreasonstay" name="perdiemReason" required />
                        </div>
                    </div>


                    <div class="col-md-12 a" style="margin-top:20px;margin-down:20px;">
                        <div class="col-md-2">
                            <label class="form-Label">Per Diem Rate:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-4">
                            <input type="number" min="1" maxlength="45" class="form-text-box" id="diemrate1" name="perdiemRate" onblur="changeCurrencyforDiem()" required/>
                        </div>
                        <div class="col-md-3 hide">
                            <label class="form-Label">If Not Then Other:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-3 hide">
                            <input type="text" maxlength="150" class="form-text-box" id="diemif1" name="perdiemIfNot" />
                        </div>
                        <!--/div>

                   <div class="col-md-12 a"-->
                        <div class="col-md-2">
                            <label class="form-Label">Total Days:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-4">
                            <input type="number" min="1" maxlength="45" readonly class="form-text-box" id="diemday1" name="perdiemtotal" onblur="changeCurrencyforDiem()" required/>
                        </div>
                    </div>


                </div>

                <div id="d1" class="col-md-12 a " style="margin-top:20px;margin-down:20px;">
                    <div class="col-md-2">
                        <label class="form-Label">Currency:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-4">
                        <select class="form-text-box" id='diemcu' name="perdiemCurrency" onchange="changeCurrencyforDiem()" required/>
                        <option value="" acualvalue='0'>--Select--</option>

                        <%for(var i=0;i<currency.length;i++){%>
                            <option value="<%=currency[i].id%>" acualvalue="<%=currency[i].currencyRate%>">
                                <%=currency[i].description1%>
                            </option>
                            <%}%>


                                </select>
                    </div>
                    <div class="col-md-2">
                        <label class="form-Label">Total Expense :<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-4">
                        <input type="number" min="1" step="any" maxlength="45" readonly class="form-text-box" id="diemtotal1" name="perdiemtex" required/>
                        <span class="inrs hide" style="padding-top:0px;width:30px;font-size: 10px;color:green">In INR</span>
                    </div>
                </div>
                <div id="footer" class="modal-footer" style="border-top:0px;">
                    <center>
                        <button id='cancel' type="reset" data-dismiss="modal" class="dismiss btn btn-default" style="background-color:#f05f40;color:black;padding-top: 4px; width:100px;height:30px;margin-top:10px;color:white">Cancel</button>
                        <button type="button" onclick="validatefordeim()" class="btn btn-default sub" style="margin-top:10px;background-color:#f05f40;color:black;padding-top: 4px; width:100px;height:30px;color:white">Add</button>
                    </center>
                </div>
            </div>
        </div>
        </div>
    </form>

    <!--end Per Diem Expense Form-->
    <!--form for Food/Entertainment action="/insertExpense?expid=3"  Expense-->

    <form method="post" id='foodf'>

        <div class="modal fade" id="myModal6" role="dialog" style="margin-left:;">

            <div style="height:auto;width:800px;margin-left:250px;margin-top:30px;z-index:1;position:absolute" class="panel panel-default">

                <div class="panel-heading" id="panelHead1" role="button" style="background-color:#f05f40; color:white; height:40px;">
                    <center>
                        <label id="head4" class="modal-title" style="color:white;font-size:12px;"><b>Expense Details</b></label>
                        <span data-dismiss="modal" class="glyphicon glyphicon-remove" style='height=20px;float:right;color:black;'></span>
                    </center>
                    <input Type="hidden" id="ffornightDate" name="fortnightDate" value="0">
                    <input Type="hidden" id="flagfood" name="edit" value="0">
                    <input type="hidden" id="extfood" name="exthotel" value="0">
                    <input type="hidden" id="extclaimfood" name="extclaimhotel" value="0">
                    <input type="hidden" name="travelexpensetypeid" value="3">
                    <input type="hidden" id="Maxfood" value="0">
                    <input type="hidden" id="blabelfood" value="0">
                </div>

                <div class="col-md-12 a" style="margin-top:20px;margin-down:20px;">
                    <div class="col-md-2">
                        <label class="form-Label">Expense Type:-</label>
                    </div>
                    <div class="col-md-4">
                        <label class="form-Label" style="padding-top:5px;">Food/Entertainment</label>
                    </div>
                    <div class="col-md-2">
                        <label class="form-Label">Trip/Assignment:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-4">
                        <select class="form-text-box" id='foodtrip' name="foodtrip" required/>
                        <option value="">--Select--</option>

                        <%for(var i=0;i<trip.length;i++)
                        {%>
                            <option value="<%=trip[i].WBSId%>">
                                <%=trip[i].WBSName%>
                            </option>
                            <%}%>


                                </select>
                    </div>
                </div>

                <div class="col-md-12 a" style="margin-top:20px;margin-down:20px;">
                    <div class="col-md-2">
                        <label class="form-Label">From Date:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-4">
                        <input type="text" maxlength="45" class="form-text-box datepicker" id="fromfood" name="foodFromDate" onchange='changefirstdatefood()' required/>
                    </div>

                    <div class="col-md-2">
                        <label class="form-Label">To Date:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-4">
                        <input type="text" maxlength="150" class="form-text-box datepicker" id="tofood" name="foodToDate" onblur="dateVarifyofFood()" required/>
                    </div>
                </div>

                <div id="food" class="">
                    <div id="d1" class="col-md-12 a " style="margin-top:20px;margin-down:20px;">
                        <div class="col-md-2">
                            <label class="form-Label">Currency:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-4">
                            <select class="form-text-box" id='foodcu1' name="foodCurrency" onchange="changefoodcurrency()" required>
                                   <option value="" acualvalue='0'>--Select--</option>
                               
                                   <%for(var i=0;i<currency.length;i++){%>
                                    <option value="<%=currency[i].id%>" acualvalue="<%=currency[i].currencyRate%>">
                                        <%=currency[i].description1%>
                                    </option>
                                <%}%>
                                
                                
                            </select>
                        </div>

                        <div class="col-md-2">
                            <label class="form-Label">Total Expense :<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-4">
                            <input type="number" min="1" step="any" maxlength="45" class="form-text-box" id="foodex1" name="foodtex" required onblur='changeCurrencyforfood()' />
                            <span class="inrs hide" style="padding-top:0px;width:30px;font-size: 10px;color:green">In INR</span>
                        </div>
                    </div>

                    <div class="col-md-12 a" style="margin-top:10px;">
                        <div class="col-md-4">
                            <label class="form-Label">Reason for Fooding/entertainment:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-4">
                            <input style="margin-top: 7px" type="text" maxlength="45" class="form-text-box" id="foodre" name="foodReason" required />
                        </div>
                    </div>
                    <div id="footer" class="modal-footer" style="border-top:0px;">
                        <center>
                            <button id='cancel' type="reset" data-dismiss="modal" class="dismiss btn btn-default" style="background-color:#f05f40;color:black;padding-top: 4px; width:100px;height:30px;margin-top:10px;color:white">Cancel</button>
                            <button type="button" onclick="validateforfood()" class="btn btn-default sub" style="margin-top:10px;background-color:#f05f40;color:black;padding-top: 4px; width:100px;height:30px;color:white">Add</button>
                        </center>
                    </div>
                </div>
            </div>
        </div>
    </form>


    <!--end Food/Entertainment Expense Form-->
    <!--form for other Expense  action="/insertExpense?expid=7"-->

    <form method="post" id='otherf'>

        <div class="modal fade" id="myModal7" role="dialog" style="margin-left:;">

            <div style="height:auto;width:800px;margin-left:250px;margin-top:30px;z-index:1;position:absolute" class="panel panel-default">

                <div class="panel-heading" id="panelHead1" role="button" style="background-color:#f05f40; color:white; height:40px;">
                    <center>
                        <label id="head4" class="modal-title" style="color:white;font-size:12px; padding-bottom:15px;"><b>Expense Details</b></label>
                        <span data-dismiss="modal" class="glyphicon glyphicon-remove" style='height=20px;float:right;color:black;'></span>
                    </center>
                    <input Type="hidden" id="ofornightDate" name="fortnightDate" value="0">
                    <input Type="hidden" id="flagother" name="edit" value="0">
                    <input type="hidden" id="extother" name="exthotel" value="0">
                    <input type="hidden" id="extclaimother" name="extclaimhotel" value="0">
                    <input type="hidden" name="travelexpensetypeid" value="7" id='anyotherex'>
                    <input type="hidden" id="Maxother" value="0">
                    <input type="hidden" id="blabelother" value="0">
                </div>

                <div class="col-md-12 a" style="margin-top:20px;margin-down:20px;">
                    <div class="col-md-2">
                        <label class="form-Label">Expense Type:-</label>
                    </div>
                    <div class="col-md-4">
                        <label id='otherlavel' class="form-Label" style="padding-top:5px;">Other</label>
                    </div>
                    <div class="col-md-2">
                        <label class="form-Label">Trip/Assignment:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-4">
                        <select class="form-text-box" id='othertrip' name="othertrip" required/>
                        <option value="">--Select--</option>

                        <%for(var i=0;i<trip.length;i++)
                        {%>
                            <option value="<%=trip[i].WBSId%>">
                                <%=trip[i].WBSName%>
                            </option>
                            <%}%>


                                </select>
                    </div>
                </div>

                <div class="col-md-12 a" style="margin-top:20px;margin-down:20px;">
                    <div class="col-md-2">
                        <label class="form-Label">From Date:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-4">
                        <input type="text" maxlength="45" class="form-text-box datepicker" id="fromother" name="otherFromDate" onchange='changefirstdateother()' required/>
                    </div>

                    <div class="col-md-2">
                        <label class="form-Label">To Date:<span Style="font-size:10px;margin-bottom:10px;padding-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-4">
                        <input type="text" maxlength="150" class="form-text-box datepicker" id="otherToDate" name="otherToDate" onblur="dateVarifyofOther()" required/>
                    </div>
                </div>

                <div id="other" class="">
                    <div id="d1" class="col-md-12 a " style="margin-top:19px;margin-down:20px;">
                        <div class="col-md-2">
                            <label class="form-Label">Currency:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-4">
                            <select class="form-text-box" id='othercu1' name="otherCurrency" onchange="changeothercurrency()" required/>
                            <option value="" acualvalue='0'>--Select--</option>

                            <%for(var i=0;i<currency.length;i++){%>
                                <option value="<%=currency[i].id%>" acualvalue="<%=currency[i].currencyRate%>">
                                    <%=currency[i].description1%>
                                </option>
                                <%}%>


                                    </select>
                        </div>
                        <div class="col-md-2">
                            <label class="form-Label">Total Expense :<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-4">
                            <input type="number" min="1" step="any" maxlength="45" class="form-text-box" id="otherex1" name="othertex" required onblur='changeCurrencyforOther()' />
                            <span class="inrs hide" style="padding-top:0px;width:30px;font-size: 10px;color:green">In INR</span>
                        </div>
                    </div>

                </div>
                <div class="col-md-12 a" style="margin-top:15px;margin-down:20px;">
                    <div class="col-md-2">
                        <label class="form-Label">Reason for Expense:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-4">
                        <input style="margin-top: 7px" type="text" maxlength="45" class="form-text-box" id="otherreason" name="otherReason" required />
                    </div>
                </div>

                <div id="footer" class="modal-footer" style="border-top:0px;">
                    <center>
                        <button id='cancel' type="reset" data-dismiss="modal" class="dismiss btn btn-default" style="background-color:#f05f40;color:black;padding-top: 4px; width:100px;height:30px;margin-top:10px;color:white">Cancel</button>
                        <button type="button" onclick="validateforother()" class="btn btn-default sub" style="margin-top:10px;background-color:#f05f40;color:black;padding-top: 4px; width:100px;height:30px;color:white">Add</button>
                    </center>
                </div>
            </div>
        </div>
        </div>
    </form>

    <!--end Food/Entertainment Expense Form-->
    <!--form for Document Attachment Expense-->

    <form action="/fileAttechment" id="attachment" method="post" name="rbug" enctype="multipart/form-data">
        <div class="modal fade" id="myModal10" role="dialog" style="margin-left:;">

            <div style="height:auto;width:500px;margin-left:400px;margin-top:30px;z-index:1;position:absolute" class="panel panel-default">

                <div class="panel-heading" id="panelHead1" role="button" style="background-color:#f05f40; color:white; height:40px;">
                    <center>
                        <label id="head4" class="modal-title" style="color:white;font-size:12px;"><b>Upload Attachment</b></label>
                        <span data-dismiss="modal" class="glyphicon glyphicon-remove" style='height=20px;float:right;color:black;'></span>
                    </center>
                    <input Type="hidden" id="claimeid" name="claimedid" value="0">

                </div>

                <div class="row " style="padding-top:10px;color:grey;padding-left:30px" align="left">
                    <div class="col-md-1 glyphicon glyphicon-folder-open" style="color:grey;">
                    </div>
                    <div class="col-md-4"><label style="font-size:10px;">Attach Files</label>
                    </div>
                    <div class="col-md-4"><input id="attachfile" type="file" name="comment-upload" class="upload" style="width: 250px;" />
                    </div>
                </div>

                <div id="footer" class="modal-footer" style="border-top:0px;">
                    <center>
                        <button id='cancel' type="reset" data-dismiss="modal" class="dismiss btn btn-default" style="background-color:#f05f40;color:black;padding-top: 4px; width:100px;height:30px;margin-top:10px;color:white">Cancel</button>
                        <button type="button" class="btn btn-default" style="margin-top:10px;background-color:#f05f40;color:black;padding-top: 4px; width:100px;height:30px;color:white" onclick="return tocheckAttachment()">Submit</button>
                    </center>
                </div>
            </div>
        </div>

    </form>

    <!--end Attachment Expense Form-->

    <!--description form-->
    <form action="/expenseIndex/isertExpense?expid=7" method="post">

        <div class="modal fade" id="myModal7" role="dialog" style="margin-left:;">

            <div style="height:auto;width:800px;margin-left:250px;margin-top:30px;z-index:1;position:absolute" class="panel panel-default">

                <div class="panel-heading" id="panelHead1" role="button" style="background-color:#f05f40; color:white; height:40px;">
                    <center>
                        <label id="head4" class="modal-title" style="color:white;font-size:12px;"><b style="padding-bottom: 10px">Expense Details</b></label>
                    </center>
                    <input Type="hidden" id="flagother" name="edit" value="0">
                    <input type="hidden" id="extother" name="exthotel" value="0">
                    <input type="hidden" name="travelexpensetypeid" value="7">
                </div>

                <div class="col-md-12 a">
                    <div class="col-md-3">
                        <label style="line-height:42px !important;">Expense Type:-</label>
                    </div>
                    <div class="col-md-3">
                        <label style="line-height:42px !important;">Other</label>
                    </div>
                    <div class="col-md-3">
                        <label style="line-height:42px !important;">Trip/Assignment:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-3">
                        <select class="form-control" style="margin-top:10px;" id='othertrip' name="othertrip" style="width:200px !important;" required/>
                        <option value="">--Select--</option>

                        <%for(var i=0;i<trip.length;i++)
                        {%>
                            <option value="<%=trip[i].WBSId%>">
                                <%=trip[i].WBSName%>
                            </option>
                            <%}%>


                                </select>
                    </div>
                </div>

                <div class="col-md-12 a">
                    <div class="col-md-3">
                        <label style="line-height:42px !important;">From Date:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-3">
                        <input type="text" maxlength="45" style="margin-top:10px;width:100%" class="form-control datepicker" id="fromother" name="otherFromDate" required/>
                    </div>

                    <div class="col-md-3">
                        <label style="line-height:42px !important;">To Date:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                    </div>
                    <div class="col-md-3">
                        <input type="text" maxlength="150" style="margin-top:10px;width:100%" class="form-control datepicker" id="otherToDate" name="otherToDate" required/>
                    </div>
                </div>

                <div id="other" class="">
                    <div class="col-md-12 a"><b style="color:#f05f40;">Expense Details for Others :-</b>
                    </div>

                    <div class="col-md-12 a">
                        <div class="col-md-3">
                            <label style="line-height:42px !important;">Reason for Expense:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-3">
                            <input type="text" maxlength="45" style="margin-top:10px;width:100%" class="form-control" id="otherreason" name="otherReason" required/>
                        </div>
                    </div>

                    <div class="col-md-12 a"><b style="color:#f05f40;">Total Expense :-</b>
                    </div>

                    <div id="d1" class="col-md-12 a ">
                        <div class="col-md-3">
                            <label style="line-height:42px !important;">Currency:<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-3">
                            <select class="form-control" style="margin-top:10px;" id='othercu1' name="otherCurrency" style="width:200px !important;" onchange="showexpensDetails()" required/>
                            <option value="" acualvalue='0'>--Select--</option>

                            <%for(var i=0;i<currency.length;i++){%>
                                <option value="<%=currency[i].id%>" acualvalue="<%=currency[i].currencyRate%>">
                                    <%=currency[i].description1%>
                                </option>
                                <%}%>


                                    </select>
                        </div>
                        <div class="col-md-3">
                            <label style="line-height:42px !important;">Total Expense :<span Style="font-size:10px;margin-bottom:10px; color:red">*</span></label>
                        </div>
                        <div class="col-md-3">
                            <input type="number" maxlength="45" style="margin-top:10px;width:100%" class="form-control" id="otherex1" name="othertex" onblur='changeCurrencyforOther()' required />
                        </div>
                    </div>

                </div>

                <div id="footer" class="modal-footer" style="border-top:0px;">
                    <center>
                        <button id='cancel' type="reset" data-dismiss="modal" class="btn btn-default" style="background-color:#f05f40;color:black;padding-top: 4px; width:100px;height:30px;margin-top:10px;color:white">Cancel</button>
                        <button type="submit" class="btn btn-default" style="margin-top:10px;background-color:#f05f40;color:black;padding-top: 4px; width:100px;height:30px;color:white" onclick="">Submit</button>
                    </center>
                </div>
            </div>
        </div>
        </div>
    </form>

    <!--end Food/Entertainment Expense Form-->
    <!--form for Document Attachment Expense-->

    <form action="/fileAttechment" method="post" name="rbug" enctype="multipart/form-data">
        <div class="modal fade" id="myModalexp" role="dialog" style="margin-left:;">

            <div style="height:auto;width:800px;margin-left:250px;margin-top:30px;z-index:1;position:absolute" class="panel panel-default">

                <div class="panel-heading" id="panelHead1" role="button" style="background-color:#f05f40; color:white; height:40px;">
                    <center>
                        <label id="head4" class="modal-title" style="color:white;font-size:12px;"><b>Expense Details</b></label>
                        <span data-dismiss="modal" class="glyphicon glyphicon-remove" style='height=20px;float:right;color:black;'></span>
                    </center>

                </div>

                <div class="secondry-color" id="accordions1">
                    <div style="margin-left: 10px;margin-right: 10px">
                        <input class="form-text-box" type="text" placeholder="search in this table" id="searchbox11" style="float:right;width: 13%;margin-top: 10px;margin-bottom: 10px">
                        <table class="table table-hover table-striped table-bordered rceDataTable" cellpadding="0" cellspacing="0" border="0" id="bugtable1">
                            <thead>
                                <th style='font-size:12px;background-color:grey;color:white'>Expense Type</th>
                                <th style='font-size:12px;background-color:grey;color:white'>Trip/Assignment</th>
                                <th style='font-size:12px;background-color:grey;color:white'>From</th>
                                <th style='font-size:12px;background-color:grey;color:white'>To</th>
                                <th style='font-size:12px;background-color:grey;color:white'>Amount(INR)</th>
                                <th style='font-size:12px;background-color:grey;color:white'>Action</th>
                            </thead>
                        </table>
                    </div>
                </div>
            </div>
        </div>

    </form>

    <form action="/fileAttechment" method="post" name="rbug" enctype="multipart/form-data">
        <div class="modal fade" id="myModalcomment" role="dialog" style="margin-left:;">

            <div style="height:auto;width:500px;margin-left:400px;margin-top:30px;z-index:1;position:absolute" class="panel panel-default">

                <div class="panel-heading" id="panelHead1" role="button" style="background-color:#f05f40; color:white; height:40px;">
                    <center>
                        <label id="head4" class="modal-title" style="color:white;font-size:12px;"><b>comments</b></label>
                        <span data-dismiss="modal" class="glyphicon glyphicon-remove" style='height=20px;float:right;color:black;'></span>
                    </center>
                </div>
                <input type="hidden" id="comentexpid" name="expcomment">
                <input type="hidden" id="expemail" name="expemail">
                <input type="hidden" id="expemail1" name="transId">
                <div id="d1" class="col-md-12 a " style="margin-top:20px;">

                    <div class="col-md-12">
                        <textarea class="form-control" id="comment" name="comment" placeholder='Reason for rejecting the expense'></textarea>
                    </div>
                </div>

                <div id="footer" class="modal-footer" style="border-top:0px;">
                    <center>
                        <button id='cancel' type="reset" data-dismiss="modal" class="dismiss1 btn btn-default" style="background-color:#f05f40;color:black;padding-top: 4px; width:100px;height:30px;margin-top:10px;color:white">Cancel</button>
                        <button type="button" class=" btn btn-default" style="margin-top:10px;background-color:#f05f40;color:black;padding-top: 4px; width:100px;height:30px;color:white" onclick="toCheckthelengthforReason();">Submit</button>
                    </center>
                </div>
            </div>
        </div>

    </form>

    <form action="/fileAttechment" method="post" name="rbug" enctype="multipart/form-data">
        <div class="modal fade" id="myModalremark" role="dialog" style="margin-left:;">

            <div style="height:auto;width:500px;margin-left:400px;margin-top:30px;z-index:1;position:absolute" class="panel panel-default">

                <div class="panel-heading" id="panelHead1" role="button" style="background-color:#f05f40; color:white; height:40px;">
                    <center>
                        <label id="head4" class="modal-title" style="color:white;font-size:12px;"><b>Expense Remark</b></label>
                        <span data-dismiss="modal" class="glyphicon glyphicon-remove" style='height=20px;float:right;color:black;'></span>
                    </center>
                </div>
                <input type="hidden" id="comentexpid1" name="expcomment">
                <input type="hidden" id="expemail2" name="expemail">
                <input type="hidden" id="expemail11" name="transId">
                <input type="hidden" id="statusr" name="statusr">
                <div id="d1" class="col-md-12 a " style="margin-top:20px;">

                    <div class="col-md-12">
                        <textarea class="form-control" id="remark" name="remark" placeholder='Remark'></textarea>
                    </div>
                </div>

                <div id="footer" class="modal-footer" style="border-top:0px;">
                    <center>
                        <button id='cancel' type="reset" data-dismiss="modal" class="btn btn-default dismisthis" style="background-color:#f05f40;color:black;padding-top: 4px; width:100px;height:30px;margin-top:10px;color:white">Cancel</button>
                        <button type="button" id="expenseappbutton" class="btn btn-default" data-dismiss="modal" style="margin-top:10px;background-color:#f05f40;color:black;padding-top: 4px; width:100px;height:30px;color:white" onclick="toCheckthelengthforRemark();">ok</button>
                    </center>
                </div>
            </div>
        </div>

    </form>

    <form action="/fileAttechment" method="post" name="rbug" enctype="multipart/form-data">
        <div class="modal fade" id="myModalsubmit" role="dialog" style="margin-left:;">

            <div style="height:auto;width:500px;margin-left:400px;margin-top:30px;z-index:1;position:absolute" class="panel panel-default">

                <div class="panel-heading" id="panelHead1" role="button" style="background-color:#f05f40; color:white; height:40px;">
                    <center>
                        <label id="head4" class="modal-title" style="color:white;font-size:15px;"><b>Comment</b></label>
                        <span data-dismiss="modal" class="dismiss glyphicon glyphicon-remove" style='height=20px;float:right;color:black;'></span>
                    </center>
                </div>
                <input type="hidden" id="comentexpid1" name="expcomment">
                <input type="hidden" id="expemail2" name="expemail">
                <input type="hidden" id="expemail11" name="transId">
                <input type="hidden" id="statusr" name="statusr">
                <div id="d1" class="col-md-12 a " style="margin-top:20px;">

                    <div class="col-md-12">
                        <textarea class="form-control" id="usercomment" name="usercomment" placeholder='comment' style="margin: 0px; max-width: 438px; max-height: 57px; height: 89px; width: 445px;"></textarea>
                    </div>
                </div>

                <div id="footer" class="modal-footer" style="border-top:0px;">
                    <center>
                        <button type="button" class="btn btn-default" data-dismiss="modal" style="margin-top:10px;background-color:#f05f40;color:black;padding-top: 4px; width:100px;height:30px;color:white" onclick="toCheckthelength();">ok</button>
                    </center>
                </div>
            </div>
        </div>

    </form>

    <form action="/fileAttechment" method="post" name="rbug" enctype="multipart/form-data">
        <div class="modal fade" id="myModalshowcomment" role="dialog" style="border-style: solid;
    border-color:black;">

            <div style="height:auto;width:300px;margin-left:500px;margin-top:30px;z-index:1;position:absolute" class="panel panel-default">

                <div class="panel-heading" id="panelHead1" role="button" style="background-color:#f05f40; color:white; height:40px;">
                    <center>
                        <label id="head4" class="modal-title" style="color:white;font-size:12px;"><b>Comments</b></label>
                        <span data-dismiss="modal" class="glyphicon glyphicon-remove" style='height=20px;float:right;color:black;'></span>
                    </center>
                </div>

                <div class="col-md-12" id='showcomment' style="margin-bottom: 10px">

                </div>
                <div style='width:10px'><span style="width:10px"></span></div>
            </div>
        </div>

    </form>

      <form action="/file" method="post" name="rbug" enctype="multipart/form-data">
      <div>
        <div class="modal fade clsContent" id="printmodel" role="dialog" style="border-style: solid;
    border-color:black;">

            <div style="height:auto;width:800px;margin-left:250px;margin-top:0px;z-index:1;position:absolute" class="panel panel-default">

                <div class="panel-heading" id="panelHead1" role="button" style="background-color:#f05f40; color:white; height:40px;">
                    <center>
                        <label id="head4" class="modal-title" style="color:white;font-size:12px;"><b>Expense Details</b></label>
                        <span data-dismiss="modal" class="glyphicon glyphicon-remove" style='height=20px;float:right;color:black;'></span>
                    </center>
                </div>

                <div class="col-md-12" style="margin-bottom: 10px" id="contentdetails">
                <table class="table" style="width:100%">
                    <tr style="height:50px">
                        <td class="form-Label">Employee Name :</td>
                        <td id="empname"></td>
                         <td class="form-Label">Employee Code :</td>
                        <td id="empcode"></td> 
                    </tr>
                     <tr style="height:50px">
                        <td class="form-Label">Supervisor Name :</td>
                        <td id="empsuper"></td>
                         <td class="form-Label">Approver :</td>
                        <td style="width:300px" id="empapp"></td> 
                    </tr>
                     <tr style="height:50px">
                        <td class="form-Label">Expense from Date :</td>
                        <td id="empfrom"></td>
                         <td class="form-Label">Expense To Date :</td>
                        <td id="empto"></td> 
                    </tr>
                     <tr style="height:50px">
                        <td class="form-Label">Total Expense :</td>
                        <td id="emptotal"></td> 
                    </tr>
                </table>
                  <table style="width:100%; border: 1px solid black;" class="table table-hover table-striped table-bordered rceDataTable" cellpadding="0" cellspacing="0" border="0">
                            <thead>
                                <th style='font-size:14px;background-color:grey;color:white'>Expense Type</th>
                                <th style='font-size:14px;background-color:grey;color:white'>Trip/Assignment</th>
                                <th style='font-size:14px;background-color:grey;color:white'>From Date</th>
                                <th style='font-size:14px;background-color:grey;color:white'>To Date</th>
                                <th style='font-size:14px;background-color:grey;color:white'>Amount</th>
                            </thead>
                            <tbody id="bodyi"></tbody>
                        </table>
                        
                </div>
                <div class="row"><center>
                <span title="Click to print" class="fa fa-print" onclick="PrintElem('contentdetails')" style="color:black;font-size:32px"></span></center>
                </div>
            </div>
        </div>
      </div>
    </form>

     <form action="/fileAtt" method="post" name="rb" enctype="multipart/form-data">
        <div class="modal fade" id="sanctionedmodel" role="dialog" style="border-style: solid;
    border-color:black;width: 100%">

            <div style="height:auto;width:500px;margin-left:400px;margin-top:30px;z-index:1;position:absolute" class="panel panel-default">

                <div class="panel-heading" id="panelHead1" role="button" style="background-color:#f05f40; color:white; height:40px;">
                    <center>
                        <label id="head4" class="modal-title" style="color:white;font-size:12px;"><b>Sanction Details</b></label>
                        <span data-dismiss="modal" class="glyphicon glyphicon-remove" style='height=20px;float:right;color:black;'></span>
                    </center>
                </div>

                <div class="col-md-12" id='show' style="margin-bottom: 10px">
                 <table class="table"  >
                  <tr>
                            <td>
                                <td>
                                    <label class="form-Label">Sanctioned Amount: *</label>
                                </td>
                                <td>
                                     <input type='number' maxlength="50" name="sanamount" class="form-text-box" id="sanamount" />
                                </td>
                            </td>
                   </tr>
                   <tr>         
                            <td>
                                <td>
                                    <label class="form-Label">Sanctioned Date: *</label>
                                </td>
                                <td>
                                    <input type='text' class="form-text-box datepicker" maxlength="50" name="sandate" class="form-text-box" id="sandate" />
                                </td>
                            </td>

                  </tr>
                 </table>
                 <input type="hidden" id="hideensession">
                 <input type="hidden" id="hidenmanu">
                 <center>
                 <button id="cancel" type="reset" data-dismiss="modal" class="btn btn-default dismiss"  >Cancel</button>
                    <a onclick="return validatethesensen()" class="btn btn-default"  >Submit</a>
                 </center>
                </div>
                <div style='width:10px'><span style="width:10px"></span></div>
            </div>
        </div>

    </form>

    <!--end Description Form-->

</body>

</html>
<% include ../partials/footer.ejs %>
