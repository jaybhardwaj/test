
<!DOCTYPE html>
<html lang="en">
   <% include ../partials/head %>

    <style type="text/css">
    
.dataTables_filter, .dataTables_length {
     display: none;
    }  
   
     #divcopyright{
  position:absolute;
margin-top:auto;
margin-left:30%;
margin-bottom: 5%;
}
        body {
            overflow-x: hidden;
        }

    </style>
    <!-- bootstrap files includeede in header.js file -->
    <!-- datatable files includeede here -->
<!-- 

    <link href="//cdn.datatables.net/1.10.10/css/jquery.dataTables.min.css" rel="stylesheet">
    <script src="//cdn.datatables.net/1.10.10/js/jquery.dataTables.min.js"></script>


 -->   <!-- datatable files ends here -->
    <script>
     var otable;
     $(document).ready(function(){
      $('#searchbox_demo').hide();
       if(<%=roleid%>!=1)
              {
                $("#docTab2").hide();
                $("#docTab3").hide();
                 $("#docTab4").hide();
                   $("#docTabName2").hide();
                    $("#docTabName3").hide();
                     $("#docTabName4").hide();
             


              }
                      $('#docTabNameR').addClass('active');
                       $('#docTabR').addClass('active');

        otable = $("#data_table").dataTable({
            "aLengthMenu": [[10,20,50,100,-1],["10", "20","50","100","all"]],/*1 array use foractual value
                                                                            and secound array used for
                                                                             wt to display at ledt corner where we select values dropdown*/
            "iDisplayLength": 10, /*used to display no of element  on page load or relaod*/
            "showNEntries": true, /* for displaying showing 10 out of 50 entries at left bottom corner*/
            "bFilter": true,        /*dispalying search box at top right corner*/
            "bLengthChange": true,  /*dispalying  show 10 out of 50 entries at top left corner*/
            "aoColumnDefs": [{ //   "bSortable": false,
                                //  "aTargets": [0]
                            }],
            "order": []         /*we can provide order to every column "order": [[0,'asc'],[1,'des']] */
            
      });
   $("#searchbox").keyup(function() {
        otable.fnFilter(this.value);
      });

     });
     function editModel(id1) {
            console.log(id1);
            $.ajax({
                url: '/viewFileDetails',
                type: 'post',
                data: {
                    "id": id1
                },
                success: function(data) {

                    console.log("sucessssss", data);
                    document.getElementById("title1").value = data[0][0].title;
                    document.getElementById("authname").value = data[0][0].author;
                    document.getElementById("desc").value = data[0][0].description;
                    document.getElementById("rest").value = data[0][0].restriction;
                    var temp = "";
                    for (var i = 0; i < data[1].length; i++) {
                        temp += data[1][i].doctype + ' , ';
                    }
                    document.getElementById("docType").value = temp.slice(0, -2);
                    temp = "";
                    for (var i = 0; i < data[2].length; i++) {
                        temp += data[2][i].industry + ' , ';
                    }
                    document.getElementById("industry").value = temp.slice(0, -2);
                    temp = "";
                    for (var i = 0; i < data[3].length; i++) {
                        temp += data[3][i].business + ' , ';
                    }
                    document.getElementById("business").value = temp.slice(0, -2);
                    temp = "";
                    for (var i = 0; i < data[4].length; i++) {
                        temp += data[4][i].technology + ' , ';
                    }
                    document.getElementById("tech1").value = temp.slice(0, -2);

                    temp = "";
                    for (var i = 0; i < data[5].length; i++) {
                        temp += data[5][i].restriction + ' , ';
                    }
                    document.getElementById("rest").value = temp.slice(0, -2);

                    /* alert($('tech1').val());*/

                }
            });
            $('#tag1').modal('show');
            /*$('.modal-backdrop.fade').css({
               'background-color':'rgba(0,0,0,0)'       
            });
              $("#tag1").draggable({
                   handle: ".modal-header"
               });*/


        }
    </script>

<div>
        <% include ../partials/adminheader %>
<% include headerDoc.ejs %>
</div>

    <div class="row  secondry-color">
            
            <div class="row table-responsive" style="padding:3%;padding-top:1%">
             <span class="modal-title" style=" padding-left:45%"> Rejected Files </span>
               <input class="form-text-box" type="text" placeholder="search in this table" id="searchbox" style="float:right;width: 13%"> 
                    <table id="data_table" class="table table-striped table-bordered" cellspacing="0" width="100%" style="font-size:82%;ALIGN-CONTENT: CENTER;margin-top:1%">
                        <thead style=" background-color: #808080">
                        <tr>
                                <th>File Name</th>
                                <th>File Title</th>
                                <th>Author</th>
                                <th>Uploaded By</th>
                                <th>Date</th>
                                <th>Description</th>
                                 <th>Action</th>
                                 </tr>
                         </thead>
                        <tbody id="orderbody">
                            <%for(var i=files[0].length-1;i>=0;i--) {%>
                                <tr class="" id = 'row_<%=files[0][i].id%>'>
                                    <td><a download href="./attach/<%=files[0][i].fpath%>"> <%=files[0][i].name%></a></td>
                                    <td><%=files[0][i].title%></td><td><%=files[0][i].author%></td><td><%=files[0][i].userName%></td><td><%=files[0][i].uploadDate%>
                                    </td><td><%=files[0][i].description%></td><td><a title="view details"><i  onclick="editModel(<%=files[0][i].id%>)" style="max-width: 25px;" class="glyphicon glyphicon-search"></i></a></td>
                                   
                                </tr>
                            <%}%>
                        </tbody>
                    </table>
              </div>
        </div>

  <div class="modal fade" id="tag1">
        <div class="modal-dialog">

            <div class="modal-content" id="express2" style="">
                <div class="modal-header" style="background-color:#f05f40; ">
                    <center><label id="head4" class="modal-title" style="color:white;"><b>View Details</b></label></center>
                     <button type="button" class="close" id='cancel' style="margin-top: -31px" aria-label="Close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body" style="width:auto">
                    <div class="row ">
                        <div class="col-md-4">
                            <label style="line-height:42px !important;"> File Title:</label>
                        </div>
                        <div class="col-md-8">
                            <textarea  id="title1" style="width:100%;resize: none;margin-bottom:3%" name="fname" readonly></textarea>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-4">
                            <label style="line-height:42px !important;"> Author Name:</label>
                        </div>
                        <div class="col-md-8">
                       <textarea  id="authname" style="width:100%;resize: none;margin-bottom:3%" name="fname" readonly></textarea>
                        </div>
                    </div>


                    <div class="row ">
                        <div class="col-md-4">
                            <label style="line-height:42px !important;">Description :</label>
                        </div>
                        <div class="col-md-8">
                            <textarea name="descbox" id="desc"  placeholder="Description" style="width:100%;resize: none;margin-bottom:3%" readonly></textarea>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <label style="line-height:42px !important;">Industry :</label>
                        </div>
                        <div class="col-md-8">
                             <textarea name="descbox" id="industry" value=" " placeholder="Description" style="width:100%;resize: none;margin-bottom:3%" readonly></textarea>
                           

                        </div>
                    </div>
                    <div class="row ">
                        <div class="col-md-4">
                            <label style="line-height:42px !important;">Business:</label>
                        </div>
                        <div class="col-md-8">
                             <textarea name="descbox" id="business" value=" " placeholder="Description" style="width:100%;resize: none;margin-bottom:3%" readonly></textarea>
                           
                        </div>
                    </div>

                    <div class="row ">
                        <div class="col-md-4">
                            <label style="line-height:42px !important;">Document Type:</label>
                        </div>
                        <div class="col-md-8">
                             <textarea name="descbox" id="docType" value=" " placeholder="Description" style="width:100%;resize: none;margin-bottom:3%" readonly></textarea>
                          
                        </div>
                    </div>


                    <div class="row ">
                        <div class="col-md-4">
                            <label style="line-height:42px !important;">Technology:</label>
                        </div>
                        <div class="col-md-8">
                             <textarea name="descbox" id="tech1" value=" " placeholder="Description" style="width:100%;resize: none;margin-bottom:3%" readonly></textarea>
                           


                        </div>
                    </div>

                    <div class="row ">
                        <div class="col-md-4">
                            <label style="line-height:42px !important;">Restriction Lavel:</label>
                        </div>
                        <div class="col-md-8">
                            <textarea   id="rest" value="" style="width:100%;resize: none;margin-bottom:3%" name="fname" readonly>
                        </textarea>
                        </div>
                    </div>
                    <div class="row">
                        <center>
                            <button id="cancel" type="reset" data-dismiss="modal" class="btn btn-default" style="background-color:#f05f40;color:black;padding-top: 4px; width:100px;height:30px;margin-top:10px;color:white">Close</button>

                        </center>
                    </div>

                </div>
            </div>
        </div>
    </div>      
<footer>
        <% include ../partials/footer %>
    </footer>
  </body>
  </html>