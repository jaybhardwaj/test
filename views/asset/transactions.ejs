<head> 
    <% include ../partials/head %>
  
    <% include ../partials/adminheader %>

    <% include assetheader %>
<script type="text/javascript">
	    $(document).ready(function(){
 var otable=$("#adTable").dataTable();
   $("#searchbox").keyup(function() {
        otable.fnFilter(this.value);
      });

      $('.trans-img').addClass('active');
      $(".a").click(function () { 
        $(this).fadeTo("fast", .5).removeAttr("href"); 
      });   

  $('#usersId').tagger({
        baseURL: '../img/'
      , tabindexOffset: 400
      , fieldWidth: "13em"

      });
  $('#usersId1').tagger({
        baseURL: '../img/'
      , tabindexOffset: 400
      , fieldWidth: "13em"

      });
    });
</script>

<style>
/*.tagger {
  
    border: 1px solid #aaa;
    background-color: #fff;
    cursor: text;
    font-family: sans-serif;
    font-size: 10pt;
    min-height: 19px;
    display: inline-block; 
}*/
.dataTables_filter, .dataTables_length {
     display: none;
    }
 
</style>
</head>
  <html lang="en">
  <body>

  <div class="container-fluid   secondry-color" style=" ">
      
 
        <div class="container-fluid secondry-color" style="margin-top:0%;min-height: 400px">
   <!--    <div class="row" style="padding-top: 1%">
         <span class="modal-title" style="padding-left:45%;">Assign/Unassign</span>
      </div> -->

   <div class="row" >
        
        <div class="col-md-2">
             
        <label class="form-Label">Select User :</label>
          <select id="usersId" class="form-text-box"  onchange="getData(1,1)" >
            <option disabled value="0"selected="">select</option>
              <%for(var i=0;i<users.length;i++){%><option value='<%=users[i].id%>'><%=users[i].Name%></option>
              <%}%>
          </select>
      </div>
      <div class="col-md-2"> 
                    <label class="form-Label">Type:</label>
             
            <select id="chooseType" class="form-text-box" onchange="chooseType()">
              <option value="-1">Select</option>
              <option value="0">Hardware</option>
              <option value="1">Software</option>
            </select> 
      </div>
      <div id="hardwareList" class="hide col-md-2">
      <label class="form-Label">Hardware List:</label>
            <select id="hw" type="dropdown" class="form-text-box" onchange="getList('1',this.value)"> 
                </select>
      </div>
         <div id="softwareList" class="hide col-md-2">
         <label class="form-Label">Software List:</label>
            <select id="ac" type="dropdown" class="form-text-box" onchange="getAcc(this.value)"></select>
          </div>
          <div id="hardwareTag" class="hide col-md-2">
            <label class="form-Label">Hardware Tag:</label>
            <select id="hdwTagOption" class="form-text-box " onchange="assignHdwr()">
            <option value="0">Select</option>
            </select>
          </div>
          <div id="softwareLic" class="hide col-md-2">
          <label class="form-Label">Software Licence:</label>
           <select id="acc" class="form-text-box " onchange="">
                </select>
          </div>
          <input type="submit" class="btn" value="Assign" style="margin-top:2.5%" onclick="">
      </div>
         
             <!--  <tr>
        <td colspan="4"></td>
           <td>
            <label class="form-Label"><label style="color: #f05f40">2b).</label> Software Type:</label>
          </td>
          
          </td>
         <td>
            <label class="form-Label"><label style="color: #f05f40">3a).</label> Service Tag:</label>
          </td>
          <td>
            <label class="form-Label"><label style="color: #f05f40">3b).</label> Licence Key:</label>
          </td>
          
        </tr> -->
       <input class="form-text-box" type="text" placeholder="search in this table" id="searchbox" style="float:right;width: 13%">
       <table class=" table-striped  table-hover " id="adTable" style="padding-top: 10px">
              <thead id="headi">
                
                  <th>#</th>
                  <th>Name</th>
                  <th>Asset</th>
                  <th>Service Tag</th>
                  <th>Assign Date</th>
                  <th>Action</th>
                  <th>Status</th>
                
              </thead>
              <tbody id="bodyi">
                <%for(var i=0;i<assignedHome[0].length;i++){j=i+1;%>

               <tr>
               <td><%= j %></td>
                 <td><%=assignedHome[0][i].firstName%></td>
                 <td><%=assignedHome[0][i].componentName%></td>
                 <td><%=assignedHome[0][i].tagNo%></td>
                 <td><%=assignedHome[0][i].assignDate%></td>
                 <td><%=assignedHome[0][i].tsId%></td>
                 <td><%=assignedHome[0][i].assign%></td> 
               </tr> 
              <%}%>
                </tbody>
      </table>
        
           
   </div>    
       
        </div>
   <!--    
      <section id="content2">
        
        <table class="table" >
        <tr>
        <td>
            <td>
              <label class="form-Label">Select User :</label>
            </td>
            <td>
              <select id="usersId1" class="form-text-box"  onchange="getData(1,2)" >
            <option disabled value="0"selected="">select</option>
              <%for(var i=0;i<users.length;i++){%><option value='<%=users[i].id%>'><%=users[i].Name%></option>
              <%}%>
          </select>
            </td>
          </td>

          </tr>
          </table>

          <table class="table table-striped table-bordered table-hover table-condensed">
              <thead id="headi1">
                <tr>
                  <th>#</th>
                  <th>Asset</th>
                  <th>Service Tag</th>
                  <th>Assign Date</th>
                  <th>Action</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody id="bodyi1">
                </tbody>
      </table>
      </section> -->
    
 

 </body>
 </html>
<!---->
<div class="modal " id="myModalcomp"  role="dialog">
  <div class="modal-dialog" style="display:table;height:95%;">
    <!-- Modal content-->
    <div class="modal-content" id="express2" style="height:200px;width:400px">
      <div class="modal-header" style="background-color:#f05f40;">
        <center><label id="head4" class="modal-title" style="color:white;font-size:8pt;"><b>Select Component</b></label>
        <span  data-dismiss="modal"  class="glyphicon glyphicon-remove" style='float: right; color:black; '></span>
        </center>
      </div>
      <div id="err" class="col-lg-6 col-sm-offset-3"></div>
      <div class="modal-body">
        <div class="form-group">
          <div id='componentiddiv'>
            <table id ='addComptable1' class="table table-striped table-bordered table-hover table-condensed" style="overflow-y:auto;">
            <col width="10"><col width="10"><col width="20">

                <thead id="modalHead">
                  <tr>
                    <th style="width:35%;">Component Name</th>
                    <th style="width:35%">TagNo</th>
                    <th style="width:30%;">Action</th>
                  </tr>
                </thead>
                <tbody id="addcompobody1">
                </tbody>
              </table>
           

            </div>
          </div>
        </div>
    </div>
  </div>
</div>


<!---->
  <footer>
    <% include ../partials/footer %>
  </footer>
  <script>
  function assignHdwr(){

  }
  function assignSftwr(){

  }
function chooseType(){
 // alert($("#usersId").val());
  if(!$("#usersId").val()){ 
    alert("Select a User!");
    $("#chooseType").val(-1);
    return false;
  }
  var at=$("#chooseType").val();
  
  if(at=="0"){
    //alert(at);
    $("#hardwareList").removeClass("hide");
    $("#softwareList").addClass("hide");
  }
  else if(at=="1"){
    //alert(at);
    $("#hardwareList").addClass("hide");
    $("#softwareList").removeClass("hide");
  }
  else{
   // alert(at);
     $("#hardwareList").addClass("hide");
    $("#softwareList").addClass("hide");
  }
}
    
    $("#acc").editableSelect({
      onSelect:function(elem){
        var count=0;
        var check=false;
        $("#bodyi tr").each(function(i,row){
          count++;
          $(this).find('td').each(function(k,val){
            var flag=false;
              if(k=='1'){
                if($("#ac option:selected").text()==val.text()){
                  flag=true;
                  check=true;
                }
              }
              if(flag==true){
                if(k=='2'){
                  val.text(elem[0].value);
                }
              }
          });
        });
          if(check==false){
            var row='<tr><td>'+ ++count+'</td><td>'+$("#ac option:selected").text()+'</td><td>'+elem[0].value+'</td><td><input class="form-text-box datetimepicker"></input>'+
            '<td><button>Unassign</button></td>';
            $('#bodyi').append(row);
          }
        }
      });
    





var count=0;
    function addSubline(copId,copName,lineId,tagNo){
    
      console.log(copId,copName,lineId,tagNo);
        var row='<tr><td>'+ ++count+'</td><td>'+copName+'<input type="hidden" id="compId'+ count+'" value='+copId+'></td><td>'+tagNo+'<input type="hidden" id="line'+count+'" value='+lineId+'></td><td><input id="date'+count+'" class="form-text-box date"></input><input  type="hidden" id="tsId'+count+'" value="0"></input>'+'<td><span id="assignreg'+count+'" style="margin-left:70px;color:green; " class="glyphicon glyphicon-ok-circle" onclick="save2db('+count+')"><span  style="margin-left:70px;color:green; " class=" glyphicon glyphicon-tasks" onclick="getsubComponent('+lineId+')"></span></td><td class="hide">0</td>'+'<td id="assign'+count+'" class="">Draft</td>';
                  $('#bodyi').append(row);
                  jQuery('.date').datetimepicker({
                    timepicker:false,
                    format:'Y-m-d'
                  });

    }
     function getData(tid,flag1){
 
      if(flag1==1){
        var uid=$("#usersId").val();
      userid=uid;
        $('#saveb').removeClass('hide');
        $('#bodyi').html('');
        count=0;
       // alert("tid--"+tid+"--uid--"+uid);
        $.ajax({
          url: "/getTransDetails",
          method:'post',
          data: {atid:tid,uid:uid,flag:1},
          dataType: 'json',
          success: function(result){
            console.log("-- -- -  -- dd --- - - ",result);
            for(var i=0;i<result[0].length;i++){
              var row='<tr><td>'+ ++count+'</td><td>'+result[0][i].firstName+'</td><td>'+result[0][i].componentName+'<input type="hidden" id="compId'+count+'" value='+result[0][i].ACID+'></td><td>'+
                  result[0][i].tagNo+'<input type="hidden" id="line'+count+'" value='+result[0][i].Id+'><input type="hidden" id="tsId'+count+'" value='+result[0][i].tsId+'></td><td><input id="date'+count+'" class="form-text-box date" value="'+((result[0][i].assignDate).toString()).slice(0,10)+'"></input><td><span id="assignapp'+count+'" style="margin-left:70px; color:red; " class="glyphicon glyphicon-remove-circle" onclick="unasigned('+count+')"></span><span  style="margin-left:70px; color:green; " class=" glyphicon glyphicon-tasks" onclick="getsubComponent('+result[0][i].Id+')"></span>';
                 // alert(result[0][i].assign);
                  if(result[0][i].assign==1){
                   
                  //row=row+'<span id="assignreg'+count+'" style="margin-left:70px;color:green; " class="hide glyphicon glyphicon-ok-circle" onclick="save2db('+count+')"></span></td>';
                  row=row+'';
                  
                    $('#assignreg'+count).removeClass('hide');
                    $("#assignapp"+count).addClass('hide');
                  row=row+'<td id="assign'+count+'">assigned</td>';  
                  }else{
                      //row=row+'<span id="assignreg'+count+'" style="margin-left:70px;color:green; " class=" glyphicon glyphicon-ok-circle" onclick="save2db('+count+')"></span></td>';
                      row=row+'';
                     $('#assignapp'+count).removeClass('hide');
                     $('#assignreg'+count).addClass('hide');
                   row=row+'<td class="hide">0'+'</td><td id="assign'+count+'">unassigned</td>'; 
                  }
              $('#bodyi').append(row);
            }
            for(var i=0;i<result[1].length;i++){
              var row='<tr><td>'+ ++count+'</td><td>'+result[1][i].componentName+'<input type="hidden" id="compId'+count+'" value='+result[1][i].ACID+'></td><td>'+result[1][i].tagNo+'<input type="hidden" id="line'+count+'" value='+result[1][i].Id+'><input type="hidden" id="tsId'+count+'" value='+result[1][i].tsId+'></td><td><input id="date'+count+'" class="form-text-box date" value="'+((result[1][i].assignDate).toString()).slice(0,10)+'"></input><td>';
                 if(result[1][i].assign==1){
                   row=row+'<span id="assignapp'+count+'" style="margin-left:70px; color:red; " class=" glyphicon glyphicon-remove-circle" onclick="unasigned('+count+')"></span></td>';
                
                  
                    $('#assignreg'+count).removeClass('hide');
                    $("#assignapp"+count).addClass('hide');
                  row=row+'<td id="assign'+count+'">assigned</td>';  
                  }else{
                   //row=row+'<span id="assignreg'+count+'" style="margin-left:70px;color:green; " class=" glyphicon glyphicon-ok-circle" onclick="save2db('+count+')"></span></td>';
                   row=row+'';
                     $('#assignapp'+count).removeClass('hide');
                     $('#assignreg'+count).addClass('hide');
                   row=row+'<td class="hide">0'+'</td><td id="assign'+count+'">unassigned</td>'; 
                  }
              $('#bodyi').append(row);
            }
          }
        });
        if(tid=='1'){ 
         
          $.ajax({
            url: "/getTransComp",
            method:'post',
            data: {atid:tid},
            dataType: 'json',
            success: function(result){
              console.log("show hrd",result);
              var qwer=JSON.stringify(result[1]);
              var data=JSON.stringify(result[0]);
              var options = $("#hw");
              options.empty();
              options.append('<option val="0">select</option>');
              $.each(JSON.parse(data), function() {
                options.append($("<option />").val(this['id']).text(this['componentName']));
              });
              var option = $("#ac");
              option.empty();
              option.append($("<option />").val('0').text('select'));
              $.each(JSON.parse(qwer), function() {
                option.append($("<option />").val(this['id']).text(this['componentName']));
              });
            }
          });
        } else
        {
          $.ajax({
            url: "/getTransUnassigned",
            method:'post',
            data: {atid:tid,acid:'0'},
            dataType: 'json',
            success: function(result){
            }
          });
        }
      }


      else{
        var uid=$("#usersId1").val();
      userid=uid;
        $('#saveb1').removeClass('hide');
        $('#bodyi1').html('');
        count=0;
        //alert("tid--"+tid+"--uid--"+uid);
        $.ajax({
          url: "/getTransDetails",
          method:'post',
          data: {atid:tid,uid:uid,flag:0},
          dataType: 'json',
          success: function(result){
            console.log("-- -- -  -- dd --- - - ",result);
            for(var i=0;i<result[0].length;i++){
              var row='<tr><td>'+ ++count+'</td><td>'+result[0][i].componentName+'<input type="hidden" id="compId'+count+'" value='+result[0][i].ACID+'></td><td>'+
                  result[0][i].tagNo+'<input type="hidden" id="line'+count+'" value='+result[0][i].Id+'><input type="hidden" id="tsId'+count+'" value='+result[0][i].tsId+'></td><td><input id="date'+count+'" class="form-text-box date" value="'+((result[0][i].assignDate).toString()).slice(0,10)+'"></input><td><span id="assignreg'+count+'" style="margin-left:70px;color:green; " class="hide glyphicon glyphicon-ok-circle" onclick="save2db('+count+')"></span><span  style="margin-left:70px; color:green; " class=" glyphicon glyphicon-tasks" onclick="getsubComponent('+result[0][i].Id+')"></span>';
                  if(result[0][i].assign==1){
                   
                  row=row+'<span id="assignreg'+count+'" style="margin-left:70px;color:green; " class="hide glyphicon glyphicon-ok-circle" onclick="save2db('+count+')"></span></td>'
                  
                    $('#assignreg'+count).removeClass('hide');
                    $("#assignapp"+count).addClass('hide');
                  row=row+'<td id="assign'+count+'">assigned</td>';  
                  }else{
                      row=row+'<span id="assignreg'+count+'" style="margin-left:70px;color:green; " class=" glyphicon glyphicon-ok-circle" onclick="save2db('+count+')"></span></td>';
                     $('#assignapp'+count).removeClass('hide');
                     $('#assignreg'+count).addClass('hide');
                   row=row+'<td class="hide">0'+'</td><td id="assign'+count+'">unassigned</td>'; 
                  }
              $('#bodyi1').append(row);
            }
            for(var i=0;i<result[1].length;i++){
              var row='<tr><td>'+ ++count+'</td><td>'+result[1][i].componentName+'<input type="hidden" id="compId'+count+'" value='+result[1][i].ACID+'></td><td>'+result[1][i].tagNo+'<input type="hidden" id="line'+count+'" value='+result[1][i].Id+'><input type="hidden" id="tsId'+count+'" value='+result[1][i].tsId+'></td><td><input id="date'+count+'" class="form-text-box date" value="'+((result[1][i].assignDate).toString()).slice(0,10)+'"></input><td>';
                 if(result[1][i].assign==1){
                   //row=row+'<span id="assignapp'+count+'" style="margin-left:70px; color:red; " class=" glyphicon glyphicon-remove-circle" onclick="unasigned('+count+')"></span></td>';
                   row=row+'';
                
                  
                    $('#assignreg'+count).removeClass('hide');
                    $("#assignapp"+count).addClass('hide');
                  row=row+'<td id="assign'+count+'">assigned</td>';  
                  }else{
                   row=row+'<span id="assignreg'+count+'" style="margin-left:70px;color:green; " class=" glyphicon glyphicon-ok-circle" onclick="save2db('+count+')"></span></td>';
                     $('#assignapp'+count).removeClass('hide');
                     $('#assignreg'+count).addClass('hide');
                   row=row+'<td class="hide">0'+'</td><td id="assign'+count+'">unassigned</td>'; 
                  }
              $('#bodyi1').append(row);
            }
          }
        });
        if(tid=='1'){ 
         
          $.ajax({
            url: "/getTransComp",
            method:'post',
            data: {atid:tid},
            dataType: 'json',
            success: function(result){
              console.log(result);
              var qwer=JSON.stringify(result[1]);
              var data=JSON.stringify(result[0]);
              var options = $("#hw");
              options.empty();
              options.append('<option val="0">select</option>');
              $.each(JSON.parse(data), function() {
                options.append($("<option />").val(this['id']).text(this['componentName']));
              });
              var option = $("#ac");
              option.empty();
              option.append($("<option />").val('0').text('select'));
              $.each(JSON.parse(qwer), function() {
                option.append($("<option />").val(this['id']).text(this['componentName']));
              });
            }
          });
        } else
        {
          $.ajax({
            url: "/getTransUnassigned",
            method:'post',
            data: {atid:tid,acid:'0'},
            dataType: 'json',
            success: function(result){
            }
          });
        }
      }
      
      }

      function getList(tid,value){
        //alert(tid+' '+value);
        $("#hardwareTag").removeClass("hide");
        $("#softwareLic").addClass("hide");

        $.ajax({
          url: "/getTransUnassigned",
          method:'post',
          data: {atid:tid,acid:value},
          dataType: 'json',
          success: function(result){
            console.log("tags",result);

            for(var i=0;i<result[0].length;i++){
              $("#hdwTagOption").append("<option value='"+result[0][i].id+"''>"+result[0][i].tagNo+"</option>")
            }
        /*    $("#hdwTagOption").tagger({
              "fieldWidth":"20em"
            });*/

   /*       
            var data=JSON.stringify(result[0]);
            var options = $("#com");
            options.empty();
             options.append($("<option />").val('0').text('select'));
            $.each(JSON.parse(data), function() {
              options.append($("<option />").val(this['id']).text(this['tagNo']));
            });
        $('#com').editableSelect({

              onSelect:function(elem){
                var tag=$(this)[0].value;
                var count=0;
                var check=false;
                $("#bodyi tr").each(function(i,row){
                  count++;
                  var flag=false;
                  $(this).find('td').each(function(k,val){
                    if(k=='1'){
                      if($("#hw option:selected").text()==$(this).text()){
                        flag=true;
                        check=true;
                      }
                    }
               
                    if(flag==true){
                      if(k=='2'){
                        $(this).html(tag);
                      }
                    }
                  });
                });
                if(check==false){
                  var row='<tr><td>'+ ++count+'</td><td>'+$("#hw option:selected").text()+'<input type="hidden" id="compId'+ count+'" value='+$("#hw option:selected").val()+'></td><td>'+$(this)[0].value+'<input type="hidden" id="line'+count+'" value='+elem[0].value+'></td><td><input id="date'+count+'" class="form-text-box date"></input><input  type="hidden" id="tsId'+count+'" value="0"></input>'+'<td><span id="assignreg'+count+'" style="margin-left:70px; color:green; " class="glyphicon glyphicon-ok-circle" onclick="save2db('+count+')"></span><span  style="margin-left:70px; color:green; " class=" glyphicon glyphicon-tasks" onclick="getsubComponent('+elem[0].value+')"></span></td><td class="hide">0</td>'+'<td id="assign'+count+'" class="">Draft</td>';
                  $('#bodyi').append(row);
                  jQuery('.date').datetimepicker({
                    timepicker:false,
                    format:'Y-m-d'
                  });
                }
              }
            });*/
          }
        });
      } 
      function getAcc(value){
        //alert(value);
         $("#hardwareTag").addClass("hide");
        $("#softwareLic").removeClass("hide");
        $.ajax({
          url: "/getAccUnassigned",
          method:'post',
          data: {cid:value},
          dataType: 'json',
          success: function(result){

            console.log("software licenced :",result);

            //console.log(result);
           // alert(result);
       /*     var data=JSON.stringify(result[0]);
            var options = $("#acc");
            options.empty();
            $.each(JSON.parse(data), function() {
              //console.log(data);
              if(this['tagNo'] != null){
                options.append($("<option />").val(this['id']).text(this['tagNo']).attr('value1',this['id']));
              }
              
            });
          var a;
          $('#acc').editableSelect({
            onSelect:function(elem){
              console.log(elem[0].value);
              var tag=$(this)[0].value;
              //console.log($("#ac option:selected"));
              var count=0;
              var check=false;
              $("#bodyi tr").each(function(i,row){
                count++;
                var flag=false;
                $(this).find('td').each(function(k,val){
                  if(k=='1'){
                    if($("#ac option:selected").text()==$(this).text()){
                      flag=true;
                      check=true;
                    }
                  }
                  console.log('flaggg'+flag);
                  console.log('check-----------'+check);
                  if(flag==true){
                    if(k=='2'){
                      $(this).html(tag);
                    }
                  }
                });
              });
              if(check==false){
                console.log('elsecheck')
                var row='<tr><td>'+ ++count+'</td><td>'+$("#ac option:selected").text()+'<input type="hidden" id="compId'+ count+'" value='+$("#ac option:selected").val()+'></td><td>'+$(this)[0].value+'<input type="hidden" id="line'+count+'" value='+elem[0].value+'><input  type="hidden" id="tsId'+count+'" value="0"></td><td><input id="date'+count+'" class="form-text-box date"></input>'
                +'<td><span id="assignreg'+count+'" style=" margin-left:70px;color:green; " class="glyphicon glyphicon-ok-circle" onclick="save2db('+count+')"></td><td class="hide">'+
                elem[0].value+'</td><td class="hide">'+elem[0].getAttribute("value1")+'</td><td id="assign'+count+'">Draft</td>';
                $('#bodyi').append(row);

                jQuery('.date').datetimepicker({
                  timepicker:false,
                  format:'Y-m-d'
                });
              }
            }
          });
*/        }
      }); 
    }

   /* function Assign(e){
      if($(e).text()=='Unassign'){
        $(e).text('Assign');
      } else
      {
        $(e).text('Unassign');
      }
    }*/

    function save2db(num){
      var uid,lid,cid,adate,tid;
    uid=userid;
    lid=$('#line'.concat(num)).val();
    cid=$('#compId'.concat(num)).val();
    adate=$('#date'.concat(num)).val();
    tid=$('#tsId'.concat(num)).val();
    aflag=1;
   
    console.log(uid,lid,cid,adate,tid);
      $.ajax({
        url: "/saveAssignment",
        method:'post',
        data: {uid:uid,cid:cid,lid:lid,adate:adate,aflag:aflag,tid:tid},
                dataType: 'json',
        success: function(result){
         $('#tsId'.concat(num)).val(result);
         $('#assign'.concat(num)).html(''); 
         $('#assign'.concat(num)).append('assigned');
          $('#assignapp'.concat(num)).removeClass('hide');
          $('#assignreg'.concat(num)).addClass('hide');
         alert('sucessfully asigned');
        }
      });
    }

     function unasigned(num){
    
      var uid,lid,cid,adate,tid;
    uid=userid;
    lid=$('#line'.concat(num)).val();
    cid=$('#compId'.concat(num)).val();
    adate=$('#date'.concat(num)).val();
    tid=$('#tsId'.concat(num)).val();
    aflag=0;
    console.log(uid,lid,cid,adate,tid);
      $.ajax({
        url: "/saveAssignment",
        method:'post',
        data: {uid:uid,cid:cid,lid:lid,adate:adate,aflag:aflag,tid:tid},
                dataType: 'json',
        success: function(result){
        $('#assign'.concat(num)).html('');  
       $('#assign'.concat(num)).append('unassigned');
       $('#assignreg'.concat(num)).removeClass('hide');
          $('#assignapp'.concat(num)).addClass('hide');
         alert('sucessfully unasigned');
        }
      });
    }

function add(i){
  
}
     function getsubComponent(lineId){
       $("#myModalcomp").modal('show');
      $.ajax({
        url: "/getsubComponent",
        method:'post',
        data: {lineId:lineId},
                dataType: 'json',
        success: function(result){
          
          //alert(result[0].length);
            var coid='';
            var coName='';
            var lid='';
            var tag='';
          for(var i=0;i<result[0].length;i++){
            var comp=' ';
            var coid=result[0][i].ACID;
            var coName=result[0][i].componentName;
            var lid=result[0][i].id;
            var tag=result[0][i].tagNo;
             comp=comp+'<tr><td>'+result[0][i].componentName+'</td><td class="hide">'+result[0][i].id+'</td><td>'+result[0][i].tagNo+'</td><td><span data-dismiss="modal" class=" glyphicon glyphicon-tasks" onclick=addSubline('+coid+',"'+coName+'",'+lid+',"'+tag+'")></span></td></tr>';
             $('#addcompobody1').append(comp);
          }
        
         //alert('sucessfully asigned');
        }
      });
    }

    </script>

  </body>

  </html>